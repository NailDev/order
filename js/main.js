"use strict";(self.__chunk_yandex_ymaps3=self.__chunk_yandex_ymaps3||[]).push([[175],{44087:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--map{display:block;height:0;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;user-select:none;width:0}.ymaps3x0--layer{display:block;height:100%;left:0;overflow:hidden;position:absolute;top:0;width:100%;z-index:0}.ymaps3x0--tile-layer{-webkit-touch-callout:none;overflow:visible;pointer-events:none;transform-origin:center;-webkit-user-select:none;user-select:none}.ymaps3x0--tile-layer__container{display:block;height:100%;left:0;opacity:1;overflow:visible;top:0;transform:translateZ(0);transform-origin:center;transform-style:preserve-3d;transition:opacity .1s ease-in-out;width:100%}.ymaps3x0--tile-layer__container,.ymaps3x0--tile-layer__container>canvas,.ymaps3x0--tile-layer__container>img{background:#0000;position:absolute}.ymaps3x0--tile-layer__container>img::selection{background:#0000}.ymaps3x0--marker-layer{background:#0000;height:0;overflow:visible;width:0}.ymaps3x0--marker{position:absolute;z-index:0}.ymaps3x0--graphics-layer,.ymaps3x0--marker{transform:translateZ(0);-webkit-user-select:none;user-select:none}.ymaps3x0--graphics-layer{pointer-events:none}.ymaps3x0--graphics-layer svg{left:0;position:absolute;top:0}.ymaps3x0--graphics-layer svg>*{pointer-events:visiblePainted}.ymaps3x0--main-engine-container,.ymaps3x0--top-engine-container{display:block;height:100%;overflow:hidden;width:100%}.ymaps3x0--main-engine-container.ymaps3x0--hide{opacity:0;transition:opacity .7s ease}.ymaps3x0--magnifier{background-color:#1a3dc133;border:1px solid #5066ba;position:absolute;transform-origin:top left;z-index:1000}.ymaps3x0--magnifier-backdrop{bottom:0;left:0;position:fixed;right:0;top:0;z-index:99999}",""]);const a=r},46393:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--map-container{box-sizing:border-box;direction:ltr;display:block;height:100%;margin:0;overflow:hidden;padding:0;position:relative;width:100%}",""]);const a=r},11464:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--button{background-image:none;border:0;box-sizing:border-box;cursor:pointer;display:inline-block;margin:0;outline:0;padding:0;position:relative;text-align:left;-webkit-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.ymaps3x0--button:disabled{cursor:default}.ymaps3x0--button:disabled>:first-child{opacity:.5}.ymaps3x0--control-button{background-color:#fff;border-radius:8px;box-sizing:border-box;display:block;padding:8px}.ymaps3x0--control-button__dark{background-color:#111;color:#ccc}",""]);const a=r},87392:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--control{box-sizing:border-box;pointer-events:all}.ymaps3x0--control__background{background-color:#fff;border-radius:8px;box-shadow:0 2px 6px 0 #0003}.ymaps3x0--control__dark{background-color:#111;color:#ccc}.ymaps3x0--controls_vertical>.ymaps3x0--control{margin-bottom:8px}.ymaps3x0--controls_horizontal>.ymaps3x0--control{margin-right:8px}.ymaps3x0--controls_vertical>.ymaps3x0--control:last-child{margin-bottom:0}.ymaps3x0--controls_horizontal>.ymaps3x0--control:last-child{margin-right:0}",""]);const a=r},79550:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--controls{box-sizing:border-box;display:flex;padding:12px;pointer-events:none;position:absolute;z-index:1000}.ymaps3x0--controls_vertical{flex-direction:column}.ymaps3x0--controls_horizontal{flex-direction:row}.ymaps3x0--controls_top{align-items:flex-start;top:0}.ymaps3x0--controls_left{align-items:flex-start;left:0}.ymaps3x0--controls_bottom{align-items:flex-end;bottom:0}.ymaps3x0--controls_right{align-items:flex-end;right:0}.ymaps3x0--controls_left.ymaps3x0--controls_center,.ymaps3x0--controls_right.ymaps3x0--controls_center{height:100%;justify-content:center;top:0}.ymaps3x0--controls_bottom.ymaps3x0--controls_center,.ymaps3x0--controls_top.ymaps3x0--controls_center{justify-content:center;left:0;width:100%}.ymaps3x0--controls_bottom.ymaps3x0--controls_left.ymaps3x0--controls_vertical,.ymaps3x0--controls_top.ymaps3x0--controls_left.ymaps3x0--controls_vertical{align-items:flex-start}.ymaps3x0--controls_bottom.ymaps3x0--controls_right.ymaps3x0--controls_vertical,.ymaps3x0--controls_top.ymaps3x0--controls_right.ymaps3x0--controls_vertical{align-items:flex-end}",""]);const a=r},61046:(t,e,i)=>{i.d(e,{Z:()=>f});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n),a=i(61667),h=i.n(a),l=new URL(i(72841),i.b),c=new URL(i(84026),i.b),d=new URL(i(36728),i.b),u=new URL(i(7717),i.b),_=r()(s()),p=h()(l),m=h()(c),g=h()(d),y=h()(u);_.push([t.id,".ymaps3x0--icon-logo-en-black{background:url("+p+") 50%/cover no-repeat}.ymaps3x0--icon-logo-en-white{background:url("+m+") 50%/cover no-repeat}.ymaps3x0--icon-logo-ru-black{background:url("+g+") 50%/cover no-repeat}.ymaps3x0--icon-logo-ru-white{background:url("+y+") 50%/cover no-repeat}",""]);const f=_},45340:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--map-copyrights{align-items:center;box-sizing:border-box;display:flex;justify-content:flex-end;margin:10px;position:absolute}.ymaps3x0--map-copyrights_top{top:0}.ymaps3x0--map-copyrights_bottom{bottom:0}.ymaps3x0--map-copyrights_right{right:0}.ymaps3x0--map-copyrights_left{left:0}.ymaps3x0--map-copyrights__container{background-color:#ffffffbf;border-radius:3px;box-sizing:border-box;color:#000;font:11px/14px Verdana,Arial,sans-serif;padding:0 4px 1px;white-space:nowrap}.ymaps3x0--map-copyrights__dark-container{background-color:#000000bf;color:#ccc}.ymaps3x0--map-copyrights__text{box-sizing:border-box;margin-right:5px}.ymaps3x0--map-copyrights__text:empty{display:none}.ymaps3x0--map-copyrights__user-agreements{box-sizing:border-box;color:inherit;text-decoration:underline}.ymaps3x0--map-copyrights__logo{box-sizing:border-box;flex:0 0 auto;margin-left:5px}.ymaps3x0--map-copyrights__scale{position:absolute}.ymaps3x0--map-copyrights_right>.ymaps3x0--map-copyrights__scale{right:0}.ymaps3x0--map-copyrights_left>.ymaps3x0--map-copyrights__scale{left:0}",""]);const a=r},9194:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--map-scale_label{text-wrap:nowrap;background-color:var(--label-background-color);border-radius:4px;color:var(--label-color);font-size:10px;padding:2px 4px;text-align:center}.ymaps3x0--map-scale_line{align-items:center;background-color:var(--label-color);border:2px solid var(--line-border-color);border-radius:4px;box-sizing:border-box;display:flex;height:6px;justify-content:center;width:100%}",""]);const a=r},51872:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(8081),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([t.id,".ymaps3x0--map-scale{--label-color:#000;--label-background-color:#fff;--line-border-color:#ffffffe5;--line-background-color:#4d4d4d;display:inline-block}.ymaps3x0--map-scale__dark{--label-color:#ccc;--label-background-color:#212326;--line-border-color:#212326e5;--line-background-color:#ccc;display:inline-block}",""]);const a=r},23645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",o=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),o&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),o&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,o,s,n){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(o)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(r[h]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);o&&r[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),e.push(c))}},e}},61667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},93379:t=>{var e=[];function i(t){for(var i=-1,o=0;o<e.length;o++)if(e[o].identifier===t){i=o;break}return i}function o(t,o){for(var n={},r=[],a=0;a<t.length;a++){var h=t[a],l=o.base?h[0]+o.base:h[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=i(d),_={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==u)e[u].references++,e[u].updater(_);else{var p=s(_,o);o.byIndex=a,e.splice(a,0,{identifier:d,updater:p,references:1})}r.push(d)}return r}function s(t,e){var i=e.domAPI(e);i.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var n=o(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<n.length;r++){var a=i(n[r]);e[a].references--}for(var h=o(t,s),l=0;l<n.length;l++){var c=i(n[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}n=h}}},90569:t=>{var e={};t.exports=function(t,i){var o=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(i)}},19216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var o="";i.supports&&(o+="@supports (".concat(i.supports,") {")),i.media&&(o+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(o+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),o+=i.css,s&&(o+="}"),i.media&&(o+="}"),i.supports&&(o+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},44589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},81703:(t,e,i)=>{function o(t){return Boolean(t)&&t instanceof DOMException&&"AbortError"===t.name}function s(t="Aborted"){return new DOMException(t,"AbortError")}i.d(e,{D:()=>o,o:()=>s})},34548:(t,e,i)=>{i.d(e,{q:()=>C,z:()=>o});var o,s=i(35185),n=i(92830),r=i(33106),a=i(38038),h=i(16145),l=i(81703),c=i(46900),d=i(89964),u=i(54142),_=i(46603),p=i(27284),m=i(86607);function g(t,e){return t.status=e,t}!function(t){t[t.QUEUED=0]="QUEUED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ANIMATING=3]="ANIMATING",t[t.READY=4]="READY",t[t.EMPTY=5]="EMPTY",t[t.REMOVED=6]="REMOVED"}(o||(o={}));let y=0;function f(){return y=(y+1)%10,y}class C extends((0,s.GA)().with()){get id(){return this.EB4__id}getTiles(){return Array.from(this.A20__currentTiles.entries()).map((([t,e])=>({id:t,state:Object.assign({},e.state),status:e.status,get cookie(){return e.cookie},set cookie(t){e.cookie=t}})))}B4D__setState(t){this.AC8__state=t}get state(){return this.AC8__state}get needsRender(){return 0!==this._loadedTiles.size||this.C5E__haveTilesToAnimate}constructor(t,e){super(),this.ECA__props=t,this.FD3__logger=e,this.cookie=null,this.A20__currentTiles=new Map,this.AC8__state={visible:!0,scalingDistanceY:0,scalingDistanceZ:0,translate:[0,0,0],zIndex:0},this.B29__renderedOffset={x:0,y:0},this.FF2__renderedScale=0,this.FD1__renderedAzimuth=0,this.FEF__renderedTilt=0,this._loadedTiles=new Set,this.C5E__haveTilesToAnimate=!1,this.A69__tileBounds=[n.jQ,n.jQ,n.jQ,n.jQ],this.readyState={tilesLoaded:0,tilesTotal:0,tilesReady:0,borderLoaded:0,borderReady:0,borderTotal:0},this.B33_createTile=t=>{const e=this.ADC_computeScreenCoordinatesForTile(t),i=this.FDD_computeTilePriority(t);let s={opacity:0,position:e,content:null};const n={id:f(),status:o.QUEUED,info:t,screenX:Math.round(e.x),screenY:Math.round(e.y),animate:this.ECA__props.getTileRevealDuration()>0&&(!this.EBC__firstScreen||this.ECA__props.animateFirstScreen),renderState:{opacity:0},animationStartTs:0,image:null,get state(){return s},setState(t){s=t},destroy:()=>{},cookie:null},r=this.ECA__props.processingQueue.enqueue((t=>this.EAE_loadTile(n,t)),i);return r.promise.then((t=>{var e;r.abortController.signal.aborted||this.A1F_onTileLoad(t),t.status===o.EMPTY&&(null===(e=this.FD3__logger)||void 0===e||e.error({group:"raster-tiles",message:"failed to load"}))})).catch((t=>{(0,l.D)(t)||(0,u._y)(t)})),Object.assign(n,r),n},this.A24_updateTile=(t,e)=>{t.info=e;const i=this.ADC_computeScreenCoordinatesForTile(t.info);t.status===o.QUEUED&&t.updatePriority(this.FDD_computeTilePriority(t.info)),t.screenX===i.x&&t.screenY===i.y||(t.screenX=i.x,t.screenY=i.y,t.status!==o.ANIMATING&&t.status!==o.READY||t.setState(Object.assign(Object.assign({},t.state),{position:i})))},this.A1F_onTileLoad=t=>{t.status===o.LOADED?(this._loadedTiles.add(t),this._emit("requestRender")):t.status===o.EMPTY&&this._countReadyTile(t)},this.C78__size=t.size,this.C76__fov=t.fov,this.C6B__tilt=t.tilt,this.B4C__azimuth=t.azimuth,this.FEC__tileSize=t.tileSize,this.AC1__scale=t.scale,this.zoom=t.zoom,this.A14__visibleCenter=t.visibleCenter,this.FE5__fetchedCenter=t.visibleCenter,this.D95__fetched=!1,this.EBC__firstScreen=!0,this.EB4__id=f()}destroy(){this.A20__currentTiles.forEach(this._removeTile.bind(this))}resize(t){this.D95__fetched=!1,this.C78__size=t,this.reposition(_._.FULL)}update(t,e,i,o,s){this.A14__visibleCenter=a.B.computePixelPerfectWorldCoordinates(t,this.zoom,(0,c.x)(),o),this.B4C__azimuth=e,this.C6B__tilt=i,this.AC1__scale=o,this.C76__fov=s}setVisibility(t){this.B4D__setState(Object.assign(Object.assign({},this.state),{visible:t}))}freeze(){this._loadedTiles.clear();const t=new Map(this.A20__currentTiles);t.forEach(((e,i)=>{e.status<=o.LOADED&&(t.delete(i),this._removeTile(e))})),this.A20__currentTiles=t}unfreeze(){this.D95__fetched=!1}reposition(t){ymaps3.strictMode&&(0,p.h)(!this.ECA__props.worldOptions.cycledY,"Y-cycled projections are not supported");const e=n.lu(this.FE5__fetchedCenter,this.A14__visibleCenter),i=this.ECA__props.worldOptions.cycledX?a.B.moveCloseToCenter(this.FE5__fetchedCenter,this.A14__visibleCenter,e):e,o=a.B.worldToRelativePixels(i,this.zoom);if(t>=_._.FULL&&n.G7(o,Math.round,o),t!==_._.FULL&&n.wy(o,this.B29__renderedOffset)&&this.FF2__renderedScale===this.AC1__scale&&this.FD1__renderedAzimuth===this.B4C__azimuth&&this.FEF__renderedTilt===this.C6B__tilt)return;this.FF2__renderedScale=this.AC1__scale,this.FD1__renderedAzimuth=this.B4C__azimuth,this.FEF__renderedTilt=this.C6B__tilt;const s=t===_._.QUICK?n.jQ:this._computeContainerSubpixelOffset((0,c.x)());this.B29__renderedOffset=n.lu(o,s,o);const r=(0,m.Os)(this.C78__size.y,this.C76__fov),h=r-r/this.AC1__scale,l=h*Math.sin(this.C6B__tilt),d=h*Math.cos(this.C6B__tilt);this.B4D__setState(Object.assign(Object.assign({},this.AC8__state),{scalingDistanceY:l,scalingDistanceZ:d,translate:[this.B29__renderedOffset.x,this.B29__renderedOffset.y,0]}))}render({qualityHint:t,time:e}){const i=(0,d.ZR)(a.B.worldToPixels(this.A14__visibleCenter,this.zoom),this.B4C__azimuth,this.C78__size,this.AC1__scale,this.FEC__tileSize);this.D95__fetched&&!(0,d.jl)(i,this.A69__tileBounds)||this.EBF_fetch(),this.EBF_fetch(),this.reposition(t),this.ECA__props.shouldAwaitAllTiles()&&this.readyState.tilesLoaded!==this.readyState.tilesTotal||(this.DA1_attachLoadedTiles(e),this.C75_revealNewTiles(e))}finishTileAnimations(){this.C5E__haveTilesToAnimate&&(this.A20__currentTiles.forEach((t=>{t.status===o.ANIMATING&&(t.setState(Object.assign(Object.assign({},t.state),{opacity:1})),this._countReadyTile(g(t,o.READY)))})),this.C5E__haveTilesToAnimate=!1)}_computeContainerSubpixelOffset(t){var e,i,o;return null!==(o=null===(i=null===(e=this.ECA__props)||void 0===e?void 0:e.getContainerSubpixelOffset)||void 0===i?void 0:i.call(e,t))&&void 0!==o?o:{x:0,y:0}}setZIndex(t){this.B4D__setState(Object.assign(Object.assign({},this.AC8__state),{zIndex:t}))}EBF_fetch(){const{x:t}=n.lu(this.FE5__fetchedCenter,this.A14__visibleCenter);this.FE5__fetchedCenter=this.A14__visibleCenter;const e=a.B.worldToPixels(this.FE5__fetchedCenter,this.zoom);this.B31__centralTilePoint=n.IH(n.ZO(e,this.FEC__tileSize),{x:-.5,y:-.5});const{tiles:i,tileBounds:o}=(0,d.YC)(this.A14__visibleCenter,this.B4C__azimuth,this.C6B__tilt,this.zoom,this.AC1__scale,this.C78__size,this.FEC__tileSize);this.A69__tileBounds=o;const s=(0,d.Su)(this.zoom,this.FEC__tileSize);let r=this.A20__currentTiles;const l=t>1;(l||t<-1)&&(r=new Map,this.A20__currentTiles.forEach((t=>{const{x:e,y:i}=t.info,o=l?-s:s;r.set((0,d.vD)({x:e+o,y:i},this.zoom),t)})));const c=(0,h.B)(r,i,this.B33_createTile,this._removeTile.bind(this),this.A24_updateTile);this.A20__currentTiles=c.result;this.A13_updateReadyState()&&this.C56_emitReadyStateChanged(),this.D95__fetched=!0,this.EBC__firstScreen=!1}_removeTile(t){var e;t.status!==o.QUEUED&&t.status!==o.LOADING||t.abortController.abort(),t.status===o.LOADED&&this._loadedTiles.delete(t),g(t,o.REMOVED),null===(e=t.destroy)||void 0===e||e.call(t)}EAE_loadTile(t,e){const i=g(t,o.LOADING),s=(0,c.x)(),n=this.ECA__props.fetchTile(i.info.x,i.info.y,this.zoom,s,e);if(!n){const t=g(i,o.EMPTY);return this._countReadyTile(t),Promise.resolve(t)}return"string"==typeof n?this.FE1_loadTileByUrl(i,n,e):this.EBE_loadTileByPromise(i,n,e)}EBE_loadTileByPromise(t,e,i){return e.then((e=>{if(i.aborted)throw(0,l.o)();const s=g(t,o.LOADED);return"function"==typeof e.destroy&&(s.destroy=e.destroy),s.setState(Object.assign(Object.assign({},s.state),{content:e})),this.FD7_countLoadedTile(s),s})).catch((e=>{if(i.aborted)throw(0,l.o)();(0,u.H)(e);const s=g(t,o.EMPTY);return this._countReadyTile(s),s}))}FE1_loadTileByUrl(t,e,i){const s=new r.BH,n=new Image,a=e=>{if(n.onerror=null,n.onload=null,i.removeEventListener("abort",h),0===e){const e=g(t,o.LOADED);e.setState(Object.assign(Object.assign({},e.state),{content:{image:n}})),s.resolve(e),this.FD7_countLoadedTile(e)}else if(1===e){const e=g(t,o.EMPTY);s.resolve(e),this._countReadyTile(e)}else 2===e&&(n.src="",s.reject((0,l.o)()))},h=a.bind(null,2);i.addEventListener("abort",h);const c=a.bind(null,0),d=a.bind(null,1);return n.decode?(n.src=e,n.decode().then(c,d)):(n.onload=c,n.onerror=d,n.src=e),s.promise}DA1_attachLoadedTiles(t){0!==this._loadedTiles.size&&(this._loadedTiles.forEach((e=>{if(e.setState(Object.assign(Object.assign({},e.state),{position:{x:e.screenX,y:e.screenY},opacity:e.animate?0:1})),e.animate){g(e,o.ANIMATING).animationStartTs=t}else this._countReadyTile(g(e,o.READY))})),this._loadedTiles.clear())}C75_revealNewTiles(t){this.C5E__haveTilesToAnimate=!1,this.A20__currentTiles.forEach((e=>{if(e.status!==o.ANIMATING)return;const i=this.ECA__props.getTileRevealDuration(),s=i>0?Math.min(1,(t-e.animationStartTs)/i):1;e.setState(Object.assign(Object.assign({},e.state),{opacity:s})),s<1?this.C5E__haveTilesToAnimate=!0:this._countReadyTile(g(e,o.READY))})),this.C5E__haveTilesToAnimate?this._emit("requestRender"):this.ECA__props.releaseAwaitAllTilesTrigger()}FD7_countLoadedTile(t){t.info.border?this.readyState.borderLoaded++:this.readyState.tilesLoaded++,this.C56_emitReadyStateChanged()}_countReadyTile(t){t.info.border?this.readyState.borderReady++:this.readyState.tilesReady++,this.C56_emitReadyStateChanged()}C56_emitReadyStateChanged(){this.readyState=Object.assign({},this.readyState),this._emit("readyStateChanged")}A13_updateReadyState(){const t={borderTotal:0,borderLoaded:0,borderReady:0,tilesTotal:0,tilesReady:0,tilesLoaded:0};this.A20__currentTiles.forEach((e=>{e.info.border?t.borderTotal++:t.tilesTotal++,e.status!==o.LOADED&&e.status!==o.ANIMATING&&e.status!==o.READY||(e.info.border?t.borderLoaded++:t.tilesLoaded++),e.status===o.READY&&(e.info.border?t.borderReady++:t.tilesReady++)}));const e=t.borderTotal!==this.readyState.borderTotal||t.borderLoaded!==this.readyState.borderLoaded||t.borderReady!==this.readyState.borderReady||t.tilesTotal!==this.readyState.tilesTotal||t.tilesReady!==this.readyState.tilesReady||t.tilesLoaded!==this.readyState.tilesLoaded;return e&&(this.readyState=t),e}FDD_computeTilePriority(t){return(t.border?Number.MAX_SAFE_INTEGER/2:0)+(e=t,i=this.B31__centralTilePoint,Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2));var e,i}ADC_computeScreenCoordinatesForTile(t){const e=a.B.worldToPixels(this.A14__visibleCenter,this.zoom),i=n.Sm(t,this.FEC__tileSize),o=n.IH(n.lu(i,e),n.ZO(this.C78__size,2));return n.G7(o,Math.round)}}},24733:(t,e,i)=>{i.d(e,{a:()=>p});var o=i(33106),s=i(38038),n=i(87459),r=i(35185),a=i(92830);var h=i(27027),l=i(46603),c=i(34548),d=i(57032);const u={min:0,max:22},_=Object.freeze({tileSize:256,zoomRange:u,fov:h.d$,processingQueue:new o.$7(o.fv),animateFirstScreen:!1,zoomRoundingRule:Math.round});class p extends((0,r.GA)().with()){computeState(){return{tileSize:this.FEC__tileSize,layers:[this.A42__layer,...this.D8E__deprecatedLayers].map((t=>({id:t.id,tiles:t.getTiles(),state:Object.assign({},t.state),zoom:t.zoom,set cookie(e){t.cookie=e},get cookie(){return t.cookie}})))}}constructor(t,e){var i,o,s,n,r,a,l;super(),this.FD3__logger=e,this.EAC__needsRender=!0,this.D82__awaitAllTilesTrigger=!1,this.D8E__deprecatedLayers=[],this.C72_onForegroundTileReady=()=>{(this.A42__layer.readyState.tilesReady===this.A42__layer.readyState.tilesTotal||this.B40__transparent&&this.A42__layer.readyState.tilesLoaded>0)&&this.B37_cleanUpDeprecatedLayers(),this._emit("readyStateChanged")},this.EA4_shouldAwaitAllTiles=()=>this.D82__awaitAllTilesTrigger,this.A14_releaseAwaitAllTilesTrigger=()=>{this.D82__awaitAllTilesTrigger=!1,this.EB5__oldDataSourceLayer&&(this.EB5__oldDataSourceLayer.destroy(),this.EB5__oldDataSourceLayer=void 0)},this.A18_getTileRevealDuration=()=>this._tileRevealDuration;const c=Object.assign({},t);for(const[t,e]of Object.entries(_))null!==(i=(l=c)[t])&&void 0!==i||(l[t]=e);this.ECA__props=c,this.C76__fov=null!==(o=t.fov)&&void 0!==o?o:h.d$,this.DA1__camera=t.camera,this.C78__size=t.size,this.A27__zoomRange=null!==(s=t.zoomRange)&&void 0!==s?s:u,this.C67__zoomRoundingRule=null!==(n=t.zoomRoundingRule)&&void 0!==n?n:Math.round,this.B3D__fetchTile=t.fetchTile,this.FEC__tileSize=null!==(r=t.tileSize)&&void 0!==r?r:d.SF,this.B40__transparent=Boolean(t.transparent),this.EA4__awaitAllTilesOnFirstDisplay=Boolean(t.awaitAllTilesOnFirstDisplay),this.EB1__tileRevealDuration=null!==(a=t.tileRevealDuration)&&void 0!==a?a:0,this.D82__awaitAllTilesTrigger=this.EA4__awaitAllTilesOnFirstDisplay,this.C63__roundZoom=this.C67__zoomRoundingRule(t.camera.zoom),this.D7C_createLayerForCurrentZoom(Boolean(t.animateFirstScreen)),this.B4A__inZoomRange=!0}get readyState(){return this.A42__layer.readyState}get _tileRevealDuration(){var t;return null!==(t=this.EB1__tileRevealDuration)&&void 0!==t?t:0}destroy(){this.A42__layer.destroy(),this.B37_cleanUpDeprecatedLayers()}EA4_updateCameraAndFov(t,e){var i,o;this.C76__fov===e&&this.DA1__camera===t||(this.EAC__needsRender=!0,i=this.DA1__camera,o=t,a.pU(i.worldCenter,o.worldCenter)&&i.zoom===o.zoom&&i.azimuth===o.azimuth&&i.tilt===o.tilt||this.A14_releaseAwaitAllTilesTrigger(),this.DA1__camera=t,this.C76__fov=e,this.C63__roundZoom=this.C67__zoomRoundingRule(t.zoom),this.C63__roundZoom!==this.A42__layer.zoom&&this.A42__layer.freeze())}C64_resize(t){if(!(0,a.wy)(this.C78__size,t)){this.EAC__needsRender=!0,this.C78__size=t,this.A42__layer.resize(t);for(const e of this.D8E__deprecatedLayers)e.resize(t)}}update(t){var e,i,o;void 0===t.fetchTile&&void 0===t.tileSize||this.D81_updateFetchTileOrTileSize(t.fetchTile,t.tileSize),void 0===t.camera&&void 0===t.fov||this.EA4_updateCameraAndFov(null!==(e=t.camera)&&void 0!==e?e:this.DA1__camera,null!==(o=null!==(i=t.fov)&&void 0!==i?i:this.C76__fov)&&void 0!==o?o:h.d$),void 0!==t.size&&this.C64_resize(t.size),void 0!==t.tileRevealDuration&&(this.EB1__tileRevealDuration=t.tileRevealDuration),void 0!==t.transparent&&(this.B40__transparent=t.transparent),void 0!==t.awaitAllTilesOnFirstDisplay&&(this.EA4__awaitAllTilesOnFirstDisplay=t.awaitAllTilesOnFirstDisplay,this.D82__awaitAllTilesTrigger=Boolean(t.awaitAllTilesOnFirstDisplay)),void 0!==t.zoomRange&&(this.A27__zoomRange=t.zoomRange)}D81_updateFetchTileOrTileSize(t,e){this.D82__awaitAllTilesTrigger=Boolean(this.ECA__props.awaitAllTilesOnFirstDisplay),this.B3D__fetchTile=null!=t?t:this.B3D__fetchTile,this.FEC__tileSize=null!=e?e:this.FEC__tileSize,t&&this.D82__awaitAllTilesTrigger?this.EB5__oldDataSourceLayer||(this.EB5__oldDataSourceLayer=this.A42__layer,this.EB5__oldDataSourceLayer.freeze()):this.A42__layer.destroy(),this.B37_cleanUpDeprecatedLayers(),this.D7C_createLayerForCurrentZoom(!0),this._emit("requestRender")}render(t={}){var e,i;const o=null!==(e=t.qualityHint)&&void 0!==e?e:l._.FULL,s=null!==(i=t.time)&&void 0!==i?i:Date.now();if(!this.EAC__needsRender&&!this.A42__layer.needsRender&&o!==l._.FULL)return this.computeState();if(this.D95_checkZoomInZoomRange())this.B4A__inZoomRange||(this.A42__layer.unfreeze(),this.A42__layer.setVisibility(!0),this.B4A__inZoomRange=!0);else{if(!this.B4A__inZoomRange)return this.computeState();this.A42__layer.freeze(),this.A42__layer.setVisibility(!1),this.B37_cleanUpDeprecatedLayers(),this.B4A__inZoomRange=!1}this.EAC__needsRender=!1,o===l._.FULL&&this.C63__roundZoom!==this.A42__layer.zoom&&(this.B30__layerEventGroup.offAll(),Math.abs(this.A42__layer.zoom-this.C63__roundZoom)>3?this.A42__layer.destroy():this.D8E__deprecatedLayers.push(this.A42__layer),this.D7C_createLayerForCurrentZoom(!0));for(const t of this.D8E__deprecatedLayers)this.FE1__updateLayer(t),t.reposition(o),t.finishTileAnimations();return this.FE1__updateLayer(this.A42__layer),this.C63__roundZoom===this.A42__layer.zoom?this.A42__layer.render({time:s,qualityHint:o}):this.A42__layer.reposition(o),this.DA2_sortLayers(),this.computeState()}FE1__updateLayer(t){const e=s.B.getScale(t.zoom,this.DA1__camera.zoom);t.update(this.DA1__camera.worldCenter,this.DA1__camera.azimuth,this.DA1__camera.tilt,e,this.C76__fov)}D95_checkZoomInZoomRange(){return this.C63__roundZoom>=this.A27__zoomRange.min&&this.C63__roundZoom<=this.A27__zoomRange.max}B37_cleanUpDeprecatedLayers(){for(const t of this.D8E__deprecatedLayers)t.destroy();this.D8E__deprecatedLayers=[]}D7C_createLayerForCurrentZoom(t){let e=this.D8E__deprecatedLayers.find((t=>t.zoom===this.C63__roundZoom));if(e)this.D8E__deprecatedLayers.splice(this.D8E__deprecatedLayers.indexOf(e),1),e.unfreeze();else{const i=this.DA1__camera,o=(0,n.q)(this.C67__zoomRoundingRule(i.zoom),this.A27__zoomRange.min,this.A27__zoomRange.max),r=s.B.getScale(o,i.zoom);e=new c.q({tileSize:this.FEC__tileSize,visibleCenter:i.worldCenter,worldOptions:this.ECA__props.worldOptions,scale:r,azimuth:i.azimuth,tilt:i.tilt,fov:this.C76__fov,zoom:o,size:this.C78__size,animateFirstScreen:t,processingQueue:this.ECA__props.processingQueue,shouldAwaitAllTiles:this.EA4_shouldAwaitAllTiles,releaseAwaitAllTilesTrigger:this.A14_releaseAwaitAllTilesTrigger,getTileRevealDuration:this.A18_getTileRevealDuration,getContainerSubpixelOffset:this.ECA__props.getContainerSubpixelOffset,fetchTile:this.B3D__fetchTile},this.FD3__logger)}this.A42__layer=e,this.B30__layerEventGroup=this.A42__layer.on("readyStateChanged",this.C72_onForegroundTileReady).on("requestRender",(()=>this._emit("requestRender")))}DA2_sortLayers(){const t=Math.round(this.DA1__camera.zoom),e=[this.A42__layer,...this.D8E__deprecatedLayers],i=e.reduce(((t,{zoom:e})=>Math.max(e,t)),-1/0);for(const o of e)t===o.zoom?o.setZIndex(i):t>o.zoom?o.setZIndex(o.zoom-t):o.setZIndex(i-o.zoom)}}},27284:(t,e,i)=>{i.d(e,{h:()=>s});class o extends Error{constructor(t){super(t),this.name="AssertionError"}}function s(t,e){if("boolean"==typeof t&&!t||"function"==typeof t&&!t())throw new o(`Assertion failed: ${e}`)}},39559:(t,e,i)=>{function o(t){const e=document.createElement("ymaps");return t&&(e.className=t),e}i.d(e,{E:()=>o})},48244:(t,e,i)=>{i.d(e,{N:()=>s,T:()=>n});const o="stylers";function s(t){return!Array.isArray(t)}function n(t){if(!t)return"";const e=s(t)?t.style:t,i=[];s(t)&&"off"===t["render-3d"]&&i.push("render-3d:off");const o=e.map((t=>r(t).join("|"))).join("~");return o&&i.push(o),i.join("@")}function r(t,e=[]){const i=[],s=function(t){return JSON.parse(JSON.stringify(t))}(t),n=e[e.length-1];return s&&"object"==typeof s?Array.isArray(s)&&n===o?s.forEach((t=>i.push(...r(t,[...e])))):Array.isArray(s)?i.push(`${e.join(".")}:${s.join(";")}`):(n===o&&"zoom"in s&&(e.splice(-1,1,`${o}[${[].concat(s.zoom).join("-")}]`),delete s.zoom),Object.entries(s).forEach((([t,o])=>i.push(...r(o,[...e,t]))))):i.push(`${e.join(".")}:${String(s).replace(/^#/,"")}`),i}},57032:(t,e,i)=>{i.d(e,{SF:()=>o,Sv:()=>s,wo:()=>r,zw:()=>n});const o=256,s=130,n=32,r=t=>{if("tile"===t.type){const e=Object.assign({},t);return t.raster&&(e.raster=Object.assign({},t.raster)),t.vector&&(e.vector=Object.assign({},t.vector)),e}return Object.assign({},t)}},44192:(t,e,i)=>{i.d(e,{FA:()=>r,c2:()=>n,fd:()=>a,il:()=>h});var o=i(27284);const s=Symbol("EventEmitter"),n=Symbol("EventEmitter.MixinConstructor"),r=Symbol("EventEmitter.MixinPrototype");class a{constructor(){}static[n](t){t.C67_eventListenersHash={}}static[r](t){t[s]=a.prototype[s],t.group=a.prototype.group,t.on=a.prototype.on,t.offSingle=a.prototype.offSingle,t._emit=a.prototype._emit}on(t,e){return this.group().on(t,e)}offSingle(t,e){const i=this.C67_eventListenersHash[t];i&&i.delete(e)}group(){return new a.B46_eventGroupImpl(this)}_emit(t,...e){const i=this.C67_eventListenersHash[t];let o;if(i){const t=[];i.forEach((e=>t.push(e)));for(const i of t){const t=i(e[0]);void 0!==t&&(o=t)}}return o}}function h(t){return Boolean(t&&t[s])}a.B46_eventGroupImpl=class{constructor(t){this.FEB_listeners=[],this.B33_emitter=t}on(t,e){const i=this.B33_emitter.C67_eventListenersHash[t];return i?(ymaps3.strictMode&&(0,o.h)(!i.has(e),"Duplicate event handler"),i.add(e)):(this.B33_emitter.C67_eventListenersHash[t]=new Set,this.B33_emitter.C67_eventListenersHash[t].add(e)),this.FEB_listeners.push([t,e]),this}offAll(){for(const[t,e]of this.FEB_listeners)this.B33_emitter.C67_eventListenersHash[t].delete(e);this.FEB_listeners=[]}},a.prototype[s]=!0},35185:(t,e,i)=>{i.d(e,{GA:()=>n});var o=i(44192);class s{}const n=(t=s)=>({with(){if((0,o.il)(t.prototype))return t;const e=class extends t{constructor(...t){super(...t),o.fd[o.c2](this)}};return o.fd[o.FA](e.prototype),e}})},65036:(t,e,i)=>{i.d(e,{$7:()=>r,Cr:()=>s,JO:()=>a,ZE:()=>n});var o=i(54142);function s(t,e){return Object.assign(Object.assign({},t),{geometry:t.geometry&&n(t.geometry,e)})}function n(t,e){switch(t.type){case"Point":return Object.assign(Object.assign({},t),{coordinates:e(t.coordinates)});case"LineString":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map(e)});case"MultiLineString":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map((t=>t.map(e)))});case"Polygon":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map((t=>t.map(e)))});case"MultiPolygon":return Object.assign(Object.assign({},t),{coordinates:t.coordinates.map((t=>t.map((t=>t.map(e)))))});default:(0,o._y)(new Error(`Unexpected geometry type: ${t.type}`))}}function r(t){return"FeatureCollection"===t.type?[].concat(...t.features.map((t=>r(t)))):[t]}function a(t){"string"!=typeof t.id&&(0,o._y)(new Error("Feature or collection id must be a string"))}},11779:(t,e,i)=>{i.d(e,{m5:()=>p,oR:()=>_,uT:()=>m});var o=i(65036),s=i(27284);const n={width:1,opacity:1,color:"rgb(0,102,255)",palette:[],simplifyPalette:!0,dash:[]},r={url:"No icon url provided",offset:[0,0],scale:1},a={zIndex:0,opacity:1};function h(t){const e=Object.assign(Object.assign({},n),t);return Object.assign(Object.assign({},e),{dash:[...e.dash],paletteColors:[]})}function l(t,e){const i=e.stroke||[n];0===i.length&&i.push(Object.assign(Object.assign({},n),{width:0}));const{stroke:o,paletteColorStops:s}="LineString"===t.type?function(t,e){const i=t.coordinates.length-1,o=[],s=[],n=new Set,r=[];for(const t of e){const{palette:e}=t,a=h(t);if(s.push(a),!e||0===e.length)continue;const l=new Map;let c=0;for(let t=0;t<e.length;t++){const{count:o,color:s}=e[t];l.set(c,s),c+=o;const a=t===e.length-1||c>i;if(!a&&s===e[t+1].color)continue;const h=a?i:c;if(n.has(h)||(n.add(h),r.push(h)),a)break}o.push({stopsColors:l,paletteColors:a.paletteColors})}r.sort(((t,e)=>t-e));for(const{stopsColors:t,paletteColors:e}of o){e.push(t.get(0));for(let i=0;i<r.length-1;i++){const o=t.get(r[i]);e.push("string"==typeof o?o:e[e.length-1])}}return{paletteColorStops:r,stroke:s}}(t,i):{paletteColorStops:[],stroke:i.map(h)};return{zIndex:c(e.zIndex,0),fill:e.fill||"rgb(0,102,255)",fillOpacity:c(e.fillOpacity,.6),fillRule:e.fillRule||"evenodd",stroke:o,paletteColorStops:s,cursor:e.cursor||"inherit",interactive:c(e.interactive,!0),simplificationRate:c(e.simplificationRate,2),icon:Object.assign(Object.assign({},r),e.icon),element:e.element}}function c(t,e){return void 0!==t?t:e}function d(t){return Object.assign(Object.assign({},a),t)}var u=i(35185);const _="__root__";class p extends((0,u.GA)().with()){constructor(){super(),this.B44_features=new Map,this.D95_groups=new Map([[_,{type:"group",id:_,style:d({}),children:[],parentGroupId:null}]]),this.adhocEnabledExtraWorldCopies=!1}get features(){return this.B44_features}forEachFeatureElement(t){this.B44_features.forEach((e=>m(e)&&t(e)))}get groups(){return this.D95_groups}addGroup(t,e,i){ymaps3.strictMode&&(0,s.h)(!this.D95_groups.has(t),`Data source already have group "${t}"`);const o={type:"group",id:t,style:d(e),children:[],parentGroupId:i};this.A18_addChild(i,o),this.D95_groups.set(t,o),this._emit("groupAdded",t),this._emit("changed")}removeGroupAndChildren(t){if(ymaps3.strictMode&&(0,s.h)(t!==_,"Cant remove root group"),!this.D95_groups.has(t))return;const e=this.D95_groups.get(t),i=[e],o=[];for(;i.length>0;){const t=i.pop();o.push(t);for(const e of t.children)"feature"===e.type?(this.B44_features.delete(e.id),o.push(e)):i.push(e);this.D95_groups.delete(t.id)}e.parentGroupId&&this.B4C_removeChild(e.parentGroupId,e),this._emit("groupRemoved",{id:t,removed:o}),this._emit("changed")}addFeature(t,e,i,n){(0,o.JO)(t),ymaps3.strictMode&&(0,s.h)(!this.B44_features.has(t.id),`Feature "${t.id}" does exist`);const r={type:"feature",id:t.id,feature:t,style:l(t.geometry,e),bbox:i,parentGroupId:n};this.A18_addChild(n,r),this.B44_features.set(r.id,r),this._emit("featureAdded",r.id),this._emit("changed")}removeFeatureById(t){if(!this.B44_features.has(t))return;const e=this.B44_features.get(t);e.parentGroupId&&this.B4C_removeChild(e.parentGroupId,e),this.B44_features.delete(t),this._emit("featureRemoved",t),this._emit("changed")}updateFeature(t,e,i){ymaps3.strictMode&&(0,s.h)(this.B44_features.has(t.id),`Feature "${t.id}" does exist`);const o=this.B44_features.get(t.id),n=this.B44_features.get(t.id).parentGroupId,r=i?l(t.geometry,i):o.style,a={type:"feature",id:t.id,feature:t,style:r,bbox:e,parentGroupId:n};ymaps3.strictMode&&(0,s.h)(this.D95_groups.has(n),`Group with id "${n}" does not exists`);const h=this.D95_groups.get(n),c=h.children.indexOf(o);ymaps3.strictMode&&(0,s.h)(-1!==c,`Group "${h.id}" does not contain node "${a.id}"`),h.children[c]=a,this.B44_features.set(a.id,a),this._emit("featureUpdated",a.id),this._emit("changed")}hasFeatureWithId(t){return this.B44_features.has(t)}getFeatureById(t){var e;return null!==(e=this.B44_features.get(t))&&void 0!==e?e:null}moveFeatureToGroup(t,e){ymaps3.strictMode&&(0,s.h)(this.B44_features.has(t),`Feature "${t}" does not exist`),ymaps3.strictMode&&(0,s.h)(this.D95_groups.has(e),`Group "${e}" does not exist`);const i=this.B44_features.get(t);i.parentGroupId!==e&&(this.B4C_removeChild(i.parentGroupId,i),this.A18_addChild(e,i),i.parentGroupId=e,this._emit("featureMovedToGroup",t),this._emit("changed"))}A18_addChild(t,e){ymaps3.strictMode&&(0,s.h)(this.D95_groups.has(t),`Group "${t}" does not exist`);this.D95_groups.get(t).children.push(e)}B4C_removeChild(t,e){ymaps3.strictMode&&(0,s.h)(this.D95_groups.has(t),`Group "${t}" does not exist`);const i=this.D95_groups.get(t),o=i.children.indexOf(e);ymaps3.strictMode&&(0,s.h)(-1!==o,`Group "${i.id}" does not contain node "${e.id}"`),i.children.splice(o,1)}}function m(t){return"Point"===t.feature.geometry.type&&Boolean(t.style.element)}},46184:(t,e,i)=>{i.d(e,{u:()=>o});const o="__ymaps3YandexInternalHotspotFeatureProperitesExternals"},54142:(t,e,i)=>{i.d(e,{H:()=>a,_y:()=>l,vp:()=>h});var o=i(81703),s=i(89061);let n,r;function a(t){t&&"object"==typeof t||(t=new Error(t||"empty")),function(t){const e=t.logged,i=/fetch|network/i.test(t.message);return!(e||(0,o.D)(t)||i)}(t)&&(s.kg.error(t),n?(n({additional:t.additionalInfo},t),t.logged=!0):window.console.error(t))}function h(t,e,i){s.kg.error(t),r&&r({block:e,additional:i},t)}function l(t){throw a(t),t}},72466:(t,e,i)=>{i.d(e,{Z:()=>o,j:()=>s});const o=Math.PI/180,s=180/Math.PI},79375:(t,e,i)=>{function o(t,e){const{x:i,y:o}=e;let s=t.length-1,n=!1;for(let e=0;e<t.length;e++){const r=t[e].y<=o&&t[s].y>o||t[s].y<=o&&t[e].y>o,a=i>(t[s].x-t[e].x)*(o-t[e].y)/(t[s].y-t[e].y)+t[e].x;r&&a&&(n=!n),s=e}return n}function s(t,e){for(let i=1;i<t.length;i++)if(o(t[i],e))return!1;return o(t[0],e)}function n(t,e){if("Point"===t.type)return!1;if("LineString"===t.type)return!1;if("Polygon"===t.type)return s(t.coordinates,e);if("MultiPolygon"===t.type){for(const i of t.coordinates)if(s(i,e))return!0;return!1}return!1}i.d(e,{R:()=>n,u:()=>o})},87459:(t,e,i)=>{function o(t,e,i){return t-Math.floor((t-e)/(i-e))*(i-e)}function s(t,e,i){return Math.max(Math.min(t,i),e)}i.d(e,{d:()=>o,q:()=>s})},92830:(t,e,i)=>{i.d(e,{AK:()=>y,DG:()=>g,Fv:()=>p,G7:()=>d,IH:()=>n,Kt:()=>f,PV:()=>h,Sm:()=>a,U1:()=>A,Ue:()=>s,WT:()=>l,ZO:()=>c,jQ:()=>o,kE:()=>m,lu:()=>r,pU:()=>u,wy:()=>_});const o=s(0,0);function s(t,e){return{x:t,y:e}}function n(t,e,i=s(0,0)){return i.x=t.x+e.x,i.y=t.y+e.y,i}function r(t,e,i=s(0,0)){return i.x=t.x-e.x,i.y=t.y-e.y,i}function a(t,e,i=s(0,0)){return i.x=t.x*e,i.y=t.y*e,i}function h(t,e,i=s(0,0)){return i.x=t.x*e.x,i.y=t.y*e.y,i}function l(t,e,i=s(0,0)){return i.x=t.x/e.x,i.y=t.y/e.y,i}function c(t,e,i=s(0,0)){return i.x=t.x/e,i.y=t.y/e,i}function d(t,e,i=s(0,0)){return i.x=e(t.x,1),i.y=e(t.y,2),i}function u(t,e,i=1e-6){const o=r(t,e);return-i<o.x&&o.x<i&&-i<o.y&&o.y<i}function _(t,e){return t.x===e.x&&t.y===e.y}function p(t,e=s(0,0)){return c(t,m(t),e)}function m(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function g(t){return Math.pow(t.x,2)+Math.pow(t.y,2)}function y(t,e){return t.x*e.x+t.y*e.y}function f(t,e=s(0,0)){return e.x=t.reduce(((t,e)=>t+e.x),0)/t.length,e.y=t.reduce(((t,e)=>t+e.y),0)/t.length,e}const{cos:C,sin:E}=Math;function A(t,e,i=s(0,0)){const{x:o,y:n}=t,r=C(e),a=E(e);return i.x=r*o-a*n,i.y=a*o+r*n,i}},23771:(t,e,i)=>{i.d(e,{m:()=>s});var o=i(35185);class s extends((0,o.GA)().with()){}},33106:(t,e,i)=>{i.d(e,{$7:()=>a,BH:()=>n,fv:()=>r});var o=i(81703),s=i(54142);class n{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=t=>{t&&(0,s.H)(t),e(t)}}))}}const r=20;class a{constructor(t){this.D8B_queue=[],this.D8A_processing=[],this.A11_paused=!1,this.B51_changed=!1,this.D7D_onTaskAbort=(t,e)=>{const i=this.D8A_processing.indexOf(t);if(-1!==i)this.D8A_processing.splice(i,1);else{const i=this.D8B_queue.indexOf(t);-1!==i&&this.D8B_queue.splice(i,1),e.reject((0,o.o)())}},this.B4E_maxConcurrency=t}enqueue(t,e=0){const i=new AbortController,o=new n,s={task:t,abortController:i,process:()=>t(i.signal).then(o.resolve,o.reject),priority:e};return i.signal.addEventListener("abort",(()=>this.D7D_onTaskAbort(s,o))),this.D8B_queue.push(s),this.B51_changed=!0,this.A11_paused||this.D8D_process(),{abortController:i,promise:o.promise,updatePriority:()=>{s.priority=e,this.B51_changed=!0}}}pause(){this.A11_paused=!0}resume(){this.A11_paused=!1,this.D8D_process()}D8D_process(){if(this.D8A_processing.length>=this.B4E_maxConcurrency)return;this.B51_changed&&this.D8B_queue.sort(((t,e)=>t.priority-e.priority));const t=this.D8B_queue.splice(0,this.B4E_maxConcurrency-this.D8A_processing.length);this.D8A_processing.push(...t);for(const e of t)e.process().finally((()=>{const t=this.D8A_processing.indexOf(e);-1!==t&&this.D8A_processing.splice(t,1),this.D8D_process()}))}}},46603:(t,e,i)=>{i.d(e,{_:()=>o,d:()=>a});var o,s=i(35185),n=i(33106),r=i(54142);!function(t){t[t.QUICK=1]="QUICK",t[t.INTERMEDIATE=2]="INTERMEDIATE",t[t.FULL=3]="FULL"}(o||(o={}));class a extends((0,s.GA)().with()){constructor(){super(),this.AE9_rafId=0,this.C77_animationsCounter=0,this.C77_framesSinceIntermediateRendering=0,this.EBE_renderFrame=()=>{this.AE9_rafId=0,this.C71_updateIsRequested=!1;const t=Date.now();try{this._emit("beforeRender",t);const e=this.B49_getQualityForCurrentFrame();this._emit("render",{time:t,qualityHint:e}),this._emit("afterRender",t)}catch(t){t&&"object"==typeof t&&this.A5E_lastTriggerStack&&(t.additionalInfo=this.A5E_lastTriggerStack),(0,r._y)(t)}this.EC2_isRunning&&this.C6D_requestFrame()},this.C71_updateIsRequested=!1,this.EC2_isRunning=!1}get isActive(){return this.EC2_isRunning}start(){this.EC2_isRunning=!0,this.C6D_requestFrame(),this.A5E_lastTriggerStack=(new Error).stack}stop(){this.EC2_isRunning&&(this.EC2_isRunning=!1,this.C71_updateIsRequested||this.AEA_cancelFrame(),this.A5E_lastTriggerStack=void 0)}renderImmediately(t){const e=Date.now();this.AE9_rafId&&(cancelAnimationFrame(this.AE9_rafId),this.AE9_rafId=0),this.C71_updateIsRequested=!1,this._emit("beforeRender",e),this._emit("render",{time:e,qualityHint:t}),this._emit("afterRender",e)}update(){this.EC2_isRunning||(this.A5E_lastTriggerStack=(new Error).stack),this.C71_updateIsRequested=!0,this.C6D_requestFrame()}destroy(){this.AEA_cancelFrame()}animate(t){0===this.C77_animationsCounter&&this.start(),this.C77_animationsCounter++;let e=!0;const i=this.on("beforeRender",(o=>{e?t(o):(i.offAll(),this.C77_animationsCounter--,0===this.C77_animationsCounter&&this.stop())})),o=new n.BH;return{complete:o.promise,get isRunning(){return e},stop:()=>{e?(e=!1,o.resolve()):console.warn("Trying to stop animation twice")}}}animateForDuration(t,e){let i=-1;const o=this.animate((s=>{if(i<0)return void(i=s);const n=(s-i)/e;n<1?t(n):(t(1),o.stop())}));return o}C6D_requestFrame(){this.AE9_rafId||(this.AE9_rafId=requestAnimationFrame(this.EBE_renderFrame))}AEA_cancelFrame(){cancelAnimationFrame(this.AE9_rafId),this.AE9_rafId=0}B49_getQualityForCurrentFrame(){return this.EC2_isRunning?this.C77_framesSinceIntermediateRendering<12?(this.C77_framesSinceIntermediateRendering++,o.QUICK):(this.C77_framesSinceIntermediateRendering=1,o.INTERMEDIATE):(this.C77_framesSinceIntermediateRendering=0,o.FULL)}}},1239:(t,e,i)=>{function o(t,e){return t===e?null:{old:t,new:e}}i.d(e,{Nt:()=>l,PP:()=>d,B5:()=>c});var s=i(57032),n=i(36733),r=i(89964),a=i(35185),h=i(27284);class l extends((0,a.GA)().with()){constructor(t,e,i){super(),this.C72_logger=i,this.A1A_makeFields=(t,e)=>({tileSize:(null==e?void 0:e.size)||s.SF,transparent:Boolean(null==e?void 0:e.transparent),clampMapZoom:Boolean(t.clampMapZoom),zoomRange:t.zoomRange||(0,n.oF)(),fetchHotspots:null==e?void 0:e.fetchHotspots,hotspotAbortRadius:(null==e?void 0:e.hotspotAbortRadius)||s.Sv,vectorHotspots:t.vector&&t.vector.hotspots||{}}),this.setSource(t),this.worldOptions=e}get logger(){return this.C72_logger}get rasterSourceDescription(){return this.B34_source.raster}get vectorSourceDescription(){return this.B34_source.vector}get vectorHotspots(){return this.FEB_fields.vectorHotspots}get zoomRange(){return this.FEB_fields.zoomRange}get clampMapZoom(){return this.FEB_fields.clampMapZoom}get transparent(){return this.FEB_fields.transparent}get tileSize(){return this.FEB_fields.tileSize}get fetchHotspots(){return this.FEB_fields.fetchHotspots}get hotspotAbortRadius(){return this.FEB_fields.hotspotAbortRadius}getHotspotTileDataSource(){return this.A86_rasterSource.fetchHotspots?{fetchHotspots:this.A86_rasterSource.fetchHotspots,hotspotAbortRadius:this.A86_rasterSource.hotspotAbortRadius||s.Sv,tileSize:this.A86_rasterSource.size||s.SF,inset:void 0===this.A86_rasterSource.hotspotInset?s.zw:this.A86_rasterSource.hotspotInset,padding:this.A86_rasterSource.hotspotPadding||0,zoomRange:this.zoomRange,internalFindHotspotInPosition:this.A86_rasterSource._internalFindHotspotInPosition}:null}setSource(t){var e;ymaps3.strictMode&&(0,h.h)(!this.B34_source||!this.vectorSourceDescription||Boolean(t.vector),"Can't remove vector source");const i=this.A1A_makeFields(t,t.raster),s=Object.assign(Object.assign({},function(t,e){const i={};for(const s of Object.keys(t))i[s]=o(t[s],e[s]);return i}(this.FEB_fields||{},i)),{fetchTile:o(this.A86_rasterSource&&this.A86_rasterSource.fetchTile,null===(e=t.raster)||void 0===e?void 0:e.fetchTile)});this.B34_source=t,this.FEB_fields=i,t.raster&&(this.A86_rasterSource=t.raster,this.EB9_fetchTile="string"==typeof this.A86_rasterSource.fetchTile?c(this.A86_rasterSource.fetchTile):this.A86_rasterSource.fetchTile),this._emit("changed"),this._emit("sourceChanged",s)}fetchRasterTile(t,e,i,o,s){if(!this.EB9_fetchTile)return null;const n=(0,r.Su)(i,this.tileSize);if(!(0,r.v0)({x:t,y:e},n,this.worldOptions))return null;const a=(0,r.Rf)({x:t,y:e},n);return a?this.EB9_fetchTile(a.x,a.y,i,o,s):null}}function c(t){return function(e,i,o,s){return t.replace("{{x}}",String(e)).replace("{{y}}",String(i)).replace("{{z}}",String(o)).replace("{{scale}}",String(s)).replace(/\{\{d\|(\d+)\}\}/,((t,s)=>{const n=(e+i+o)%Number(s)+1;return String(n)}))}}function d(t,e){return t.fetchHotspots===e.fetchHotspots&&t.hotspotAbortRadius===e.hotspotAbortRadius&&t.tileSize===e.tileSize}},89964:(t,e,i)=>{i.d(e,{Rf:()=>_,Su:()=>m,TG:()=>l,YC:()=>d,ZR:()=>c,jl:()=>u,v0:()=>p,vD:()=>g});var o=i(38038),s=i(92830),n=i(87459),r=i(79375),a=i(9587),h=i(54142);function l(t,e,i,o){const n=s.ZO(e,2*i),r=s.lu(t,n);s.ZO(r,o,r),s.G7(r,Math.floor,r);const a=s.IH(t,n);return s.ZO(a,o,a),s.G7(a,Math.floor,a),{minX:r.x,minY:r.y,maxX:a.x,maxY:a.y}}function c(t,e,i,o,n){const r=s.ZO(i,2*o);return[{x:r.x,y:r.y},{x:r.x,y:-r.y},{x:-r.x,y:-r.y},{x:-r.x,y:r.y}].map((t=>s.U1(t,-e))).map((e=>s.lu(t,e))).map((t=>s.ZO(t,n)))}function d(t,e,i,n,r,l,c){const d={worldCenter:t,zoom:Math.log2(Math.pow(2,n)*r),azimuth:e,tilt:i},u=function(t,e,i,n,r){const{worldCenter:l,tilt:c,azimuth:d,zoom:u}=e,_=o.B.convertPixelSizeToWorldSize(i,u),p={x:0,y:0,z:.5*-_.y/Math.tan(.5*t)};a.lM(p,c,p),a.jI(p,d,p),a.IH(p,Object.assign(Object.assign({},l),{z:0}),p);const m=Math.tan(.5*t),g=i.x/i.y,f=a.Ue(m*g,m,1),C=[a.JG(a.jQ),a.JG(a.jQ),a.JG(a.jQ),a.JG(a.jQ)],E=a.Ue(0,0,0),A={origin:p,direction:E};for(let t=0;t<4;++t){a.PV(y[t],f,E),a.lM(E,c,E),a.jI(E,d,E);a.ek(a.XY,A,C[t])||(0,h._y)(new Error("Visible quadrilateral is unbounded, engine can't handle that case (yet)"))}return C.map((t=>{const e=o.B.worldToPixels(t,n);return s.ZO(e,r)}))}(Math.PI/6,d,l,n,c),_=function(t){let e=1/0,i=-1/0;const o=[];for(let s=0,n=1;s<t.length;++s,n=++n%t.length){const[n,r]=[t[s],t[(s+1)%t.length]].sort(((t,e)=>t.y-e.y)),a=Math.floor(n.y),h=Math.ceil(r.y);e=Math.min(e,a),i=Math.max(i,h);const l=(r.x-n.x)/(r.y-n.y),c=n.x-(isFinite(l)?l*(n.y-a):0);o.push({firstRow:a,lastRow:h,startX:n.x,endX:r.x,x:c,k:l})}const s=[];for(let t=e;t<i;t++){let e=1/0,i=-1/0;for(const s of o){if(t<s.firstRow||t>=s.lastRow)continue;const o=s.x+s.k,n=s.k>=0?Math.max(s.x,s.startX):Math.min(s.x,s.startX),r=s.k>=0?Math.min(o,s.endX):Math.max(o,s.endX);e=Math.floor(Math.min(e,n,r)),i=Math.ceil(Math.max(i,n,r)),s.x=o}for(let o=e;o<i;o++)s.push({x:o,y:t})}return s}(u),p=new Map;return _.forEach((t=>p.set(g(t,n),Object.assign(Object.assign({},t),{border:!1})))),{tiles:p,tileBounds:u}}function u(t,e){return t.every((t=>(0,r.u)(e,t)))}function _(t,e){return{x:(0,n.d)(t.x,0,e),y:(0,n.d)(t.y,0,e)}}function p({x:t,y:e},i,o){return(o.cycledX||t<i&&t>=0)&&(o.cycledY||e<i&&e>=0)}function m(t,e){return Math.ceil(Math.pow(2,t+8)/e)}function g(t,e){return`${t.x}.${t.y}.${e}`}const y=[a.Ue(-1,1,-1),a.Ue(1,1,-1),a.Ue(1,-1,-1),a.Ue(-1,-1,-1)]},61497:(t,e,i)=>{i.d(e,{N:()=>s});var o=i(35185);class s extends((0,o.GA)().with()){constructor(t){super(),this.EA4_tiles=new Map,this.EA4_tileTexturesTiers=new Map,this.setSource(t)}get priority(){return this.B34_source.priority}get workerUrl(){return this.B34_source.workerUrl}get theme(){return this.B34_source.theme}get rootTiles(){return this.EA4_tiles}setSource(t){this.B34_source=t,this._emit("changed")}addRootTile(t){if(!this.EA4_tiles.has(t.id)){const e=Object.assign({},t);this.EA4_tiles.set(e.id,e),this._emit("rootTileAdded",e)}}replaceRootTile(t){if(this.EA4_tiles.has(t.id)){const e=Object.assign({},t);this.EA4_tiles.set(e.id,e),this._emit("rootTileReplaced",e)}}removeRootTile(t){this.EA4_tiles.delete(t)&&this._emit("rootTileRemoved",t)}showRootTile(t){this.B3F_setHidden(t,!1),this._emit("rootTileShown",t)}hideRootTile(t){this.B3F_setHidden(t,!0),this._emit("rootTileHidden",t)}getRootTileTexturesTiers(t){return this.EA4_tileTexturesTiers.get(t)||[]}changeRootTileTextures(t,e){this._emit("rootTileTexturesChanged",{id:t,tier:e})}setRootTileTexturesTiers(t,e){e?this.EA4_tileTexturesTiers.set(t,e):this.EA4_tileTexturesTiers.delete(t)}B3F_setHidden(t,e){const i=this.EA4_tiles.get(t);i&&(i.isHidden=e)}}},38178:(t,e,i)=>{function o(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}i.d(e,{R:()=>o})},71363:(t,e,i)=>{i.d(e,{_:()=>r});var o=i(92830);const s=1e-12;function n(t,e,i,n){const r=e.y-t.y,a=t.x-e.x,h=r*t.x+a*t.y,l=n.y-i.y,c=i.x-n.x,d=l*i.x+c*i.y,u=r*c-l*a;if(Math.abs(u)<s)return null;const _=(c*h-a*d)/u,p=(d*r-h*l)/u;return o.Ue(_,p)}function r(t,e,i=!1){return function(t,e,i){let o=t,s=[],r=e[e.length-1];for(const t of e){let e=o[i?o.length-1:0];for(const i of o){const o=a(r,t,e);if(a(r,t,i)){if(!o){const o=n(r,t,e,i);if(null===o)continue;s.push(o)}s.push(i)}else if(o){const o=n(r,t,e,i);if(null===o)continue;s.push(o)}e=i}o=s,s=[],r=t}return o}(t,e,i)}function a(t,e,i){return(e.x-t.x)*(i.y-t.y)>(e.y-t.y)*(i.x-t.x)}},46900:(t,e,i)=>{i.d(e,{x:()=>s});var o=i(87459);function s(){return(0,o.q)(devicePixelRatio,1,3)}},16145:(t,e,i)=>{function o(t,e,i,o=(()=>{}),s=(()=>{}),n=(()=>!0),r=(()=>!0)){const a=new Map,h=[],l=[],c=[];function d(t,e){o(t,e),c.push(t)}return e.forEach(((e,o)=>{let c=t.get(o);if(c&&n(c,e)?(s(c,e),l.push(c)):c&&r(c,e)&&(d(c,o),c=void 0),!c){const t=i(e);h.push(t),c=t}a.set(o,c)})),t.forEach(((t,i)=>{e.has(i)||d(t,i)})),{result:a,created:h,updated:l,removed:c}}i.d(e,{B:()=>o})},1944:(t,e,i)=>{function o(t,e){if(t.length<3||e<=0)return[...t];const i=[];return i.push(t[0]),s(t,i,0,t.length-1,Math.pow(e,2)),i.push(t[t.length-1]),i}function s(t,e,i,o,n){const r=t[i],a=t[o],h=a.x-r.x,l=a.y-r.y,c=Math.pow(h,2)+Math.pow(l,2);let d=0,u=0,_=-1/0,p=-1;for(let e=i+1;e<o;e++){d=t[e].x-r.x,u=t[e].y-r.y;const i=c>0?(h*d+l*u)/c:0;let o=0;if(i>1)o=Math.pow(t[e].x-a.x,2)+Math.pow(t[e].y-a.y,2);else if(i>0){const s=r.x+h*i,n=r.y+l*i;o=Math.pow(t[e].x-s,2)+Math.pow(t[e].y-n,2)}else o=Math.pow(d,2)+Math.pow(u,2);o>_&&(_=o,p=e)}_>n&&(s(t,e,i,p,n),e.push(t[p]),s(t,e,p,o,n))}i.d(e,{p:()=>o})},27294:(t,e,i)=>{i.d(e,{FB:()=>c,b1:()=>d,ic:()=>u,jU:()=>l,n$:()=>r});const o={windows:/Windows/,macos:/Macintosh/,ios:/iPad|iPod|iPhone/},s={firefox:/Firefox/,chrome:/Chrome/},n=new Map;function r(t,e){let i=(null==e?void 0:e.withoutCache)?void 0:n.get(t);return void 0===i&&(i=new RegExp(o[t],"i").test(navigator.userAgent),n.set(t,i)),i}const a=/(\d+)/,h=new Map;function l(t,e){let i=(null==e?void 0:e.withoutCache)?void 0:h.get(t);if(void 0===i){const e=new RegExp(`${s[t].source}/${a.source}`,"i").exec(navigator.userAgent);i=!!e&&Number(e[1]),h.set(t,i)}return!!i&&(!(null==e?void 0:e.gte)||i>=(null==e?void 0:e.gte))}function c(){const t=r("ios"),e=l("firefox")&&r("windows");return!t&&!e&&"PointerEvent"in window}function d(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function u(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},86607:(t,e,i)=>{i.d(e,{Os:()=>C,wm:()=>y,XA:()=>m,k6:()=>f,Rv:()=>g});var o=i(92830),s=i(9587);const n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=16;function a(){return new Array(r)}function h(t,e=a()){for(let i=0;i<r;++i)e[i]=t[i];return e}function l(t,e,i=a()){for(let o=0;o<r;o+=4){const s=t[o],n=t[o+1],r=t[o+2],a=t[o+3];for(let t=0;t<4;++t)i[o+t]=s*e[t]+n*e[4+t]+r*e[8+t]+a*e[12+t]}return i}const c=h(n);function d(t,e,i,o,n=a()){const r=s.lu(e,i);s.Fv(r,r);const h=s.kC(o,r);s.Fv(h,h);const d=s.kC(r,h);return c[0]=h.x,c[1]=d.x,c[2]=r.x,c[4]=h.y,c[5]=d.y,c[6]=r.y,c[8]=h.z,c[9]=d.z,c[10]=r.z,c[12]=-s.AK(h,e),c[13]=-s.AK(d,e),c[14]=-s.AK(r,e),l(t,c,n)}function u(t,e,i=s.Ue(0,0,0)){const o=t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15],n=(t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12])/o,r=(t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13])/o,a=(t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14])/o;return i.x=n,i.y=r,i.z=a,i}var _=i(38038),p=i(54142);function m(t,e){const i=e.container.getBoundingClientRect();return y({x:t.x-i.left,y:t.y-i.top},e)}function g(t,e){const i=f(t,e),s=e.container.getBoundingClientRect();return o.IH(i,{x:s.left,y:s.top},i),i}function y(t,{size:e,zoom:i,worldCenter:o,azimuth:n,tilt:r,fov:a}){const h=Math.tan(.5*a),l={x:0,y:0,z:C(-_.B.convertPixelSizeToWorldSize(e,i).y,a)};s.lM(l,r,l),s.jI(l,n,l),s.IH(l,Object.assign(Object.assign({},o),{z:0}),l);const c=e.x/e.y,d=s.Ue(h*c,h,1),u={x:2*(t.x-e.x/2)/e.x,y:2*(e.y/2-t.y)/e.y,z:-1};s.PV(u,d,u),s.lM(u,r,u),s.jI(u,n,u);const m=s.ek(s.XY,{origin:l,direction:u});return m||(0,p._y)(new Error("Pointer above the horizon.")),m}function f(t,{size:e,zoom:i,worldCenter:c,azimuth:p,tilt:m,fov:g}){const y=Object.assign(Object.assign({},t),{z:t.z||0}),f=_.B.convertPixelSizeToWorldSize(e,i),E=o.ZO(f,2),A=C(-f.y,g),v={x:0,y:0,z:A};s.lM(v,m,v),s.jI(v,p,v),s.IH(v,Object.assign(Object.assign({},c),{z:0}),v);const M=d(n,v,Object.assign(Object.assign({},c),{z:0}),s.jI({x:0,y:1,z:0},p));if(m>0||y.z>0){const t=-E.y*Math.sin(m),i=-t-A,o=t-A,s=E.x/-E.y,c=function(t,e,i,o,s,n=a()){const h=1/Math.tan(.5*e),l=h/i,c=(o+s)/(o-s),d=2*o*s/(o-s);for(let e=0;e<r;e+=4){n[e]=t[e]*l,n[e+1]=t[e+1]*h;const i=t[e+2],o=t[e+3];n[e+2]=i*c+o*d,n[e+3]=-i}return n}(h(n),g,s,i,o);return c[0]=c[0]*e.x/2,c[5]=c[5]*(-e.y/2),c[8]=-e.x/2,c[9]=-e.y/2,u(l(M,c),y)}const D=u(M,y),x=o.IH(D,E);return _.B.worldToRelativePixels(x,i)}function C(t,e){return.5*t/Math.tan(.5*e)}},9587:(t,e,i)=>{function o(t,e,i){return{x:t,y:e,z:i}}i.d(e,{AK:()=>c,Fv:()=>l,IH:()=>r,JG:()=>n,PV:()=>h,Ue:()=>o,XY:()=>p,ek:()=>m,jI:()=>_,jQ:()=>s,kC:()=>d,lM:()=>u,lu:()=>a});const s=o(0,0,0);function n(t,e=o(0,0,0)){return e.x=t.x,e.y=t.y,e.z=t.z,e}function r(t,e,i=o(0,0,0)){return i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i}function a(t,e,i=o(0,0,0)){return i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i}function h(t,e,i=o(0,0,0)){return i.x=t.x*e.x,i.y=t.y*e.y,i.z=t.z*e.z,i}function l(t,e=o(0,0,0)){return function(t,e,i=o(0,0,0)){return i.x=t.x/e,i.y=t.y/e,i.z=t.z/e,i}(t,function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2))}(t),e)}function c(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}function d(t,e,i=o(0,0,0)){const s=t.y*e.z-t.z*e.y,n=t.z*e.x-t.x*e.z,r=t.x*e.y-t.y*e.x;return i.x=s,i.y=n,i.z=r,i}function u(t,e,i=o(0,0,0)){const s=Math.cos(e),n=Math.sin(e),r=t.y;return i.x=t.x,i.y=r*s-t.z*n,i.z=r*n+t.z*s,i}function _(t,e,i=o(0,0,0)){const s=Math.cos(e),r=Math.sin(e);return t=t===i?n(t):t,i.x=t.x*s-t.y*r,i.y=t.x*r+t.y*s,i.z=t.z,i}const p={normal:o(0,0,1),distance:0};function m(t,e,i=o(0,0,0)){const s=c(e.direction,t.normal);if(0===s)return null;const a=(t.distance-c(t.normal,e.origin))/s;return a<0?null:(n(e.direction,i),function(t,e,i=o(0,0,0)){i.x=t.x*e,i.y=t.y*e,i.z=t.z*e}(i,a,i),r(i,e.origin,i),i)}},38038:(t,e,i)=>{i.d(e,{B:()=>r});var o=i(87459),s=i(92830);const n=256,r={getScale:(t,e)=>Math.pow(2,e-t),getWorldPixelSize:t=>Math.pow(2,t)*n,worldToPixels(t,e){const i=Math.pow(2,e)/2*n;return s.Sm({x:t.x+1,y:1-t.y},i)},worldToRelativePixels(t,e){const i=Math.pow(2,e)/2*n;return s.PV(t,{x:i,y:-i})},worldToTile(t,e,i){const o=r.worldToPixels(t,e);return s.ZO(o,i)},moveCloseToCenter(t,e,i){i=i||t;const{x:o}=s.lu(t,e);return Math.abs(o)>1?s.IH(i,{x:-2*Math.sign(o),y:0}):i},convertPixelSizeToWorldSize(t,e,i){const o=Math.pow(2,e)/2*n;return s.WT(t,{x:o,y:-o},i)},pixelsToWorld(t,e){const i=Math.pow(2,e)/2*n;return{x:t.x/i-1,y:1-t.y/i}},fitViewportToWorld(t,{zoom:e,worldOptions:i,size:o=s.jQ}){if(i.cycledX&&i.cycledY)return t;const n=r.convertPixelSizeToWorldSize(o,e);return{x:a(t.x,n.x,i.cycledX),y:a(t.y,-n.y,i.cycledY)}},restrictToZeroWorld(t,e){const i=Object.assign({},t);return e.cycledX&&(i.x=(0,o.d)(i.x,-1,1)),e.cycledY&&(i.y=(0,o.d)(i.y,-1,1)),i},computePixelPerfectWorldCoordinates(t,e,i,o=1,n={x:0,y:0,z:t.z}){const a=r.getWorldPixelSize(e)/2*o*i;return s.G7(t,(t=>Math.round(t*a)/a),n)}};function a(t,e,i){const s=e/2;return i?(0,o.d)(t,-1,1):(0,o.q)(t,Math.min(0,s-1),Math.max(0,1-s))}},36733:(t,e,i)=>{i.d(e,{Hx:()=>r,i3:()=>n,oF:()=>s});var o=i(54142);const s=()=>({min:0,max:21}),n=t=>{t.min>=t.max&&(0,o._y)(new Error(`Invalid zoom range, min >= max (${t.min} >= ${t.max})`)),(t.min<0||t.max<0)&&(0,o._y)(new Error(`Invalid zoom range, min or max is less than zero (min=${t.min} max=${t.max})`))},r=(t,e,i=s())=>(i.min=Math.max(t.min,e.min),i.max=Math.min(t.max,e.max),i)},27027:(t,e,i)=>{i.d(e,{YQ:()=>s,d$:()=>o,rK:()=>n});const o=30*i(72466).Z,s=1e-10,n=100},16300:(t,e,i)=>{i.d(e,{$:()=>a,Q:()=>_});var o=i(86607),s=i(54142);const n="none",r="any",a=Symbol("object"),h=Math.pow(15,2),l=Symbol(),c=["touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","click","dblclick","mouseup","mousedown","mouseenter","mouseleave","mousemove","contextmenu"],d=["mousedown","touchstart","pointerdown","contextmenu"],u=()=>{};class _{constructor(t,e){this.FD6_stopWaitingHotspots=u,this.A18_handlers={},this.EC1_activeObject=null,this.clickTimeout=300,this.waitHotspotsTimeout=1e3,this.A23_onEvent=t=>{if("dblclick"===t.type||this.EB7_map.isInAction)return;const e=t.target instanceof HTMLElement?this.EB7_map.findFeatureByElement(t.target):null;if((null==e?void 0:e.feature.blockEvents)&&!(null==e?void 0:e.feature.draggable))return;d.indexOf(t.type)>=0&&this.FD6_stopWaitingHotspots(!1);const i=(e=!1)=>{const i=e?"contextmenu":"click",o=e?"rightdblclick":"dblclick";if(void 0!==this.B35_clickTimer){window.clearTimeout(this.B35_clickTimer),this.B35_clickTimer=void 0;const e=p(t);s=this.A10_previousClickPosition,n=e,Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2)<h&&this.D91_processEvent(o,t)}else this.A10_previousClickPosition=p(t),this.B35_clickTimer=window.setTimeout((()=>{this.B35_clickTimer=void 0,this.EB7_map.isInAction||this.D96_waitHotspots(t).then((e=>{e&&!this.EB7_map.isInAction&&this.D91_processEvent(i,t)}))}),this.clickTimeout);var s,n};"click"===t.type?(this.D91_processEvent("fastclick",t),i()):"contextmenu"===t.type?i(!0):this.D91_processEvent(t.type,t)},this.D96_waitHotspots=t=>new Promise((e=>{const i=this.D87_computeAllCoordinates(t);if(!i)return void e(!1);const[,o]=i,s=()=>{const t=this.EB7_map.findObjectInWorldPositionEx(o).layers.find((t=>null!==t.object));t&&void 0===t.object||this.FD6_stopWaitingHotspots(!0)},n=window.setTimeout((()=>this.FD6_stopWaitingHotspots(!0)),this.waitHotspotsTimeout),r=this.EB7_map.on("hotspotsChanged",s);this.FD6_stopWaitingHotspots=t=>{window.clearTimeout(n),r.offAll(),e(t),this.FD6_stopWaitingHotspots=u},s()})).catch((t=>{(0,s._y)(t)})),this.D87_computeAllCoordinates=t=>{const e=p(t);if(!isFinite(e.x)||!isFinite(e.y))return null;const i=(0,o.XA)(e,this.EB7_map);return[e,i,this.EB7_map.projection.fromWorldCoordinates(i)]},this.D91_processEvent=(t,e)=>{if(e.target&&!this.EB7_map.container.contains(e.target))return;const i=this.D87_computeAllCoordinates(e);if(!i)return;const[o,s,a]=i;let h=this.EB7_map.findObjectInWorldPosition(s);this.A1D_eventObjectsFilter&&!this.A1D_eventObjectsFilter(h)&&(h=null);const c={coordinates:[a[0],a[1]],screenCoordinates:[o.x,o.y],details:{type:e.type,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey},[l]:!1,stopPropagation(){this[l]=!0}};if("mousemove"===e.type){h&&this.FD3_emitLayerEvent("mousemove",h,c,e);const t=this.EC1_activeObject;t&&h&&function(t,e){if(t.type!==e.type||t.layer!==e.layer)return!1;return"hotspot"===t.type&&t.feature.id===e.feature.id||"feature"===t.type&&t.feature.id===e.feature.id}(t,h)||(t&&this.FD3_emitLayerEvent("mouseleave",t,c,e),h&&this.FD3_emitLayerEvent("mouseenter",h,c,e)),this.EC1_activeObject=h}else h&&this.FD3_emitLayerEvent(t,h,c,e);h||(this.FEE_initHandlers(t,n),this.A18_handlers[t][n].forEach((t=>t(null,c,e))),this.FEE_initHandlers(t,r),this.A18_handlers[t][r].forEach((t=>t(null,c,e))))},this.FD3_emitLayerEvent=(t,e,i,o)=>{this.FEE_initHandlers(t,a),this.A18_handlers[t][a].forEach((t=>t(e,i,o))),i[l]||o.target&&!this.EB7_map.container.contains(o.target)||(this.FEE_initHandlers(t,e.layer),this.A18_handlers[t][e.layer].forEach((t=>t(e,i,o))),i[l]||o.target&&!this.EB7_map.container.contains(o.target)||(this.FEE_initHandlers(t,r),this.A18_handlers[t][r].forEach((t=>t(e,i,o)))))},this.FEE_initHandlers=(t,e)=>{this.A18_handlers[t]=this.A18_handlers[t]||{},this.A18_handlers[t][e]=this.A18_handlers[t][e]||[]},this.EB7_map=t,this.A1D_eventObjectsFilter=e,c.forEach((t=>this.EB7_map.container.addEventListener(t,this.A23_onEvent)))}destroy(){this.FD6_stopWaitingHotspots(!1),window.clearInterval(this.B35_clickTimer),c.forEach((t=>this.EB7_map.container.removeEventListener(t,this.A23_onEvent)))}on(t,e,i){this.FEE_initHandlers(t,e),this.A18_handlers[t][e].push(i)}off(t,e,i){this.FEE_initHandlers(t,e);const o=this.A18_handlers[t][e].indexOf(i);-1!==o&&this.A18_handlers[t][e].splice(o,1)}}function p(t){if("touches"in t){const e=t.touches[0]||t.changedTouches[0];return{x:e.clientX,y:e.clientY}}return{x:t.clientX,y:t.clientY}}},3488:(t,e,i)=>{i.d(e,{L:()=>r});var o=i(87459),s=i(72466);class n{constructor(t=6378137,e=.0818191908426){this.radius=t,this.e=e,this.EBF_e2=this.e*this.e,this.B2A_e4=this.EBF_e2*this.EBF_e2,this.D91_e6=this.B2A_e4*this.EBF_e2,this.A69_e8=this.B2A_e4*this.B2A_e4,this.A20_subradius=1/t,this.A18_d2=this.EBF_e2/2+5*this.B2A_e4/24+this.D91_e6/12+13*this.A69_e8/360,this.FD7_d4=7*this.B2A_e4/48+29*this.D91_e6/240+811*this.A69_e8/11520,this.FE4_d6=7*this.D91_e6/120+81*this.A69_e8/1120,this.C57_d8=4279*this.A69_e8/161280}mercatorToGeo(t){const e=this.xToLongitude(t.x),i=this.yToLatitude(t.y),o=void 0!==t.z?this.zToAltitude(t.z,i):void 0;return void 0!==o?[e,i,o]:[e,i]}geoToMercator(t){const e=3===t.length?t[2]:void 0;return{x:this.longitudeToX(t[0]),y:this.latitudeToY(t[1]),z:void 0!==e?this.altitudeToZ(e,t[1]):void 0}}xToLongitude(t){return s.j*(0,o.d)(t*this.A20_subradius,-Math.PI,Math.PI)}yToLatitude(t){const e=.5*Math.PI-2*Math.atan(1/Math.exp(t*this.A20_subradius)),i=e+this.A18_d2*Math.sin(2*e)+this.FD7_d4*Math.sin(4*e)+this.FE4_d6*Math.sin(6*e)+this.C57_d8*Math.sin(8*e);return s.j*i}zToAltitude(t,e){return t*Math.cos(s.Z*e)}longitudeToX(t){const e=(0,o.d)(s.Z*t,-Math.PI,Math.PI);return this.radius*e}latitudeToY(t){const e=s.Z*(0,o.q)(t,1e-10-90,90-1e-10),i=this.e*Math.sin(e),n=Math.tan(.25*Math.PI+.5*e)/Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(i)),this.e);return this.radius*Math.log(n)}altitudeToZ(t,e){return t/Math.cos(s.Z*e)}}const r=new class{constructor({radius:t,e,type:i}){this.C54_mercator=new n(t,e),this.B4A_halfEquator=Math.PI*this.C54_mercator.radius,this.type=i}toWorldCoordinates(t){const e=this.C54_mercator.geoToMercator(t);return{x:(this.B4A_halfEquator+e.x)/this.B4A_halfEquator-1,y:(0,o.q)(1-(this.B4A_halfEquator-e.y)/this.B4A_halfEquator,-1,1),z:void 0!==e.z?e.z/this.B4A_halfEquator:void 0}}fromWorldCoordinates(t){let e=this.C54_mercator.yToLatitude(this.B4A_halfEquator-(1-t.y)*this.B4A_halfEquator);e=(0,o.q)(e,-90,90);const i=s.j*(0,o.d)(Math.PI*t.x,-Math.PI,Math.PI),n=void 0!==t.z?t.z*this.B4A_halfEquator:void 0;return void 0!==n?[i,e,n]:[i,e]}}({type:"EPSG:3395"})},87228:(t,e,i)=>{i.d(e,{E:()=>l});var o=i(46184),s=i(81703),n=i(54142);class r extends Error{constructor(t,e){super(t),this.xhr=e}}var a=i(65036),h=i(1239);function l(t){const e=(0,h.B5)(t);return(t,i,o,h)=>function(t,e){if(e.aborted)return Promise.reject((0,s.o)());const i=new XMLHttpRequest;i.open("get",t,!0);const o=i.abort.bind(i);e.addEventListener("abort",o);const a=new Promise(((o,a)=>{i.onload=()=>{if(200===i.status)try{o(JSON.parse(i.responseText))}catch(t){(0,n.H)(t),a(t)}else 204===i.status?o(null):a(new Error(`Bad status code: ${i.status}`))},i.onerror=()=>{e.aborted?a((0,s.o)()):a(new r(`Error on GET to ${t}.`,i))},i.onabort=()=>a((0,s.o)())}));return i.send(),a.finally((()=>e.removeEventListener("abort",o)))}(e(t,i,o,1),h).then((t=>{if(!t||t.error&&404===t.error.code)return[];if(t.error)throw new Error(`Server sent an error (code = ${t.error.code}): ${t.error.message}`);return(0,a.$7)(t.data).map((t=>({type:"rendered",feature:c(t),geometry:(0,a.ZE)(t.properties.HotspotMetaData.RenderedGeometry,(([t,e])=>({x:t,y:e})))})))})).catch((t=>{if(t instanceof r&&0===t.xhr.status&&4===t.xhr.readyState)return[];(0,n._y)(t)}))}function c(t){const e=t.properties.URIMetaData;return{type:"Feature",id:String(t.properties.HotspotMetaData.id),geometry:t.geometry,properties:Object.assign(Object.assign({},t.properties),{uri:(e&&e.URIs[0]||{}).uri,[o.u]:d(t.properties)})}}function d(t){let e={};return t.id&&(e.id=t.id),t.name&&(e.name=t.name),t.hintContent&&(e.hint=t.hintContent),e}},70359:(t,e,i)=>{i.d(e,{x:()=>o});class o{constructor(t){this._props=t}_requestRender(){this._props.requestRender()}render(){}}},28400:(t,e,i)=>{i.d(e,{K:()=>a,e:()=>r});var o=i(35185),s=i(86607),n=i(27027);const r=Symbol("__hotspotCookieKey");class a extends((0,o.GA)().with()){constructor(t,e){super(),this._props=e,this.state={tilesLoaded:0,tilesReady:0,tilesTotal:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},this.C76__fov=n.d$,this.B46__customLayer=new t({requestRender:e.requestRender,size:e.size,element:e.element,camera:e.camera,worldOptions:e.worldOptions,projection:e.projection,options:e.options}),this.DA1__camera=e.camera,this.C78__size=e.size}destroy(){var t,e;null===(e=(t=this.B46__customLayer).destroy)||void 0===e||e.call(t)}findFeatureByElement(){return null}findObjectInPosition(t){var e,i;const o=this;let n=null===(i=(e=this.B46__customLayer).findObjectInPosition)||void 0===i?void 0:i.call(e,{worldCoordinates:t,get screenCoordinates(){return(0,s.Rv)(t,Object.assign(Object.assign({},o.DA1__camera),{fov:o.C76__fov,size:o.C78__size,container:o._props.element}))}});return function(t){return Boolean(t&&t[r])}(n)&&(n={type:"raw-hotspot",feature:{type:"Feature",id:n.id,geometry:n.geometry,cookie:n[r],properties:n.properties}}),null!=n?n:null}update(t,e){this.DA1__camera=t,this.C76__fov=e}resize(t){this.C78__size=t}render(t){this.B46__customLayer.render({size:this.C78__size,camera:Object.assign(Object.assign({},t.camera),{fov:this.C76__fov}),get worlds(){return t.worlds}})}}},90401:(t,e,i)=>{i.d(e,{K:()=>p});var o=i(89964),s=i(35185),n=i(79375),r=i(38038),a=i(65036),h=i(87459),l=i(92830),c=i(54142),d=i(46603),u=i(81703);const _=()=>{};class p extends((0,s.GA)().with()){constructor({size:t,camera:e,dataSource:i,worldOptions:o,processingQueue:s,zoomRoundingRule:n}){super(),this._newTiles=new Map,this._loadingTiles=new Map,this._readyTiles=new Map,this._size=t,this._camera=e,this.C5C_tileSource=i,this.B2F_zoomRoundingRule=n,this.B3D_worldOptions=o,this.D8B_queue=s}get state(){return{tilesLoaded:0,tilesReady:0,tilesTotal:0,borderTotal:0,borderLoaded:0,borderReady:0,graphicsTotal:0,graphicsReady:0}}destroy(){this._loadingTiles.forEach((t=>{t.abortController.abort()}))}preloadHotspotsInPoint(t){const e=this.B2F_zoomRoundingRule(this._camera.zoom),i=this.EC5_computeAffectedTiles(t,e);let s=!1;for(const t of i){const e=(0,o.vD)(t,t.zoom);this.EBF_isTileDataReadyOrLoading(e)||this._newTiles.has(e)||(this._newTiles.set(e,{id:t}),s=!0)}const n=this.C5A_stopLoadingTilesOutsideRadius(t);(s||n)&&this._emit("hotspotsChanged"),s&&this._emit("requestRender")}preloadHotspotsForViewport(){const t=this.EBA_getTilesForViewport().filter((t=>!this.EBF_isTileDataReadyOrLoading((0,o.vD)(t,t.zoom))));let e=!1;for(const i of t){const t=(0,o.vD)(i,i.zoom);this.EBF_isTileDataReadyOrLoading(t)||this._newTiles.has(t)||(this._newTiles.set(t,{id:i}),e=!0)}e&&(this._emit("hotspotsChanged"),this._emit("requestRender"))}resize(t){l.wy(t,this._size)||(this._size=t,this.B45_removeTilesOutsideViewport()&&this._emit("hotspotsChanged"))}update(t,e){const{worldCenter:i,zoom:o}=t;i===this._camera.worldCenter&&o===this._camera.zoom||(this._camera=t,this.B45_removeTilesOutsideViewport()&&this._emit("hotspotsChanged"))}render({qualityHint:t}){t<d._.FULL||this._camera.zoom<this.C5C_tileSource.zoomRange.min||this._camera.zoom>this.C5C_tileSource.zoomRange.max||(this._newTiles.forEach((t=>{const e=(0,o.vD)(t.id,t.id.zoom),i=this.EAE_loadTile(t);this._loadingTiles.set(e,i),i.promise.then((o=>{const s=o.map((e=>"world"===e.type?e:function(t,e,i){const o=l.Sm(e,i);return{type:"world",feature:t.feature,geometry:(0,a.ZE)(t.geometry,(t=>r.B.pixelsToWorld(l.IH(t,o),e.zoom)))}}(e,t.id,this.C5C_tileSource.tileSize))),n=this.B2F_zoomRoundingRule(this._camera.zoom),h=this.C5C_tileSource.padding/r.B.getWorldPixelSize(n),c=0===this.C5C_tileSource.padding?s:s.map((t=>Object.assign(Object.assign({},t),{geometry:g(t.geometry,h)})));this._readyTiles.set(e,{id:i.id,hotspots:c}),this._emit("hotspotsChanged")})).finally((()=>this._loadingTiles.delete(e))).catch((t=>{(0,u.D)(t)||(0,c._y)(t)}))})),this._newTiles.clear())}findObjectInPosition(t){var e,i;const s=r.B.restrictToZeroWorld(t,this.B3D_worldOptions),a=this.B2F_zoomRoundingRule(this._camera.zoom),h=this.EC5_computeAffectedTiles(s,a);let l=!0;for(const t of h){const e=this._readyTiles.get((0,o.vD)(t,a));if(e)for(let t=e.hotspots.length-1;t>=0;t--){const i=e.hotspots[t];if((0,n.R)(i.geometry,s))return{type:"raw-hotspot",feature:i.feature}}else l=!1}const c=null===(i=(e=this.C5C_tileSource).internalFindHotspotInPosition)||void 0===i?void 0:i.call(e,s,a);return c||(l?null:void 0)}findFeatureByElement(){return null}C5A_stopLoadingTilesOutsideRadius(t){const e=this.B2F_zoomRoundingRule(this._camera.zoom),i=l.ZO(r.B.worldToPixels(t,e),this.C5C_tileSource.tileSize),o=Math.max(this.C5C_tileSource.hotspotAbortRadius,this.C5C_tileSource.inset)/this.C5C_tileSource.tileSize,s=m(this._loadingTiles,(t=>function(t,e,i){const o=l.Ue((0,h.q)(e.x,t.x,t.x+1),(0,h.q)(e.y,t.y,t.y+1));return l.lu(o,e,o),l.DG(o)<=Math.pow(i,2)}(t.id,i,o)),(t=>t.abortController.abort()));return s}B45_removeTilesOutsideViewport(){const t=this.B2F_zoomRoundingRule(this._camera.zoom),e=r.B.getScale(t,this._camera.zoom),i=l.Ue(this._size.x+2*this.C5C_tileSource.inset,this._size.y+2*this.C5C_tileSource.inset),s=r.B.worldToPixels(this._camera.worldCenter,t),n=(0,o.TG)(s,i,e,this.C5C_tileSource.tileSize),a=({id:e})=>e.zoom===t&&e.x<=n.maxX&&e.x+1>=n.minX&&e.y<=n.maxY&&e.y+1>=n.minY,h=m(this._newTiles,a),c=m(this._loadingTiles,a,(t=>t.abortController.abort())),d=m(this._readyTiles,a);return h||c||d}EBF_isTileDataReadyOrLoading(t){return this._loadingTiles.has(t)||this._readyTiles.has(t)}EBA_getTilesForViewport(){const t=this.B2F_zoomRoundingRule(this._camera.zoom),e=r.B.getScale(t,this._camera.zoom),i=r.B.worldToPixels(this._camera.worldCenter,t),s=(0,o.TG)(i,this._size,e,this.C5C_tileSource.tileSize),n=[];for(let e=s.minX;e<=s.maxX;e++)for(let i=s.minY;i<=s.maxY;i++)n.push({x:e,y:i,zoom:t});return n}EAE_loadTile(t){const e=(0,o.Su)(t.id.zoom,this.C5C_tileSource.tileSize),i=l.G7(t.id,(t=>(0,h.d)(t,0,e))),{promise:s,abortController:n}=this.D8B_queue.enqueue((e=>{const o=this.C5C_tileSource.fetchHotspots;return!e.aborted&&o?Promise.resolve(o(i.x,i.y,t.id.zoom,e)).catch((t=>(0,c._y)(t))):Promise.resolve([])}));return{id:t.id,abortController:n,promise:s}}EC5_computeAffectedTiles(t,e){const i=r.B.worldToTile(t,e,this.C5C_tileSource.tileSize),o=l.G7(i,Math.floor),s=l.lu(i,o);l.Sm(s,this.C5C_tileSource.tileSize,s);const n=s.x<this.C5C_tileSource.inset,a=s.x>this.C5C_tileSource.tileSize-this.C5C_tileSource.inset,h=s.y<this.C5C_tileSource.inset,c=s.y>this.C5C_tileSource.tileSize-this.C5C_tileSource.inset,d=[{x:o.x,y:o.y,zoom:e}];return n&&d.push({x:o.x-1,y:o.y,zoom:e}),a&&d.push({x:o.x+1,y:o.y,zoom:e}),h&&d.push({x:o.x,y:o.y-1,zoom:e}),c&&d.push({x:o.x,y:o.y+1,zoom:e}),n&&h&&d.push({x:o.x-1,y:o.y-1,zoom:e}),n&&c&&d.push({x:o.x-1,y:o.y+1,zoom:e}),a&&h&&d.push({x:o.x+1,y:o.y-1,zoom:e}),a&&c&&d.push({x:o.x+1,y:o.y+1,zoom:e}),d}}function m(t,e,i=_){let o=!1;return t.forEach(((s,n)=>{e(s)||(i(s),t.delete(n),o=!0)})),o}function g(t,e){if("Polygon"!==t.type)return t;const i=t.coordinates[0],o=i.reduce(((t,e)=>l.IH(t,e,t)),l.Ue(0,0)),s=l.ZO(o,i.length),n=1+e/i.reduce(((t,e)=>Math.max(t,l.kE(l.lu(e,s)))),0);for(const t of i){const e=l.lu(t,s);l.Sm(e,n,e),l.IH(e,s,t)}return t}},21131:(t,e,i)=>{i.d(e,{dh:()=>h,vi:()=>d,sT:()=>_});var o=i(67245);function s(t,e){const i=Object.assign({path:[],current:void 0,steps:0},e);return a(i,t),i}function n(t){for(;0!==t.path.length;){const e=t.path[t.path.length-1],i=e.node.FEA__implChildren;if(-1===t.order?-1!==e.next:e.next!==i.length){t.current=i[e.next],e.next+=t.order;break}t.path.pop()}0!==t.path.length?t.current instanceof o.n5&&t.recurse(t.current)&&a(t,t.current):t.current=void 0}function r(t,e){for(n(t);t.current&&!e(t.current);)n(t)}function a(t,e){const i=1===t.order?0:e.FEA__implChildren.length-1;t.path.push({node:e,next:i})}const h=new o._y("DomContext");o.zS.add(h);const l=new WeakMap,c=new WeakMap;function d(t,e,i){if(t.FD7__implNotifyDomContextOnDescendantMoved)throw new Error("createDomContext: only one DomContext per entity is allowed");t.FD7__implNotifyDomContextOnDescendantMoved=!0;let o=!1;l.set(t,{element:e,endElement:i});return[{attach:(i,s)=>{if(o)throw new Error("DomContext: destroyed");if(c.has(i))throw new Error("DomContext: element already attached");c.set(i,{element:s}),u(t,i);let n=!1;return()=>{n||(e.removeChild(s),c.delete(i),n=!0)}}},()=>{o||(o=!0,l.delete(t),t.FD7__implNotifyDomContextOnDescendantMoved=!1)}]}function u(t,e){var i,o,n;const a=l.get(t);if(!a)throw new Error("DomContext: attaching to entity with destroyed DomContext");const h=c.get(e);if(!h)return;const d=s(t,{order:1,recurse:t=>!l.has(t)});if(r(d,(t=>t===e)),!d.current)throw Error(`DomContext: reattaching ${e.constructor.name} not in ${t.constructor.name}'s tree`);r(d,(t=>c.has(t)));const u=null!==(n=null!==(o=d.current?null===(i=c.get(d.current))||void 0===i?void 0:i.element:void 0)&&void 0!==o?o:a.endElement)&&void 0!==n?n:null;a.element.insertBefore(h.element,u)}function _(t,e,i){return function(t,e,i,o){const s=t._consumeContext(h);if(!s)return()=>{};const n=null==s?void 0:s.attach(t,e);let r;if(i){const[e,s]=d(t,i,o);r=s,t.A12__implProvideContext(h,e)}return()=>{null==r||r(),n()}}(t,e,i)}o.hN.DomContextOnDescendantMoved=function(t,e){if(u(t,e),!(e instanceof o.n5)||l.has(e))return;const i=s(e,{order:-1,recurse:t=>!l.has(t)});n(i);for(;i.current;)u(t,i.current),n(i)}},67245:(t,e,i)=>{i.d(e,{Ip:()=>c,L0:()=>_,MX:()=>m,_y:()=>h,hN:()=>d,n5:()=>p,ru:()=>g,zS:()=>u});var o=i(27284),s=i(90858),n=i(89061),r=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};const a=new WeakSet;class h{constructor(t){this.name=t}}class l{constructor(){this.watchers=new Set}consume(){return this.A7E_context}provide(t){this.A7E_context=t,this.watchers.forEach((t=>t()))}}const c={},d={},u=new WeakSet;class _{constructor(t){this.FE5__implRoot=null,this.C60__implParent=null,this.A1A__implProxyParent=null,this.FD7__implNotifyDomContextOnDescendantMoved=!1,this._props=this.C73__implPrepareProps(t)}_getDefaultProps(t){return this.constructor.defaultProps}update(t){this.FCD__implUpdateProps(Object.assign({},this._props,t))}FCD__implUpdateProps(t){var e;const i=this._props;if(this._props=this.C73__implPrepareProps(t,i),!(this.FE5__implRoot||this instanceof g))return;const o=function(t,e){const i=Object.keys(t).filter((t=>void 0===e[t])).reduce(((t,e)=>(t[e]=void 0,t)),{});return Object.keys(e).filter((i=>t[i]!==e[i])).reduce(((t,i)=>(t[i]=e[i],t)),i)}(i,this._props);if(Object.keys(o).length)try{null===(e=this._onUpdate)||void 0===e||e.call(this,o,i)}catch(t){throw n.kg.error(t),t}}C73__implPrepareProps(t,e){var i,o;null!=t||(t={});for(const[i,o]of Object.entries(t))o===c&&(t[i]=e[i]);const s=this._getDefaultProps(t);if(s)for(const[e,n]of Object.entries(s))null!==(i=(o=t)[e])&&void 0!==i||(o[e]=n);return t}FCD__implAttachExtra(){}FD9__implLoggerProps(){return null}FDC__implDetachExtra(){}D7A__implAttachTo(t){var e;this.C60__implParent!==t&&(null===(e=this.AC5__implCtxWatchers)||void 0===e||e.forEach(((t,e)=>{const i=this.C5A__implGetContextProvider(e);t.forEach((t=>null==i?void 0:i.watchers.delete(t)))})),this.C60__implParent&&(this.EA6__implDetach(),this.C60__implParent=null),this.C60__implParent=t,this.C60__implParent&&this.FE6__implAttach())}get parent(){var t;const e=this.C60__implParent;return null!==(t=null==e?void 0:e.A1A__implProxyParent)&&void 0!==t?t:e}get root(){return this.FE5__implRoot}B4C__implFindRoot(){let t=this;for(;t;){if(t instanceof g)return t;t=t.C60__implParent}return null}D8B__implGetEntityName(){return this.constructor.B4B__implName}FE6__implAttach(){var t;const e=this.B4C__implFindRoot();if(this.FE5__implRoot===e)return;this.FE5__implRoot=e,null===(t=this._onAttach)||void 0===t||t.call(this),this.FCD__implAttachExtra();const i=this.D8B__implGetEntityName();if(i&&!(0,s.Nw)(this.parent)&&!a.has(this.constructor)){const t=this.FD9__implLoggerProps();n.kg.info({group:"entity",payload:Object.assign({name:i},t)}),a.add(this.constructor)}}EA6__implDetach(){var t;return r(this,void 0,void 0,(function*(){if(this.FE5__implRoot){try{this.FDC__implDetachExtra()}catch(t){throw n.kg.error(t),t}try{null===(t=this._onDetach)||void 0===t||t.call(this)}catch(t){throw n.kg.error(t),t}this.FD8__implCtxMap=void 0,this.AC5__implCtxWatchers=void 0,this.FE5__implRoot=null}}))}_provideContext(t,e){if(u.has(t))throw new Error(`Context ${t.name} is readonly. You cannot provide it.`);this.A12__implProvideContext(t,e)}A12__implProvideContext(t,e){var i;null!==(i=this.FD8__implCtxMap)&&void 0!==i||(this.FD8__implCtxMap=new Map);let o=this.FD8__implCtxMap.get(t);o||(o=new l,this.FD8__implCtxMap.set(t,o)),o.provide(e)}C5A__implGetContextProvider(t){var e;for(let i=this.C60__implParent;i;i=i.C60__implParent){const o=null===(e=i.FD8__implCtxMap)||void 0===e?void 0:e.get(t);if(o)return o}}_consumeContext(t){var e;return null===(e=this.C5A__implGetContextProvider(t))||void 0===e?void 0:e.consume()}_watchContext(t,e,i){var o,s;const n=this.C5A__implGetContextProvider(t);if(!n)throw new Error(`watchContext: no ${t.name} to watch`);this.AC5__implCtxWatchers=null!==(o=this.AC5__implCtxWatchers)&&void 0!==o?o:new Map;const r=null!==(s=this.AC5__implCtxWatchers.get(t))&&void 0!==s?s:new Set;return n.watchers.add(e),r.add(e),this.AC5__implCtxWatchers.set(t,r),(null==i?void 0:i.immediate)&&e(),()=>{r.delete(e),n.watchers.delete(e)}}FD5__implReposition(){if(d.DomContextOnDescendantMoved)for(let t=this.C60__implParent;t;t=t.C60__implParent)if(t.FD7__implNotifyDomContextOnDescendantMoved){d.DomContextOnDescendantMoved(t,this);break}}}class p extends _{constructor(t,e,i){var o;let s,n;super(t),this.FEA__implChildren=[],this.children=this.FEA__implChildren,this._childContainer=this,Array.isArray(e)?(n=e,s=!0===(null==i?void 0:i.container)):(n=null!==(o=null==e?void 0:e.children)&&void 0!==o?o:[],s=!0===(null==e?void 0:e.container)),s&&(this._childContainer=this.__makeProxyContainer(),this._childContainer.A1A__implProxyParent=this,this._addDirectChild(this._childContainer),this.children=this._childContainer.FEA__implChildren),n.forEach((t=>this.addChild(t)))}__makeProxyContainer(){return new p({})}_addDirectChild(t,e){ymaps3.strictMode&&(0,o.h)(t instanceof _,"Child must be an Entity");const i=t;if(!i.D7A__implAttachTo)throw new Error("Not attachable child");for(let t=this;t;t=t.C60__implParent)if(t===i)throw new Error("Can't attach entity to its parent");const s=i.C60__implParent;if(s&&s!==this&&s._removeDirectChild(t),void 0!==e){if(e<0||e>this.FEA__implChildren.length)throw new Error("Bad index");const o=this.FEA__implChildren.indexOf(t);-1!==o&&(this.FEA__implChildren.splice(o,1),e>o&&(e-=1)),this.FEA__implChildren.splice(e,0,i),-1===o?i.D7A__implAttachTo(this):i.FD5__implReposition()}else{if(-1!==this.FEA__implChildren.indexOf(i))return;this.FEA__implChildren.push(i),i.D7A__implAttachTo(this)}}addChild(t,e){return this._childContainer._addDirectChild(t,e),this}_removeDirectChild(t){const e=t;if(!e.D7A__implAttachTo)throw new Error("Not attachable child");const i=this.FEA__implChildren.indexOf(e);-1!==i&&(this.FEA__implChildren.splice(i,1),e.D7A__implAttachTo(null))}removeChild(t){return this._childContainer._removeDirectChild(t),this}FCD__implAttachExtra(){for(let t=0;t<this.FEA__implChildren.length;t++)this.FEA__implChildren[t].FE6__implAttach()}FDC__implDetachExtra(){for(let t=this.FEA__implChildren.length-1;t>=0;t--)this.FEA__implChildren[t].EA6__implDetach()}}class m extends p{__makeProxyContainer(){return new m({})}addChild(t,e){return super.addChild(t,e)}removeChild(t){return super.removeChild(t)}}class g extends m{constructor(){super(...arguments),this._onAttach=void 0,this._onDetach=void 0,this.D7A__implAttachTo=void 0}get root(){return this}}},42542:(t,e,i)=>{i.d(e,{N:()=>s});var o=i(67245);const s=new o._y("ThemeContext");o.zS.add(s)},76393:(t,e,i)=>{i.d(e,{e:()=>o});const o=new(i(67245)._y)("TypeContext")},80437:(t,e,i)=>{i.d(e,{X:()=>s});var o=i(67245);const s=new o._y("map");o.zS.add(s)},93439:(t,e,i)=>{i.d(e,{$:()=>s});var o=i(67245);const s=new o._y("vector");o.zS.add(s)},9190:(t,e,i)=>{i.d(e,{O:()=>Hi});var o=i(86607);const s={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,stencil:!0,alpha:!1},n=[{renderer:/SwiftShader/},{renderer:/Parallels/}];let r;function a(t){try{const e=document.createElement("canvas");e.width=1,e.height=1;const i=Object.assign({},s);(null==t?void 0:t.allowSoftware)&&(i.failIfMajorPerformanceCaveat=!1);const o=e.getContext("webgl",i);if(o)return o}catch(t){}c(["getContext:null"])}function h(t){if(void 0===r){const e=t||a();if(e)try{r=function(t){let e=!0;const i=[],o=["requestAnimationFrame","Worker","URL","Blob","fetch","AbortController","ArrayBuffer","Set","Map"];for(const t of o){window[t]||(e=!1,i.push(`WindowPropertyNotExist-${t}`))}"function"!=typeof Math.trunc&&(e=!1,i.push("MathTrunc"));0===t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(e=!1,i.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS"));t.getExtension("OES_vertex_array_object")||(e=!1,i.push("OES_vertex_array_object"));const s=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);s&&0!==s.precision||(e=!1,i.push("Highp"));u(t)||(e=!1,i.push("TestPoints"));_()||(e=!1,i.push("NoWebAssembly"));const r=t.getExtension("WEBGL_debug_renderer_info"),a=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL),h=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL),l="string"==typeof a?a:"",c="string"==typeof h?h:"",m=navigator.userAgent,g=Boolean(p());for(const t of n)if(d(t,{vendor:l,renderer:c,ua:m})){e=!1,i.push("BlacklistedGpu");break}return{supported:e,reasonsFailed:i,info:{vendor:l,renderer:c,userAgent:m,webgl2:g}}}(e)}catch(t){c(["detectFeatures:error"])}else c(["getContext:null"])}return r}function l(){if(r)return r.supported;if(!window.WebGLRenderingContext)return c(["WebGLRenderingContext:absent"]),!1;{const t=function(){const t=navigator.userAgent;return!(/YandexSearch\//.test(t)||/YaApp/.test(t)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(t))&&!/MiuiBrowser\//.test(t)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(t)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(t)}(),e=function(){var t;const e=null===(t=navigator.userAgent)||void 0===t?void 0:t.match(/WebKit\/?(\d+)/i);return Boolean(e&&Number(e[1])<537)}(),i=function(){var t;const e=null===(t=navigator.userAgent)||void 0===t?void 0:t.match(/Chrome\/(\d+)/i);return!!e&&Number(e[1])<57}();if(t||e||i){return c([t&&"blacklist",e&&"oldWebKit",i&&"oldChromium"].filter(Boolean).map((t=>`userAgent:${t}`))),!1}}return!0}function c(t){r={supported:!1,reasonsFailed:["HasWebGl",...t],info:{userAgent:navigator.userAgent,webgl2:!1}}}function d(t,e){return Object.keys(t).every((i=>{const o=t[i],s=e[i];return!o||o.test(s)}))}function u(t){if(!t)return!1;const e=t.createShader(t.VERTEX_SHADER);if(!e)return!1;t.shaderSource(e,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),t.compileShader(e);const i=t.createShader(t.FRAGMENT_SHADER);if(!i)return!1;t.shaderSource(i,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),t.compileShader(i);const o=t.createProgram();if(!o)return!1;t.attachShader(o,e),t.attachShader(o,i),t.bindAttribLocation(o,0,"p"),t.linkProgram(o);const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0]),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),t.clearColor(0,1,0,1),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(o),t.drawArrays(t.POINTS,0,1);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteBuffer(s),t.deleteShader(e),t.deleteShader(i),t.deleteProgram(o),255===n[0]}function _(){if("undefined"==typeof WebAssembly||"function"!=typeof WebAssembly.validate||"function"!=typeof WebAssembly.instantiate)return!1;const t=new Uint8Array([0,97,115,109,1,0,0,0]);return WebAssembly.validate(t)}function p(){let t;try{const e=document.createElement("canvas");if(e.width=1,e.height=1,t=e.getContext("webgl2",s),!t)throw new Error("failed to get context");return t}catch(t){return}}var m=i(36733),g=i(35185),y=i(65036),f=i(46603),C=i(57032),E=i(72466);const A=30*E.Z;var v=i(38038),M=i(92830);function D(t,e,i,o,s){const n=t.toWorldCoordinates(e);return s?M.lu(n,x(s,i,o)):n}function x(t,e,i){const o=v.B.convertPixelSizeToWorldSize({x:(t[3]-t[1])/2,y:(t[0]-t[2])/2},e);return M.U1(o,i,o),o}var S=i(87459),b=i(27284),w=i(54142);const j=t=>{var e;return null===(e=B[t.effectiveMode])||void 0===e?void 0:e.call(B,t)},B={raster:()=>null,vector:()=>null};var L=i(70359);const z="__empty__",T="default";function I(t){const e={id:t.id,grouppedWith:t.grouppedWith,source:t.source?t.source:z,type:t.type?t.type:T,originalImplementation:t.implementation,implementation:(...e)=>{if(t.implementation){const i=t.implementation(...e);if(i)return i}return j(...e)},options:{raster:{},vector:{}}};return function(t,e){var i,o,s,n,r;!e.grouppedWith&&(null===(o=null===(i=t.options)||void 0===i?void 0:i.vector)||void 0===o?void 0:o.parentLayerId)&&(e.grouppedWith=null===(n=null===(s=t.options)||void 0===s?void 0:s.vector)||void 0===n?void 0:n.parentLayerId);const a=null===(r=t.options)||void 0===r?void 0:r.raster;if(!(null==a?void 0:a.implementation))return;ymaps3.strictMode&&(0,b.h)(!1,"Please use layer.implementation instead  layer.options.raster.implementation"),t.implementation||(t.implementation=()=>{const t=a.implementation;return t.prototype instanceof L.x||(0,w._y)(new Error("Implementation must be derived from CustomDomLayer")),t})}(t,e),t.options&&(t.options.raster&&(e.options.raster=Object.assign({},t.options.raster)),t.options.vector&&(e.options.vector=Object.assign({},t.options.vector))),e}const N=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;let F;var O=i(1239),R=i(24733),P=i(39559),k=i(16145),Y=i(34548);class Z extends((0,g.GA)().with()){get state(){return Object.assign(Object.assign({},this.FD3__tileManager.readyState),{graphicsReady:0,graphicsTotal:0})}constructor(t){super(),this._props=t,this.A19__previousLayers=new Map;const{dataSource:e}=t;ymaps3.strictMode&&(0,b.h)(e instanceof O.Nt,"Data source should be instanced of TileDataSource"),this.FD3__tileManager=new R.a(Object.assign(Object.assign({},t),{tileSize:e.tileSize,zoomRange:e.zoomRange,transparent:e.transparent,fetchTile:e.fetchRasterTile.bind(e),tileRevealDuration:200,getContainerSubpixelOffset(e){const i=t.element.getBoundingClientRect(),o={x:i.left,y:i.top};return M.G7(o,(t=>{const i=t*e;return(i-Math.round(i))/e}))}}),e.logger),this.FE6__tileManagerSubscription=this.FD3__tileManager.group().on("readyStateChanged",(()=>this._emit("stateChanged"))).on("requestRender",(()=>this._emit("requestRender"))),this.D97__tileSourceSubscription=e.group().on("sourceChanged",(t=>{var i,o,s,n,r,a;return this.FD3__tileManager.update({tileSize:null!==(o=null===(i=t.tileSize)||void 0===i?void 0:i.new)&&void 0!==o?o:void 0,zoomRange:null!==(n=null===(s=t.zoomRange)||void 0===s?void 0:s.new)&&void 0!==n?n:void 0,transparent:null!==(a=null===(r=t.transparent)||void 0===r?void 0:r.new)&&void 0!==a?a:void 0,fetchTile:t.fetchTile?e.fetchRasterTile.bind(e):void 0})}))}setOptions(t){this.FD3__tileManager.update({awaitAllTilesOnFirstDisplay:t.awaitAllTilesOnFirstDisplay,tileRevealDuration:t.tileRevealDuration})}findObjectInPosition(){return null}findFeatureByElement(){return null}update(t,e){this.FD3__tileManager.update({camera:t,fov:e})}resize(t){this.FD3__tileManager.update({size:t})}render(t){const e=this.FD3__tileManager.render(t);var i,s;i=this._props.element,s=(0,o.Os)(t.size.y,t.fov),i.style.perspective=`${s}px`;const n=new Map(e.layers.map((t=>[t.id,t])));(0,k.B)(this.A19__previousLayers,n,(i=>{const o=this.A23__addNewLayer(i);return i.cookie=o,this.FE1__updateLayer(i,i,t),this.B30__reconcileTiles(o,e.tileSize,i),i}),(t=>this.EAD__removeLayer(t)),((i,o)=>{this.B30__reconcileTiles(i.cookie,e.tileSize,o,i),this.FE1__updateLayer(o,i,t)}),((t,e)=>Boolean(t.cookie&&t.cookie===e.cookie))),this.A19__previousLayers=n}A23__addNewLayer(t){const e=(0,P.E)("ymaps3x0--tile-layer__container");return e.dataset.z=String(t.zoom),e.addEventListener("dragstart",(t=>{t.stopPropagation(),t.preventDefault()})),this._props.element.appendChild(e),e}FE1__updateLayer(t,e,i){const o=e.cookie;o&&(function(t,e,i,o,s){const n=s?e.state.translate:e.state.translate.map(U);t.style.transform=[`rotateX(${U(i)}rad)`,`translate3d(0px, ${e.state.scalingDistanceY}px, ${e.state.scalingDistanceZ}px)`,`rotateZ(${U(o)}rad) translate3d(${n[0]}px, ${n[1]}px, 0px)`].join(" ")}(o,t,i.camera.tilt,i.camera.azimuth,i.qualityHint>=f._.FULL),function(t,e){t.style.zIndex=String(e.state.zIndex)}(o,t),function(t,e){t.style.display=e.state.visible?"":"none"}(o,t))}B30__reconcileTiles(t,e,i,o){const s=new Map(i.tiles.map((t=>[t.id,t]))),n=o?new Map(o.tiles.map((t=>[t.id,t]))):new Map,r=new Set,a=new Set;(0,k.B)(n,s,(i=>{var o;return i.status>Y.z.LOADED&&i.state.content&&i.status!==Y.z.REMOVED&&(null!==(o=i.cookie)&&void 0!==o||(i.cookie=Q(i,e,t))),a.add(i.cookie),i}),(t=>r.add(t.cookie)),((i,o)=>{let s=o.cookie;i.cookie&&i.cookie!==o.cookie&&r.add(i.cookie),o.status>Y.z.LOADED&&o.state.content&&!s&&o.status!==Y.z.REMOVED&&(s=Q(o,e,t)),s&&(G(s,o.state),a.add(s))}),(()=>!0),(()=>!1)),r.forEach((t=>{t&&!a.has(t)&&t.remove()}))}EAD__removeLayer(t){var e;null===(e=t.cookie)||void 0===e||e.remove()}destroy(){this.FE6__tileManagerSubscription.offAll(),this.D97__tileSourceSubscription.offAll(),this.FD3__tileManager.destroy(),this.A19__previousLayers.forEach((t=>{var e;return null===(e=t.cookie)||void 0===e?void 0:e.remove()}))}}const U=t=>Math.abs(t)>=1e21?t.toPrecision(100):t.toFixed(5);function W(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}function G(t,e){t.style.opacity=String(e.opacity),t.style.left=e.position.x+"px",t.style.top=e.position.y+"px"}function Q(t,e,i){const o=function(t,e){const i=t.state.content.image;if(!(i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||W(i)))throw new Error("Unsupported image type allow only HTMLImageElement, HTMLCanvasElement or ImageBitmap");let o;if(W(i)){const t=document.createElement("canvas");t.width=i.width,t.height=i.height,t.style.position="absolute",t.getContext("2d").drawImage(i,0,0),o=t}else o=i;return o.style.width=`${e}px`,o.style.height=`${e}px`,o}(t,e);return G(o,t.state),i.appendChild(o),t.cookie=o,o}var H=i(90401),V=i(38178);const $={tilesLoaded:0,tilesReady:0,tilesTotal:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},X="http://www.w3.org/2000/svg";function q(t,e){const i=Math.floor((t+1)/2),o=Math.floor((e+1)/2),s=[];for(let t=i;t<=o;t++)s.push(t);return s}var K=i(1944);function J(t,e,i){const o=[],s={x:0,y:0},n={x:1/0,y:1/0},r={x:e,y:-e};let a=0,h=0;for(const e of t)a=e.x-n.x,h=e.y-n.y,(o.length<2||a>=i||a<=-i||h>=i||h<=-i)&&(M.PV(e,r,s),o.push({x:s.x,y:s.y}),n.x=e.x,n.y=e.y);return o}class tt{constructor(t,e,i){this.A18_strokeStamp="",this.C63_lineSegments=[],this.FE2_simplifiedLineSegments=new Map,this.C59_colorLines=new Map,this.worldsTranslations=[],this.geometry=Object.assign({},t.geometry),this.bbox=i,q(i.minX,i.maxX).reduce(((t,e)=>t.add(e).add(-e)),new Set).forEach((t=>this.worldsTranslations.push({x:2*t,y:0}))),this.worldsTranslations.sort(((t,e)=>t.x-e.x)),this.updateStyle(e)}get style(){return this.EA3_style}get strokeSize(){return this.D8D_strokeSize}get maxStrokeWidth(){return this.C6F_maxStrokeWidth}get strokeStamp(){return this.A18_strokeStamp}get hasPalette(){return this.style.paletteColorStops.length>0}updateStyle(t){this.EA3_style=t,this.D8D_strokeSize="LineString"===this.geometry.type||"MultiLineString"===this.geometry.type?this.EA3_style.stroke.length:1,this.C6F_maxStrokeWidth=-1/0,this.A18_strokeStamp="";for(let t=0;t<this.D8D_strokeSize;t++){const e=this.style.stroke[t];e.width>this.C6F_maxStrokeWidth&&(this.C6F_maxStrokeWidth=e.width),this.A18_strokeStamp+=e.paletteColors.length>0?"c":"p"}"LineString"===this.geometry.type&&t.paletteColorStops.length>0&&(this.C63_lineSegments=function(t,e){const i=[];let o=0;for(const s of e){const e=t.slice(o,s+1);i.push({coordinates:e,length:it(e)}),o=s}return i}(this.geometry.coordinates,t.paletteColorStops))}getStrokeStyleForStrokeIndex(t){const{stroke:e}=this.style;return e.length-1<t&&(0,w._y)(new Error(`Can't find stroke style for stroke with index ${t}`)),this.style.stroke[this.style.stroke.length-1-t]}getSimplifiedLineSegments(t,e){if(t=Math.round(t),!this.FE2_simplifiedLineSegments.has(t)){const i=v.B.getWorldPixelSize(t)/2,o=this.C63_lineSegments.map((t=>{const o=J(t.coordinates,i,e);return Object.assign(Object.assign({},t),{coordinates:(0,K.p)(o,this.style.simplificationRate)})}));this.FE2_simplifiedLineSegments.set(t,o)}return this.FE2_simplifiedLineSegments.get(t)}getColorLine(t,e,i){const o=`${t}_${e=Math.round(e)}`;if(!this.C59_colorLines.has(o)){const{paletteColors:s,simplifyPalette:n}=this.getStrokeStyleForStrokeIndex(t);this.C59_colorLines.set(o,function(t,e,i,o){const s=[],n=t.length-1,r=et/v.B.getWorldPixelSize(i);let a=[],h=0,l="",c=0,d={};for(let i=0;i<t.length;i++){const{coordinates:u,length:_}=t[i];o?a.push(...u):a=u,h+=_;const p=e[i];d[p]=void 0===d[p]?_:d[p]+_,d[p]>c&&(c=d[p],l=p);const m=s[s.length-1];o&&i!==n&&(!m||l!==m.color)&&h<r||(m&&l===m.color?m.coordinates=m.coordinates.concat(a):s.push({coordinates:a,color:l}),a=[],h=0,l="",c=0,d={})}return s}(this.getSimplifiedLineSegments(e,i),s,e,n))}return this.C59_colorLines.get(o)}hasStructuralDifferenceWithOtherModel(t){return this.geometry.type!==t.geometry.type||this.A18_strokeStamp!==t.strokeStamp||"MultiPolygon"===this.geometry.type&&"MultiPolygon"===t.geometry.type&&this.geometry.coordinates.length!==t.geometry.coordinates.length}}const et=1.5;function it(t){const e={x:0,y:0};let i=0;for(let o=1;o<t.length;o++)M.lu(t[o-1],t[o],e),i+=M.kE(e);return i}var ot=i(71363);function st(t,e,i={minX:0,maxX:0,minY:0,maxY:0}){const o=t.minX>e.minX?t.minX:e.minX,s=t.maxX>e.maxX?e.maxX:t.maxX;if(o>s)return null;const n=t.minY>e.minY?t.minY:e.minY,r=t.maxY>e.maxY?e.maxY:t.maxY;return n>r?null:(i.minX=o,i.maxX=s,i.minY=n,i.maxY=r,i)}function nt(t,e){return e.minX>=t.minX&&e.minY>=t.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function rt(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var at=i(27027),ht=i(11779),lt=i(46900);class ct extends((0,g.GA)().with()){constructor({element:t,size:e,camera:i,worldOptions:o,projection:s,dataSource:n}){super(),this.A13_fov=at.d$,this.A1C_fullRenderedZoom=-1/0,this.B44_features=new Map,this.B2A_featureToWrapper=new Map,this.FEE_elementToFeature=new WeakMap,this.EBC_element=t,this.A11_size=e,this.A26_camera=i,this.B33_needsRender=!0,ymaps3.strictMode&&(0,b.h)(n instanceof ht.m5,"Data source should be instance of FeaturesDataSource"),this.B29_dataSource=n,this.projection=s,this.worldOptions=o,this.C67_dataSourceEventGroup=this.B29_dataSource.group().on("featureAdded",(t=>this.FEE_addFeatureById(t))).on("featureRemoved",(t=>this.EB3_removeFeatureById(t))).on("featureUpdated",(t=>this.EC3_updateFeatureById(t))),this.B29_dataSource.forEachFeatureElement((t=>{this.FEE_addFeatureById(t.id)}))}get state(){return $}destroy(){this.B29_dataSource.forEachFeatureElement((t=>this.EB3_removeFeatureById(t.id))),this.C67_dataSourceEventGroup.offAll()}update(t,e){this.A13_fov===e&&this.A26_camera===t||(this.B33_needsRender=!0,this.A26_camera=t,this.A13_fov=e)}resize(t){(0,M.wy)(this.A11_size,t)||(this.B33_needsRender=!0,this.A11_size=t)}render({qualityHint:t,camera:e,fov:i}){this.update(e,i),this.B33_needsRender&&(t>=f._.FULL&&(this.A1C_fullRenderedZoom=this.A26_camera.zoom),this.B33_needsRender=t<f._.FULL,this.B4E__repositionAll(t>=f._.FULL||this.A1C_fullRenderedZoom===this.A26_camera.zoom))}findFeatureByElement(t){let e=t;for(;e&&e!==this.EBC_element;){const t=this.FEE_elementToFeature.get(e);if(t)return{type:"feature",feature:t};e=e.parentElement}return null}findObjectInPosition(t){const e=(0,o.Rv)(t,Object.assign(Object.assign({},this.A26_camera),{size:this.A11_size,container:this.EBC_element,fov:this.A13_fov}));if(!isFinite(e.x)||!isFinite(e.y))return null;const i=document.elementFromPoint(e.x,e.y);return i&&this.EBC_element.contains(i)?this.findFeatureByElement(i):null}FEE_addFeatureById(t){const e=this.B29_dataSource.getFeatureById(t);if(ymaps3.strictMode&&(0,b.h)(null!=e,`Feature ${t} not found`),!(0,ht.uT)(e))return;this.FEE_elementToFeature.set(e.style.element,e),this.B44_features.set(t,e);const i=ct.C63wrapElement(e.style.element);this.B2A_featureToWrapper.set(t,i),this.B3C__repositionFeature(e),this.FEA__safeAddElement(i),this.B33_needsRender=!0}EB3_removeFeatureById(t){const e=this.B44_features.get(t);if(!e)return;this.FEE_elementToFeature.delete(e.style.element);const i=this.B2A_featureToWrapper.get(t);ymaps3.strictMode&&(0,b.h)(null!=i,`Wrapper for feature ${t} not found`),this.B2A_featureToWrapper.delete(t),this.FDC__safeRemoveElement(i),e.style.element.isConnected&&i.removeChild(e.style.element),this.B33_needsRender=!0,this.B44_features.delete(t)}static C63wrapElement(t){const e=(0,P.E)("ymaps3x0--marker");return e.appendChild(t),e}EC3_updateFeatureById(t){const e=this.B29_dataSource.getFeatureById(t);ymaps3.strictMode&&(0,b.h)(null!=e,"Feature ${featureId} not found"),(0,ht.uT)(e)&&(this.B44_features.set(t,e),this.B3C__repositionFeature(e,!0))}B4E__repositionAll(t=!1){this.EBC_element.style.transformOrigin=`${this.A11_size.x/2}px ${this.A11_size.y/2}px`,this.B29_dataSource.forEachFeatureElement((e=>this.B3C__repositionFeature(e,t)))}B3C__repositionFeature(t,e=!1){const i=dt(this.A13_fov,this.A11_size,this.A26_camera,this.worldOptions,t.feature.geometry.coordinates,!t.feature.disableRoundCoordinates&&e),{x:o,y:s}=i,n=this.B2A_featureToWrapper.get(t.id);ymaps3.strictMode&&(0,b.h)(null!=n,`Wrapper for feature ${t.id} not found`),this.A10__shouldBeVisible(t)?this.FEA__safeAddElement(n):this.FDC__safeRemoveElement(n),n.style.transform=`translate(${o.toFixed(10)}px, ${s.toFixed(10)}px)`,n.style.zIndex=String(t.style.zIndex)}A10__shouldBeVisible(t){const{hideOutsideViewport:e,geometry:i}=t.feature;if(!e)return!0;const o=!0===e?at.rK:e.extent,{worldCenter:s,zoom:n}=this.A26_camera,r=o?v.B.convertPixelSizeToWorldSize({x:o,y:o},n):{x:0,y:0},a=v.B.convertPixelSizeToWorldSize(this.A11_size,n),h=s.x-Math.abs(a.x)/2-Math.abs(r.x),l=s.y-Math.abs(a.y)/2-Math.abs(r.y),c=s.x+Math.abs(a.x)/2+Math.abs(r.x),d=s.y+Math.abs(a.y)/2+Math.abs(r.x),{x:u,y:_}=i.coordinates;return!(u<h||u>c||_<l||_>d)}FDC__safeRemoveElement(t){t.isConnected&&t.parentElement===this.EBC_element&&this.EBC_element.removeChild(t)}FEA__safeAddElement(t){t.isConnected||this.EBC_element.appendChild(t)}}function dt(t,e,i,s,n,r,a=!0){ymaps3.strictMode&&(0,b.h)(!s.cycledY,"Y-cycled projections are not supported");const{zoom:h,tilt:l,azimuth:c,worldCenter:d}=i,u=r&&0===l?v.B.computePixelPerfectWorldCoordinates(d,h,(0,lt.x)(),1):d,_=r?v.B.computePixelPerfectWorldCoordinates(n,h,(0,lt.x)(),1):n,p=a&&s.cycledX?v.B.moveCloseToCenter(_,u):_;return p.y=(0,S.q)(p.y,-1,1),(0,o.k6)(p,{azimuth:c,tilt:l,worldCenter:u,zoom:h,size:e,fov:t})}const ut=[Object.assign({},M.jQ)];class _t{constructor(t,e,i){this.FF0_recreateDomStructureOnNextRender=!1,this.A4B_clippedPointElements=[],this.A14_renderedCenter=M.jQ,this.C70_renderedZoom=-1/0,this.EC0_renderedBBoxes=[],this.DA1_isVisible=!1,this.C6D_translation={x:0,y:0};const o=`ymaps3x0--feature-${t}-${e}`;this.C72_model=i,this.element=document.createElementNS(X,"g"),"Point"!==i.geometry.type&&(this.element.setAttribute("stroke-linejoin","round"),this.element.setAttribute("stroke-linecap","round")),this.element.setAttribute("id",o),this.elementCopy=document.createElementNS(X,"use"),this.elementCopy.setAttribute("href",`#${o}`),this.elementCopy.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${o}`),this.elementCopy.setAttribute("data-feature-id",e),this.D87_featureId=e,this.C67_fullWorldVisibleData={worldsTranslations:ut,bboxes:[i.bbox]},this.B50_createDomStructure()}get model(){return this.C72_model}setModel(t){this.FF0_recreateDomStructureOnNextRender=this.FF0_recreateDomStructureOnNextRender||this.C72_model.hasStructuralDifferenceWithOtherModel(t),this.C72_model=t,this.B29_teardownRenderedState(),this.C67_fullWorldVisibleData={worldsTranslations:ut,bboxes:[t.bbox]}}render(t){const{worldsTranslations:e,bboxes:i}=t.fullWorldVisible?this.C67_fullWorldVisibleData:this.EC3_computeWorldsTranslationsAndBBoxes(t.svgBBox,t.viewportWorldsTranslations);0!==e.length?(this.D8D_setVisibility(!0),this.EB2_needsFullRender(i,t.zoom)?(this.A17_fullRender(t,e,i),this.adjustStrokeWidthAndDash(t.clippingPadding)):this.B3B_reposition(t)):this.D8D_setVisibility(!1)}adjustStrokeWidthAndDash(t,e=1){Math.min(this.model.maxStrokeWidth/e,t)===t&&(e=this.model.maxStrokeWidth/t);for(let t=0;t<this.model.strokeSize;t++){const{dash:i,width:o}=this.model.getStrokeStyleForStrokeIndex(t),s=(o/e).toFixed(3),n=(1===e?i:i.map((t=>t/e))).join(" ");if("MultiPolygon"===this.model.geometry.type||"Polygon"===this.model.geometry.type)return this.element.setAttribute("stroke-width",s),void this.element.setAttribute("stroke-dasharray",n);const r=this.element.childNodes[t];r&&(r.setAttribute("stroke-width",s),r.setAttribute("stroke-dasharray",n))}}EC3_computeWorldsTranslationsAndBBoxes(t,e){const{bbox:i,worldsTranslations:o}=this.model,s={},n={worldsTranslations:[],bboxes:[]};for(const r of e.concat(o))if(s[r.x]=s[r.x]||{},!s[r.x][r.y]){s[r.x][r.y]=!0;const e=st(t,{minX:i.minX+r.x,maxX:i.maxX+r.x,minY:i.minY+r.y,maxY:i.maxY+r.y});e&&(n.worldsTranslations.push(r),n.bboxes.push(e))}return n}EB2_needsFullRender(t,e){if(this.FF0_recreateDomStructureOnNextRender||0===this.EC0_renderedBBoxes.length||this.EC0_renderedBBoxes.length!==t.length||this.C70_renderedZoom!==e)return!0;for(let e=0;e<this.EC0_renderedBBoxes.length;e++)if(!nt(this.EC0_renderedBBoxes[e],t[e]))return!0;return!1}B3B_reposition(t){if("Point"===this.model.geometry.type)return this.FDC_renderIconPoint(this.model.geometry.coordinates,t);const e=M.lu(this.A14_renderedCenter,t.pixelCenter);this.B4D_setTranslation(e.x,e.y)}A17_fullRender(t,e,i){const o=t.fullWorldVisible||1===i.length&&(s=this.C72_model.bbox,n=i[0],s.minX===n.minX&&s.maxX===n.maxX&&s.minY===n.minY&&s.maxY===n.maxY);var s,n;switch(this.A14_renderedCenter=t.pixelCenter,this.C70_renderedZoom=t.zoom,this.EC0_renderedBBoxes=i,this.element.style.cursor=this.model.style.cursor,this.model.style.interactive?this.element.style.pointerEvents="":this.element.style.pointerEvents="none",this.B4D_setTranslation(0,0),this.FF0_recreateDomStructureOnNextRender&&(this.FF0_recreateDomStructureOnNextRender=!1,this.B50_createDomStructure()),this.model.geometry.type){case"Point":if(this.model.style.element)return;this.element.setAttribute("fill","none"),this.FDC_renderIconPoint(this.model.geometry.coordinates,t);break;case"LineString":case"MultiLineString":if(this.element.setAttribute("fill","none"),this.model.hasPalette)this.EBE_renderLineWithPalette(e,t,o);else{const i="LineString"===this.model.geometry.type?[this.model.geometry.coordinates]:this.model.geometry.coordinates;this.B3F_renderLinesWithoutPalette(i,e,t,o)}break;case"Polygon":case"MultiPolygon":this.element.setAttribute("fill",this.model.style.fill),this.element.setAttribute("fill-opacity",String(this.model.style.fillOpacity)),this.element.setAttribute("fill-rule",this.model.style.fillRule);const{geometry:i}=this.model,s="Polygon"===i.type?[i.coordinates]:i.coordinates;this.D88_renderPolygons(s,e,t,o);break;default:(0,w._y)(new Error(`Unexpected geometry type: ${this.model.geometry.type}`))}}EBE_renderLineWithPalette(t,e,i){let o=null;for(let s=0;s<this.model.strokeSize;s++){const n=this.element.childNodes[s],r=this.model.getStrokeStyleForStrokeIndex(s);r.paletteColors.length>0?this.A1A_renderColorLineStroke(n,s,e,i,t):(null===o&&(o=this.D7E_computeSplittedLinePath(e,i,t)),gt(n,o,r))}}B3F_renderLinesWithoutPalette(t,e,i,o){const s=[];for(const n of t){const t=J(n,i.halfWorldSize,i.pointFilterBox);s.push(pt(t,i,o,e,this.model.style.simplificationRate))}const n=s.join(" ");for(let t=0;t<this.model.strokeSize;t++)gt(this.element.childNodes[t],n,this.model.getStrokeStyleForStrokeIndex(t))}D88_renderPolygons(t,e,i,o){for(let s=0;s<t.length;s++){const n=[];for(const r of t[s]){const t=J(r,i.halfWorldSize,i.pointFilterBox);n.push(pt(t,i,o,e,this.model.style.simplificationRate,!0))}gt(this.element.childNodes[s],n.join(" "),this.model.style.stroke[0])}}A1A_renderColorLineStroke(t,e,i,o,s){const n=this.model.getColorLine(e,i.zoom,i.pointFilterBox),r=this.model.getStrokeStyleForStrokeIndex(e);rt(t);const a=document.createDocumentFragment(),h=v.B.getScale(Math.round(i.zoom),i.zoom);let l=null;n.forEach((({coordinates:t,color:e})=>{if("hidden"===e)return;const n=pt(t,i,o,s,0,!1,h),c=mt(this.D87_featureId);gt(c,n,r),c.setAttribute("stroke",e),a.insertBefore(c,l),l=c})),t.appendChild(a)}D7E_computeSplittedLinePath(t,e,i){const o=this.model.getSimplifiedLineSegments(t.zoom,t.pointFilterBox),s=[];for(const{coordinates:t}of o)s.push(...t);return pt(s,t,e,i,0,!1,v.B.getScale(Math.round(t.zoom),t.zoom))}FDC_renderIconPoint(t,e){this.D7A_setImageElementsCount(e.viewportWorldsTranslations.length);const{scale:i,offset:o}=this.model.style.icon,s=[`scale(${i})`,`translate(${100*o[0]}%, ${100*o[1]}%)`];for(let i=0;i<e.viewportWorldsTranslations.length;i++){const o=this.element.children[i];o.getAttribute("href")!==this.model.style.icon.url&&o.setAttribute("href",this.model.style.icon.url);const n=dt(e.fov,e.size,e.camera,e.worldOptions,{x:t.x+e.viewportWorldsTranslations[i].x,y:t.y,z:t.z},!1,!1),{x:r,y:a}=n;o.style.transform=[`translate3d(${r.toFixed(10)}px, ${a.toFixed(10)}px, 0)`,...s].join(" ")}}D7A_setImageElementsCount(t){for(;this.element.children.length<t;){const t=document.createElementNS(X,"image");t.style.transformBox="fill-box",t.setAttribute("data-feature-id",this.D87_featureId),this.element.appendChild(t)}for(;this.element.children.length>t&&this.element.lastChild;)this.element.removeChild(this.element.lastChild)}C60_setPointVisibility(t){t?this.C77_unclipPoint():this.D9F_clipPoint()}D9F_clipPoint(){this.A4B_clippedPointElements.length=0;for(let t=0;t<this.element.children.length;t++){const e=this.element.children[t];this.A4B_clippedPointElements.push(e),this.element.removeChild(e)}}C77_unclipPoint(){for(const t of this.A4B_clippedPointElements)this.element.appendChild(t);this.A4B_clippedPointElements.length=0}B50_createDomStructure(){if(rt(this.element),"Point"!==this.model.geometry.type)if("MultiPolygon"!==this.model.geometry.type)for(let t=0;t<this.model.strokeSize;t++){const e=this.model.getStrokeStyleForStrokeIndex(t).paletteColors.length>0&&"LineString"===this.model.geometry.type?document.createElementNS(X,"g"):mt(this.D87_featureId);this.element.appendChild(e)}else for(let t=0;t<this.model.geometry.coordinates.length;t++){const t=mt(this.D87_featureId);this.element.appendChild(t)}}D8D_setVisibility(t){this.DA1_isVisible!==t&&(this.element.style.display=t?"":"none","Point"===this.C72_model.geometry.type&&this.C60_setPointVisibility(t),this.DA1_isVisible=t)}B4D_setTranslation(t,e){this.C6D_translation.x===t&&this.C6D_translation.y===e||(this.element.setAttribute("transform",`translate(${t} ${e})`),this.C6D_translation={x:t,y:e})}B29_teardownRenderedState(){this.C70_renderedZoom=-1/0,this.EC0_renderedBBoxes=[],this.A14_renderedCenter=M.jQ}}function pt(t,e,i,o,s=0,n=!1,r=1){const a=[],h={x:0,y:0};for(const l of o){const o=v.B.worldToRelativePixels(l,e.zoom);let c=t;if(!i){const i=M.lu(e.pixelCenter,o),s=e.clippingWindow.map((t=>{const e=M.IH(t,i);return 1===r?e:M.ZO(e,r,e)}));c=(0,ot._)(t,s,n)}if(c.length>0){const t=0===s?c:(0,K.p)(c,s),i=M.lu(o,e.pixelCenter);let l="M"+t.map((t=>(1!==r&&(t=M.Sm(t,r,h)),M.IH(t,i,h),`${h.x},${h.y}`))).join(" L");n&&(l+=" Z"),a.push(l)}}return a.join(" ")}function mt(t){const e=document.createElementNS(X,"path");return e.setAttribute("data-feature-id",t),e}function gt(t,e,i){t.setAttribute("d",e);const{opacity:o,color:s}=i;t.setAttribute("stroke-opacity",String(o)),t.setAttribute("stroke",s)}const yt={x:50,y:50},ft=18*E.Z;class Ct{get children(){return this.B2A_children.slice()}needsRender(){this.B33_needsRender=!0}constructor(t,{dataSource:e,element:i,size:o,camera:s,worldOptions:n,tiltRange:r}){this.type=t,this.AC3_svg=document.createElementNS(X,"svg"),this.FE4_zeroWorld=document.createElementNS(X,"g"),this.D95_groups=new Map,this.B2A_children=[],this.AD1_nodesToRemove=new Set,this.D91_renderedWorldCopies=new Set,this.EC8_multiWorldsSource=document.createDocumentFragment(),this.B35_elementChildrenKey=Symbol("childrenSet"),this.B33_needsRender=!0,this.C59_fullWorldRendered=!1,this.C58_lastTimeStrokeAdjusted=0,this.C64_willChangeFlag=!1,this.A11_size={x:1/0,y:1/0},this.A13_fov=at.d$,this.C6D_isSvgFixedAtAzimuth=!1,this.B29_dataSource=e,this.A26_camera=s,this.A64_tiltRange=r,this.EC5__resize(o),this.B3D_worldOptions=n,this.C70_renderedZoom=s.zoom,this.A26_zoomOfAdjustedStoke=s.zoom,this.A14_renderedCenter=s.worldCenter;const a=document.createElementNS(X,"g");this.EC8_multiWorldsSource.appendChild(a),this.D95_groups.set(ht.oR,{id:ht.oR,element:this.FE4_zeroWorld,elementCopy:a}),this.AC3_svg.appendChild(this.FE4_zeroWorld),this.AC3_svg.setAttributeNS("xmlns","xlink","http://www.w3.org/1999/xlink"),this.AC3_svg.ondragstart=()=>!1,i.appendChild(this.AC3_svg),this.B29_dataSource.groups.forEach((t=>{t.id!==ht.oR&&this.addGroup(t.id)}))}destroy(){for(const t of this.B2A_children)this.removeFeature(t);this.D88_cleanupNodesToRemove(),this.B33_needsRender=!0,this.AC3_svg.remove()}update(t,e){return this.FEC__update(t,e)}resize(t){return this.EC5__resize(t)}EC5__resize(t){(0,M.wy)(this.A11_size,t)||(this.A11_size=t,this.FE6_halfSize=M.ZO(this.A11_size,2),this.B2C_setSvgSizeValues(),this.B33_needsRender=!0)}FEC__update(t,e){this.A13_fov===e&&this.A26_camera===t||(this.A26_camera=t,this.A13_fov=e,this.B33_needsRender=!0)}render({qualityHint:t,camera:e,fov:i}){if(this.FEC__update(e,i),this.D88_cleanupNodesToRemove(),0===this.B2A_children.length)return void(this.AC3_svg.style.display="none");this.AC3_svg.style.setProperty("display",null);const o=this.FDC_getVisibleWorlds(),s=v.B.getScale(this.C70_renderedZoom,this.A26_camera.zoom);if(t===f._.QUICK?(this.AD2_setWillChange(!0),this.D9D_positionZeroWorld(s)):this.EB2_needsFullRender(t)?(this.A17_fullRender(o),this.C6E_renderWorldCopies(this.A26_camera.zoom,!0)):(this.B3B_adjustStrokeWidthAndDash(s),this.D9D_positionZeroWorld(s),this.C6E_renderWorldCopies(this.C70_renderedZoom)),"linear"===this.type){const t=this.EAD_getRenderVariables(o);this.B2A_children.forEach((e=>e.renderer.render(t)))}}removeFeature(t){const e=this.B2A_children.findIndex((e=>e.id===t.id));ymaps3.strictMode&&(0,b.h)(-1!==e,`Layer does not have feature with id "${t.id}"`),this.B2A_children.splice(e,1),this.AD1_nodesToRemove.add(t)}addFeatureAt(t,e){const i=this.B2A_children.findIndex((e=>e.id===t.id));-1!==i&&this.B2A_children.splice(i,1),this.B2A_children.splice(e,0,t),this.B33_needsRender=!0}addGroup(t){ymaps3.strictMode&&(0,b.h)(!this.D95_groups.has(t),`Layer already have group with id "${t}"`);const e=document.createElementNS(X,"g");this.D95_groups.set(t,{id:t,element:e,elementCopy:e.cloneNode()}),this.B33_needsRender=!0}removeGroup({id:t,removed:e}){ymaps3.strictMode&&(0,b.h)(this.D95_groups.has(t),`Layer does not have group with id "${t}"`),this.AD1_nodesToRemove.add(this.D95_groups.get(t));for(const t of e)"group"===t.type&&(ymaps3.strictMode&&(0,b.h)(this.D95_groups.has(t.id),`Layer does not have group with id "${t.id}"`),this.D95_groups.delete(t.id));this.B33_needsRender=!0}EB2_needsFullRender(t){if(t===f._.QUICK)return!1;if(this.B33_needsRender)return!0;if(t===f._.FULL&&this.A26_camera.zoom!==this.C70_renderedZoom)return!0;const e=this.B3B_computeHalfSvgWorldSize(),i={minX:this.A14_renderedCenter.x-e.x,maxX:this.A14_renderedCenter.x+e.x,minY:this.A14_renderedCenter.y-e.y,maxY:this.A14_renderedCenter.y+e.y},o=this.EC5_computeHalfViewportSize(),s=!nt(i,{minX:this.A26_camera.worldCenter.x-o.x,maxX:this.A26_camera.worldCenter.x+o.x,minY:this.A26_camera.worldCenter.y-o.y,maxY:this.A26_camera.worldCenter.y+o.y}),n=Math.abs(this.C70_renderedZoom-this.A26_camera.zoom);return s||n>=2}A17_fullRender(t){ymaps3.strictMode&&(0,b.h)(!this.B3D_worldOptions.cycledY,"Y-cycled projections are not supported"),this.B2C_setSvgSizeValues(),this.EBA_setSvgAttributes();const e=this.EAD_getRenderVariables(t);this.AD2_setWillChange(!1),this.B33_needsRender=!1,this.C70_renderedZoom=this.A26_camera.zoom,this.A14_renderedCenter=this.A26_camera.worldCenter,this.C59_fullWorldRendered=e.fullWorldVisible,this.A26_zoomOfAdjustedStoke=this.A26_camera.zoom,this.C58_lastTimeStrokeAdjusted=performance.now(),this.D9D_positionZeroWorld(),this.B29_dataSource.groups.forEach((t=>{ymaps3.strictMode&&(0,b.h)(this.D95_groups.has(t.id),`Layer does not have group with id "${t.id}"`);const{element:i,elementCopy:o}=this.D95_groups.get(t.id);i.setAttribute("opacity",String(t.style.opacity)),o.setAttribute("opacity",String(t.style.opacity)),this.FEE_renderChildren(t.children,i,o,e)}))}FEE_renderChildren(t,e,i,o){let s=null,n=null;const r=t.sort(((t,e)=>e.style.zIndex-t.style.zIndex));for(const t of r){let r,a;switch(t.type){case"group":ymaps3.strictMode&&(0,b.h)(this.D95_groups.has(t.id),`Layer does not have group with id "${t.id}"`);const e=this.D95_groups.get(t.id);r=e.element,a=e.elementCopy;break;case"feature":if((0,ht.uT)(t))continue;const i=this.B2A_children.findIndex((e=>e.id===t.id));if(-1===i)continue;const s=this.B2A_children[i];s.renderer.render(o),r=s.element,a=s.elementCopy}this.B3E_insertElementBefore(e,r,s),this.B3E_insertElementBefore(i,a,n),s=r,n=a}}B43_getCachedChildren(t){var e,i;return(e=t)[i=this.B35_elementChildrenKey]||(e[i]=new Set)}B3E_insertElementBefore(t,e,i){const o=this.B43_getCachedChildren(t);o.has(e)||(t.insertBefore(e,i),o.add(e))}FE9_removeElement(t){const e=t.parentNode;e&&(e.removeChild(t),this.B43_getCachedChildren(e).delete(t))}B3B_adjustStrokeWidthAndDash(t){const e=performance.now(),i=e-this.C58_lastTimeStrokeAdjusted;Math.abs(this.A26_zoomOfAdjustedStoke-this.A26_camera.zoom)>=.5&&i>250?(this.AD2_setWillChange(!1),this.A26_zoomOfAdjustedStoke=this.A26_camera.zoom,this.C58_lastTimeStrokeAdjusted=e,this.B2A_children.forEach((({renderer:e})=>{e.adjustStrokeWidthAndDash(50,t)}))):this.AD2_setWillChange(!0)}D88_cleanupNodesToRemove(){0!==this.AD1_nodesToRemove.size&&(this.AD1_nodesToRemove.forEach((t=>{this.FE9_removeElement(t.element),this.FE9_removeElement(t.elementCopy)})),this.AD1_nodesToRemove.clear())}C6D_getSvgPixelBBox(){const t=v.B.worldToPixels(this.A26_camera.worldCenter,this.A26_camera.zoom);return{minX:t.x-this.D9A_halfSvgSize.x,maxX:t.x+this.D9A_halfSvgSize.x,minY:t.y-this.D9A_halfSvgSize.y,maxY:t.y+this.D9A_halfSvgSize.y}}FF0_getClippingWindow(t){const{minX:e,maxX:i,minY:o,maxY:s}=function(t,e,i={minX:0,maxX:0,minY:0,maxY:0}){return i.minX=t.minX-e.x,i.maxX=t.maxX+e.x,i.minY=t.minY-e.y,i.maxY=t.maxY+e.y,i}(t,yt),n=v.B.worldToPixels(this.A26_camera.worldCenter,this.A26_camera.zoom),r=M.lu({x:e,y:o},n);return[M.lu({x:e,y:s},n),r,M.lu({x:i,y:o},n),M.lu({x:i,y:s},n)]}D9D_positionZeroWorld(t=1){if("linear"===this.type)return;ymaps3.strictMode&&(0,b.h)(!this.B3D_worldOptions.cycledY,"Y-cycled projections are not supported");const e=this.B3D_worldOptions.cycledX?v.B.moveCloseToCenter(this.A14_renderedCenter,this.A26_camera.worldCenter):this.A14_renderedCenter,{zoom:i,azimuth:o,tilt:s}=this.A26_camera,n=v.B.worldToRelativePixels(e,i),r=v.B.worldToRelativePixels(this.A26_camera.worldCenter,i),a=M.lu(n,r),h=M.lu(this.FE6_halfSize,this.D9A_halfSvgSize),l=`translate3d(${a.x}px, ${a.y}px, 0px)`,c=[`${`translate3d(${h.x}px, ${h.y}px, 0px)`}`,`rotateX(${s}rad)`,`rotateZ(${o}rad)`,`${l}`,`scale(${t})`];this.AC3_svg.style.setProperty("transform",c.join(" "))}FDD_clearWorldCopies(){const t=this.AC3_svg.querySelectorAll("g[data-world-copy]");for(let e=0;e<t.length;e++)this.AC3_svg.removeChild(t[e]);this.D91_renderedWorldCopies.clear()}C6E_renderWorldCopies(t,e=!1){"linear"!==this.type&&this.B3D_worldOptions.cycledX&&(e&&this.FDD_clearWorldCopies(),this.C59_fullWorldRendered&&this.C58_makeMissingWorldCopies(t))}C58_makeMissingWorldCopies(t){ymaps3.strictMode&&(0,b.h)(!this.B3D_worldOptions.cycledY,"Y-cycled projections are not supported");const e=v.B.getWorldPixelSize(t);for(const t of[-1,1,...this.FDC_getVisibleWorlds()])if(0!==t&&!this.D91_renderedWorldCopies.has(t)){const i=document.createElementNS(X,"g");if(i.setAttribute("data-world-copy",String(t)),"transformed"===this.type){const o=this.D9A_halfSvgSize.x+e*t;i.setAttribute("transform",`translate(${o}, ${this.D9A_halfSvgSize.y})`)}i.appendChild(this.EC8_multiWorldsSource.cloneNode(!0)),this.AC3_svg.appendChild(i),this.D91_renderedWorldCopies.add(t)}}FDC_getVisibleWorlds(){let t=this.EC5_computeHalfViewportSize().x+.11111111111111112;const{worldCenter:e}=this.A26_camera;return this.B29_dataSource.adhocEnabledExtraWorldCopies&&(t+=2),q(e.x-t,e.x+t)}EAD_getRenderVariables(t){const e=v.B.getWorldPixelSize(this.A26_camera.zoom),i=this.C6D_getSvgPixelBBox(),o=function({minX:t,maxX:e,minY:i,maxY:o},s){const n=v.B.pixelsToWorld({x:t,y:o},s),r=v.B.pixelsToWorld({x:e,y:i},s);return{minX:n.x,maxX:r.x,minY:n.y,maxY:r.y}}(i,this.A26_camera.zoom),s=o.minX<=-1&&o.maxX>=1;return{pixelCenter:v.B.worldToRelativePixels(this.A26_camera.worldCenter,this.A26_camera.zoom),zoom:this.A26_camera.zoom,worldSize:e,halfWorldSize:e/2,clippingWindow:this.FF0_getClippingWindow(i),clippingPadding:50,pointFilterBox:1/e,fullWorldVisible:s,viewportWorldsTranslations:t.map((t=>({x:2*t,y:0}))),svgBBox:o,worldOptions:this.B3D_worldOptions,rendererType:this.type,camera:this.A26_camera,fov:this.A13_fov,size:this.A11_size}}AD2_setWillChange(t){this.C64_willChangeFlag!==t&&(this.C64_willChangeFlag=t,this.AC3_svg.style.setProperty("will-change",t?"transform":""))}EC5_computeHalfViewportSize(){const t=v.B.convertPixelSizeToWorldSize(this.FE6_halfSize,this.A26_camera.zoom);return M.G7(t,Math.abs,t),t}B3B_computeHalfSvgWorldSize(){const t=v.B.convertPixelSizeToWorldSize(this.D9A_halfSvgSize,this.C70_renderedZoom);if(M.G7(t,Math.abs,t),this.A26_camera.tilt){const e=Math.cos(this.A64_tiltRange.max),i={x:this.A26_camera.azimuth?e:1,y:e};M.PV(t,i,t)}if(this.A26_camera.azimuth){const e=(0,S.d)(-ft,0,2*Math.PI)<this.A26_camera.azimuth||this.A26_camera.azimuth<ft,i=this.C6D_isSvgFixedAtAzimuth||e?.65:.45;M.Sm(t,i,t)}return t}B2C_setSvgSizeValues(){let t=M.Sm(this.A11_size,2);if(this.A26_camera.tilt){const e={x:1,y:1/Math.cos(this.A64_tiltRange.max)};M.PV(t,e,t)}if(this.A26_camera.azimuth){const e=M.kE(t);t={x:e,y:e},this.C6D_isSvgFixedAtAzimuth=!0}else this.C6D_isSvgFixedAtAzimuth=!1;this.A2F_svgSize=t,this.D9A_halfSvgSize=M.ZO(t,2)}EBA_setSvgAttributes(){this.AC3_svg.setAttribute("width",String(this.A2F_svgSize.x)),this.AC3_svg.setAttribute("height",String(this.A2F_svgSize.y)),this.AC3_svg.setAttribute("viewBox",`0 0 ${this.A2F_svgSize.x} ${this.A2F_svgSize.y}`),"transformed"===this.type&&this.FE4_zeroWorld.setAttribute("transform",`translate(${this.D9A_halfSvgSize.x}, ${this.D9A_halfSvgSize.y})`)}}let Et=0;class At extends((0,g.GA)().with()){constructor({element:t,size:e,camera:i,dataSource:o,tiltRange:s,worldOptions:n}){super(),this.FE2_layerId=String(Et++),this.C79_renderers=[],this.B2A_featuresDescriptions=new Map,this.A13_fov=at.d$,this.D80_featureToRenderer=new Map,this.C65_needReconcileRenderers=!0,this.FDE__removeExtraChildrenFromRenderer=(t,e)=>{const i=t.children;for(let o=e;o<i.length;o++)t.removeFeature(i[o]),this.D80_featureToRenderer.delete(i[o].id)},this.A11_size=e,this.A26_camera=i,this.EBC_element=t,this.A64_tiltRange=s,this.B3D_worldOptions=n,ymaps3.strictMode&&(0,b.h)(o instanceof ht.m5,"Data source should be instance of FeaturesDataSource"),this.B29_dataSource=o,this.B30_dataSourcesSubscriptions=o.group().on("groupAdded",(t=>this.C51_addGroup(t))).on("groupRemoved",(t=>this.A1E_removeGroup(t))).on("featureAdded",(t=>this.FEE_addFeatureById(t))).on("featureRemoved",(t=>this.EB3_removeFeatureById(t))).on("featureUpdated",(t=>this.EC3_updateFeatureById(t))).on("featureMovedToGroup",(()=>this.C79_renderers.forEach((t=>{t.needsRender()})))),this.B29_dataSource.groups.forEach((({id:t})=>{t!==ht.oR&&this.C51_addGroup(t)})),this.B29_dataSource.features.forEach((({id:t})=>this.FEE_addFeatureById(t)))}destroy(){this.B2A_featuresDescriptions.clear(),this.C79_renderers.forEach((t=>t.destroy())),this.B30_dataSourcesSubscriptions.offAll()}get state(){return $}update(t,e){this.A26_camera=t,this.A13_fov=e,this.C79_renderers.forEach((i=>i.update(t,e)))}resize(t){this.A11_size=t,this.FEE_updatePerspective(),this.C79_renderers.forEach((e=>e.resize(t)))}render(t){this.FEE_updatePerspective(),this.C65_needReconcileRenderers&&this.C6C_reconcileRenderers(),this.C79_renderers.forEach((e=>e.render(t)))}findObjectInPosition(t){const e=(0,o.Rv)(t,Object.assign(Object.assign({},this.A26_camera),{size:this.A11_size,container:this.EBC_element,fov:this.A13_fov}));if(!isFinite(e.x)||!isFinite(e.y))return null;const i=document.elementFromPoint(e.x,e.y);if(!i)return null;const s=i.getAttribute("data-feature-id");return null!==s&&this.B29_dataSource.hasFeatureWithId(s)&&this.EBC_element.contains(i)?{type:"feature",feature:this.B29_dataSource.getFeatureById(s)}:null}findFeatureByElement(){return null}C51_addGroup(t){this.C79_renderers.forEach((e=>e.addGroup(t)))}A1E_removeGroup(t){this.C79_renderers.forEach((e=>e.removeGroup(t)))}FEE_addFeatureById(t){const e=this.B29_dataSource.getFeatureById(t);if((0,ht.uT)(e))return;const{feature:i,style:o,bbox:s}=e,n=new tt(i,o,s),r=new _t(this.FE2_layerId,i.id,n),a={id:i.id,element:r.element,elementCopy:r.elementCopy,renderer:r};this.B2A_featuresDescriptions.set(i.id,a),this.C65_needReconcileRenderers=!0}EB3_removeFeatureById(t){this.B2A_featuresDescriptions.has(t)&&(this.B2A_featuresDescriptions.delete(t),this.C65_needReconcileRenderers=!0)}EC3_updateFeatureById(t){var e;if(this.B2A_featuresDescriptions.has(t)){const i=this.B2A_featuresDescriptions.get(t),{feature:o,style:s,bbox:n}=this.B29_dataSource.features.get(t),r=i.renderer.model;i.renderer.setModel(new tt(o,s,n)),r.style.zIndex!==s.zIndex&&(this.C65_needReconcileRenderers=!0),null===(e=this.D80_featureToRenderer.get(t))||void 0===e||e.needsRender()}}FEE_updatePerspective(){const t=(0,o.Os)(this.A11_size.y,this.A13_fov);this.C6C_perspective!==t&&(this.C6C_perspective=t,this.EBC_element.style.perspective=`${t}px`)}C6C_reconcileRenderers(){const t=(e=this.B2A_featuresDescriptions,Array.from(e.values()).sort(((t,e)=>{const i=t.renderer.model.style.zIndex,o=e.renderer.model.style.zIndex,s=void 0!==i,n=void 0!==o;return s&&n?i-o:s?1:n?-1:0})));var e;const i=[];let o=0,s=0;for(const e of t){const t="Point"===e.renderer.model.geometry.type?"linear":"transformed";let n=this.C79_renderers[o],r=i[i.length-1];const a=r&&r.type===t,h=n&&n.type===t;a||(h?(i.push(n),this.FDE__removeExtraChildrenFromRenderer(n,s),r=n,o++):(r=this.FCE_makeRenderer(t),i.push(r)),s=0);const l=this.D80_featureToRenderer.get(e.id);l&&l!==r&&l.removeFeature(e),r.addFeatureAt(e,s),s++,this.D80_featureToRenderer.set(e.id,r)}const n=i[i.length-1];n&&this.FDE__removeExtraChildrenFromRenderer(n,s);for(let t=o;t<this.C79_renderers.length;t++){for(let e=0;e<this.C79_renderers[t].children.length;e++)this.D80_featureToRenderer.delete(this.C79_renderers[t].children[e].id);this.C79_renderers[t].destroy()}this.C79_renderers=i,i.forEach((t=>t.needsRender())),this.C65_needReconcileRenderers=!1}FCE_makeRenderer(t){const e={dataSource:this.B29_dataSource,element:this.EBC_element,size:this.A11_size,camera:this.A26_camera,worldOptions:this.B3D_worldOptions,tiltRange:this.A64_tiltRange};return new Ct(t,e)}}var vt=i(33106),Mt=i(61497),Dt=i(44192),xt=i(28400);const St=new WeakMap,bt=new Set([H.K,Z,ct,At]);B.raster=t=>"markers"===t.type?ct:"features"===t.type||"geojson"===t.source?At:Z;class wt extends((0,g.GA)().with()){constructor(t,e,i,o,s,n,r,a,h){super(),this.EC1_layerImplementationsById=new Map,this.C6F_dataSourceSubscriptions=[],this.A13_fov=0,this.A12_dataSources={},this.D86_processingQueue=new vt.$7(vt.fv),this.element=(0,P.E)(),this.D7F_layerElementMap=new WeakMap,this.EAB_createLayerImplementation=t=>{const e=this.A12_dataSources[t.source];if(e instanceof Mt.N)throw new Error("Tile3dDataSource is not supported by raster engine");const i=t.implementation({source:this.EA6_getDataSourceType(e),type:t.type,effectiveMode:"raster"}),o=this.EA6__createLayerElement(e,t.type),s={element:o,processingQueue:this.D86_processingQueue,requestRender:this.C60_requestRenderLoopUpdate,animateFirstScreen:this.animateFirstScreen,size:this.A11_size,camera:this.A26_camera,projection:this.EAE_projection,worldOptions:this.B3D_worldOptions,zoomRoundingRule:this.B2F_zoomRoundingRule,dataSource:e,options:t.options,tiltRange:this.A64_tiltRange},n=bt.has(i)?new i(s):new xt.K(i,s);if(this.D7F_layerElementMap.set(n,o),!(0,Dt.il)(n))return Object.assign(Object.assign({},t),{layer:n});if(e instanceof O.Nt)return this.B2D_createTileLayerImplementation(t,n,e);const r=n.group().on("requestRender",this.C60_requestRenderLoopUpdate);return Object.assign(Object.assign({},t),{layer:n,eventGroup:r})},this.D94_destroyLayerImplementation=t=>{var e,i,o;this.A26_removeLayerElementFromDom(t.layer),null===(i=(e=t.layer).destroy)||void 0===i||i.call(e),null===(o=t.eventGroup)||void 0===o||o.offAll(),this.A66_resetTileHotspotsLayer(t,null),t.tileSourceEventGroup&&t.tileSourceEventGroup.offAll()},this.C60_requestRenderLoopUpdate=()=>this.renderLoop.update(),this.EA3_emitHotspotsChanged=()=>this._emit("hotspotsChanged"),this.EB7_onLayerStateChange=()=>{let t=!0,e=!1,i=!0,o=!1;this.EC1_layerImplementationsById.forEach((({layer:s})=>{var n,r,a,h;const l=St.get(s),c=l.loaded;l.loaded=(null===(n=s.state)||void 0===n?void 0:n.tilesLoaded)===(null===(r=s.state)||void 0===r?void 0:r.tilesTotal),t=t&&l.loaded,!c&&l.loaded&&(e=!0);const d=l.ready;l.ready=(null===(a=s.state)||void 0===a?void 0:a.tilesReady)===(null===(h=s.state)||void 0===h?void 0:h.tilesTotal),i=i&&l.ready,!d&&l.ready&&(o=!0)})),this._emit("stateChanged"),t&&e&&this._emit("tilesLoaded"),i&&o&&this._emit("tilesReady")},this.A11_size=t,this.A26_camera=e,this.B3D_worldOptions=o,this.EAE_projection=s,this.renderLoop=i,this.B2F_zoomRoundingRule=r,this.A64_tiltRange=h,this.animateFirstScreen=a,this.C57_layers=[],this.EBD_renderLoopSubscriptions=this.renderLoop.on("render",this.FF1_render.bind(this)),this.setDataSources(n)}setDataSources(t){this.B46_destroyDataSourceSubscriptions(),this.A12_dataSources=Object.assign({},t);for(const t of Object.keys(this.A12_dataSources))this.C6F_dataSourceSubscriptions.push(this.A12_dataSources[t].on("changed",this.C60_requestRenderLoopUpdate))}setLayers(t){var e;const i=[];this.EC1_layerImplementationsById.forEach(((t,e)=>i.push(e)));const o=new Map;for(const i of t)if(i.implementation({source:i.source,type:i.type,effectiveMode:"raster"})){const t=this.A12_dataSources[i.source];(t instanceof O.Nt&&(null===(e=t.rasterSourceDescription)||void 0===e?void 0:e.type)===i.type||t instanceof ht.m5||"custom"===i.type)&&o.set(i.id,i)}const s=(0,k.B)(this.EC1_layerImplementationsById,o,this.EAB_createLayerImplementation,this.D94_destroyLayerImplementation,(()=>{this.EB8_applyLayersOptions()}),((t,e)=>t.source===e.source&&t.type===e.type&&t.originalImplementation===e.originalImplementation));this.EC1_layerImplementationsById=s.result,this.EC2_flattenLayers(),this.EC1_layerImplementationsById.forEach((({layer:t})=>{var e,i,o,s;St.has(t)||St.set(t,{ready:(null===(e=t.state)||void 0===e?void 0:e.tilesReady)===(null===(i=t.state)||void 0===i?void 0:i.tilesTotal),loaded:(null===(o=t.state)||void 0===o?void 0:o.tilesLoaded)===(null===(s=t.state)||void 0===s?void 0:s.tilesTotal)})})),this.EB8_applyLayersOptions(),this.A15_addLayerElementsToDom(),0===s.created.length&&0===s.removed.length&&(0,V.R)(i,t.map((t=>t.id)))||(this._emit("stateChanged"),this.renderLoop.update())}getIndoorPlans(){return null}getVisibleObjects(){return null}getTile3dState(){return null}getLayerReadyState(t,e){const i=this.EC1_layerImplementationsById.get(t);if(i){if(e){const{layer:t}=i;switch(!0){case"tile"===e&&!(t instanceof Z):case"markers"===e&&!(t instanceof ct):case"features"===e&&!(t instanceof At):return}}return i.layer.state}}destroy(){this.setLayers([]),this.B46_destroyDataSourceSubscriptions(),this.EBD_renderLoopSubscriptions.offAll(),this.D9A_removeLayerElementsFromDom()}update(t,e){this.A26_camera=t,this.A13_fov=e,this.C57_layers.forEach((i=>{var o,s;return null===(s=(o=i.layer).update)||void 0===s?void 0:s.call(o,t,e)})),this.C60_requestRenderLoopUpdate()}resize(t){this.A11_size=t,this.C57_layers.forEach((e=>{var i,o;return null===(o=(i=e.layer).resize)||void 0===o?void 0:o.call(i,t)})),this.C60_requestRenderLoopUpdate()}findObjectInPosition(t){var e;for(let i=this.C57_layers.length-1;i>=0;i--){const{layer:o,implementation:{id:s,source:n}}=this.C57_layers[i],r=null===(e=o.findObjectInPosition)||void 0===e?void 0:e.call(o,t);if(r)return Object.assign({layer:s,source:n},r)}return null}findObjectInPositionEx(t){var e;const i={layers:[]};for(let o=this.C57_layers.length-1;o>=0;o--){const{layer:s,implementation:{id:n,source:r}}=this.C57_layers[o],a=null===(e=s.findObjectInPosition)||void 0===e?void 0:e.call(s,t);if(i.layers.push({layer:n,object:a&&Object.assign({layer:n,source:r},a)}),a)break}return i}findFeatureByElement(t){var e;for(let i=this.C57_layers.length-1;i>=0;i--){const{layer:o,implementation:{id:s,source:n}}=this.C57_layers[i],r=null===(e=o.findFeatureByElement)||void 0===e?void 0:e.call(o,t);if(r)return Object.assign({layer:s,source:n},r)}return null}EC2_flattenLayers(){this.C57_layers=[],this.EC1_layerImplementationsById.forEach((t=>{this.C57_layers.push({layer:t.layer,implementation:t}),t.hotspots&&this.C57_layers.push({layer:t.hotspots.layer,implementation:t})}))}preloadHotspotsInPoint(t){this.EC1_layerImplementationsById.forEach((({hotspots:e})=>{e&&e.layer.preloadHotspotsInPoint(t)}))}preloadHotspotsForViewport(){this.EC1_layerImplementationsById.forEach((({hotspots:t})=>{t&&t.layer.preloadHotspotsForViewport()}))}setObjectFilters(t){}setInvisibleCollidingPrimitives(t){}setObjectHighlight(t){}setTileContentClippingGeometry(t){}B2D_createTileLayerImplementation(t,e,i){const o=e.group().on("stateChanged",this.EB7_onLayerStateChange).on("requestRender",this.C60_requestRenderLoopUpdate),s=i.group(),n=Object.assign(Object.assign({},t),{layer:e,eventGroup:o,tileSourceEventGroup:s});return s.on("sourceChanged",(()=>{this.A66_resetTileHotspotsLayer(n,i.getHotspotTileDataSource())})),this.A66_resetTileHotspotsLayer(n,i.getHotspotTileDataSource()),n}A66_resetTileHotspotsLayer(t,e){if(!(!e&&!t.hotspots||e&&t.hotspots&&(0,O.PP)(t.hotspots.source,e))){if(t.hotspots&&(t.hotspots.eventGroup.offAll(),t.hotspots.layer.destroy(),t.hotspots=void 0),e){const i=new H.K({element:this.EA6__createLayerElement(e,"hotspot"),size:this.A11_size,camera:this.A26_camera,dataSource:e,processingQueue:this.D86_processingQueue,worldOptions:this.B3D_worldOptions,zoomRoundingRule:this.B2F_zoomRoundingRule,tiltRange:this.A64_tiltRange}),o=i.on("hotspotsChanged",this.EA3_emitHotspotsChanged).on("requestRender",this.C60_requestRenderLoopUpdate);t.hotspots={layer:i,eventGroup:o,source:e}}this.EC2_flattenLayers()}}FF1_render(t){const e=this;e.D86_processingQueue.pause();const i=Object.assign({camera:this.A26_camera,size:this.A11_size,fov:this.A13_fov,get worlds(){const{A11_size:t}=e,i=(0,o.k6)({x:0,y:0},Object.assign(Object.assign({size:t},e.A26_camera),{fov:e.A13_fov})),s=v.B.getWorldPixelSize(this.camera.zoom),n=[],r=e.B3D_worldOptions.cycledX?Math.floor((s/2-i.x)/s):0,a=e.B3D_worldOptions.cycledX?Math.ceil((t.x-s/2-i.x)/s):0;for(let t=0,e=r;e<=a;e+=1,t+=1)n.push({left:e*s+i.x-s/2,top:i.y-s/2,width:s,height:s});return n}},t);e.C57_layers.forEach((({layer:t})=>t.render(i))),this.D86_processingQueue.resume()}A26_removeLayerElementFromDom(t){var e;null===(e=this.D7F_layerElementMap.get(t))||void 0===e||e.remove()}D9A_removeLayerElementsFromDom(){for(const{layer:t}of this.C57_layers)this.A26_removeLayerElementFromDom(t)}A15_addLayerElementsToDom(){const t=new Map;for(const{layer:e}of this.C57_layers){const i=this.D7F_layerElementMap.get(e);if(i){const e=this.element,o=t.get(e)||0,s=e.childNodes[o];i!==s&&e.insertBefore(i,s||null),t.set(e,o+1)}}}EB8_applyLayersOptions(){var t,e;for(const{layer:i,implementation:o}of this.C57_layers){null===(t=i.setOptions)||void 0===t||t.call(i,o.options.raster);const s=this.D7F_layerElementMap.get(i);if(s){const t=(0,S.q)(null!==(e=o.options.raster.opacity)&&void 0!==e?e:1,0,1);s.style.opacity=String(t)}}}B46_destroyDataSourceSubscriptions(){for(const t of this.C6F_dataSourceSubscriptions)t.offAll();this.C6F_dataSourceSubscriptions=[]}get fov(){return at.d$}EA6_getDataSourceType(t){switch(!0){case t instanceof ht.m5:return"geojson";case t instanceof O.Nt:return"tile";default:return"none"}}EA6__createLayerElement(t,e){const i=(0,P.E)("ymaps3x0--layer");switch(!0){case"markers"===e:i.classList.add("ymaps3x0--marker-layer");break;case"hotspot"===e:case t instanceof ht.m5:i.classList.add("ymaps3x0--graphics-layer");break;case t instanceof O.Nt:i.classList.add("ymaps3x0--tile-layer")}return i}}var jt;!function(t){t[t.INACTIVE=-1]="INACTIVE",t[t.PRIMARY=0]="PRIMARY",t[t.SECONDARY=2]="SECONDARY",t[t.CTRL_PRIMARY=8]="CTRL_PRIMARY",t[t.CMD_PRIMARY=16]="CMD_PRIMARY"}(jt||(jt={}));var Bt=i(27294);class Lt extends((0,g.GA)().with()){constructor(t,e,i){super(),this.D8E_suppressNextClickStartTs=0,this.destroyed=!1,this.state=jt.INACTIVE,this._spots=[],this.DA0_onElementPointerDown=()=>{if(void 0===Lt.A71_owner)Lt.A71_owner=this;else if(Lt.A71_owner!==this)return;this.element.removeEventListener(this.B28_eventMap.start,this.DA0_onElementPointerDown),document.addEventListener(this.B28_eventMap.start,this.B3B_onDocumentPointerDown),document.addEventListener(this.B28_eventMap.end,this.A20_onPointerUp)},this.B3B_onDocumentPointerDown=t=>{if(Lt.A71_owner!==this)return;const e=0===this._spots.length;this.state=e?this._getEventState(t):this.state,this._handleAdd(t),this._emit("spotsAdded"),e&&this._emit("stateChanged")},this.A35_onPointerMove=t=>{Lt.A71_owner===this&&(this._handleChange(t),this._spots.length>0&&this._emit("spotsChanged"))},this.A20_onPointerUp=t=>{Lt.A71_owner===this&&(this._handleRemove(t),0===this._spots.length?(document.removeEventListener(this.B28_eventMap.start,this.B3B_onDocumentPointerDown),document.removeEventListener(this.B28_eventMap.end,this.A20_onPointerUp),this.element.addEventListener(this.B28_eventMap.start,this.DA0_onElementPointerDown),Lt.A71_owner=void 0,this._emit("spotsRemoved"),this.state=jt.INACTIVE,this._emit("stateChanged")):this._emit("spotsRemoved"))},this.FCE_onClick=t=>{const e=Date.now();this.D8E_suppressNextClickStartTs+500>e&&(this.D8E_suppressNextClickStartTs=0,t.stopPropagation(),t.preventDefault())},this.A11_onDragStart=t=>{t.stopPropagation(),t.preventDefault()},this.element=t,this.B28_eventMap=e,this.options=i,this.element.style.touchAction="none",this.element.addEventListener(this.B28_eventMap.start,this.DA0_onElementPointerDown),this.element.addEventListener("click",this.FCE_onClick,!0),this.element.addEventListener("dragstart",this.A11_onDragStart),document.addEventListener(this.B28_eventMap.move,this.A35_onPointerMove)}get spots(){return this._spots}get pointerPosition(){return this._spots.length>0?M.Kt(this._spots):this._getPointerPositionWithoutSpots()}destroy(){this.destroyed||(this.element.removeEventListener(this.B28_eventMap.start,this.DA0_onElementPointerDown),document.removeEventListener(this.B28_eventMap.start,this.B3B_onDocumentPointerDown),document.removeEventListener(this.B28_eventMap.move,this.A35_onPointerMove),document.removeEventListener(this.B28_eventMap.end,this.A20_onPointerUp),this.element.removeEventListener("dragstart",this.A11_onDragStart),this.element.removeEventListener("click",this.FCE_onClick,!0),this.element.style.touchAction="auto",this.destroyed=!0,Lt.A71_owner===this&&(Lt.A71_owner=void 0))}suppressNextClick(){this.D8E_suppressNextClickStartTs=Date.now()}suppressSelection(){}_getEventState(t){return"undefined"!=typeof MouseEvent&&t instanceof MouseEvent?t.ctrlKey&&0===t.button?jt.CTRL_PRIMARY:t.metaKey&&0===t.button&&(0,Bt.n$)("macos")?jt.CMD_PRIMARY:t.button:jt.PRIMARY}}const zt={start:"pointerdown",move:"pointermove",end:"pointerup"};function Tt(t){const e=[];return t.forEach((t=>{e.push(t)})),e}class It extends Lt{constructor(t,e){super(t,zt,e),this.FEB_spotMap=new Map,this.C64_pointerPosition={x:0,y:0},this.FE8_suppressSelection=!1,this.D9C_onWheel=t=>{("boolean"!=typeof t.isTrusted||t.isTrusted)&&(this.C64_pointerPosition={x:t.clientX,y:t.clientY})},document.addEventListener("wheel",this.D9C_onWheel,!0),document.addEventListener("pointercancel",(()=>{this.FEB_spotMap.clear(),this.state=jt.INACTIVE,this._emit("stateChanged")}))}suppressSelection(){this.FE8_suppressSelection=!0}destroy(){document.removeEventListener("wheel",this.D9C_onWheel,!0),super.destroy()}_handleAdd(t){var e;if(null===(e=this.options)||void 0===e?void 0:e.filter(t))return;this.FEB_spotMap.set(t.pointerId,{x:t.clientX,y:t.clientY}),this._spots=Tt(this.FEB_spotMap),this.C64_pointerPosition={x:t.clientX,y:t.clientY};const i=t.target;if(i){const t=e=>{i.removeEventListener("pointerup",t),this._handleRemove(e)};i.addEventListener("pointerup",t)}}_handleChange(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this.FE8_suppressSelection&&1===this._spots.length&&t.preventDefault(),this.C64_pointerPosition={x:t.clientX,y:t.clientY},this._spots.length>0&&this.FEB_spotMap.has(t.pointerId)&&(this.FEB_spotMap.set(t.pointerId,this.C64_pointerPosition),this._spots=Tt(this.FEB_spotMap)))}_handleRemove(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this.FEB_spotMap.delete(t.pointerId),this._spots=Tt(this.FEB_spotMap),this.FE8_suppressSelection=!1)}_getPointerPositionWithoutSpots(){return this.C64_pointerPosition}}const Nt={start:"touchstart",move:"touchmove",end:"touchend"};class Ft extends Lt{constructor(t,e){super(t,Nt,e),this.B4A_mouseCoords={x:0,y:0},this.FE2_holdingMouseButton=!1,this.B39_onMouseDown=t=>{if(void 0===Ft.B2C_mouseOwner)Ft.B2C_mouseOwner=this;else if(Ft.B2C_mouseOwner!==this)return;this.B4A_mouseCoords={x:t.clientX,y:t.clientY};const e=this.state===jt.INACTIVE;this.state=e?this._getEventState(t):this.state,this.FE2_holdingMouseButton=!0,document.addEventListener("mouseup",this.D81_onMouseUp),this._emit("spotsAdded"),e&&this._emit("stateChanged")},this.B3E_onMouseMove=t=>{this.B4A_mouseCoords={x:t.clientX,y:t.clientY},Ft.B2C_mouseOwner===this&&this.FE2_holdingMouseButton&&this._emit("spotsChanged")},this.D81_onMouseUp=()=>{Ft.B2C_mouseOwner===this&&(Ft.B2C_mouseOwner=void 0,this.FE2_holdingMouseButton=!1,document.removeEventListener("mouseup",this.D81_onMouseUp),this._emit("spotsRemoved"),this.state=jt.INACTIVE,this._emit("stateChanged"))},this.D9C_onWheel=t=>{("boolean"!=typeof t.isTrusted||t.isTrusted)&&(this.B4A_mouseCoords={x:t.clientX,y:t.clientY})},this.element.addEventListener("mousedown",this.B39_onMouseDown),document.addEventListener("mousemove",this.B3E_onMouseMove),this.element.addEventListener("wheel",this.D9C_onWheel),/ipad|iphone/i.test(navigator.userAgent)&&this.element.addEventListener("touchmove",(t=>{var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||t.preventDefault()}))}get spots(){return 0!==this._spots.length?this._spots:this.FE2_holdingMouseButton?[this.B4A_mouseCoords]:[]}destroy(){this.destroyed||(this.element.removeEventListener("mousedown",this.B39_onMouseDown),document.removeEventListener("mousemove",this.B3E_onMouseMove),document.removeEventListener("mouseup",this.D81_onMouseUp),this.element.removeEventListener("wheel",this.D9C_onWheel),super.destroy())}_handleAdd(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this._spots=Ot(t.touches))}_handleChange(t){var e;if(null===(e=this.options)||void 0===e?void 0:e.filter(t))return;const i=this._spots.length;this._spots=Ot(t.touches),this._spots.length<i?this._emit("spotsRemoved"):this._spots.length>i&&this._emit("spotsAdded")}_handleRemove(t){var e;(null===(e=this.options)||void 0===e?void 0:e.filter(t))||(this._spots=Ot(t.touches))}_getPointerPositionWithoutSpots(){return this.B4A_mouseCoords}}function Ot(t){const e=new Array;for(let i=0;i<t.length;i++)e[i]={x:t[i].clientX,y:t[i].clientY};return e}const Rt=new WeakMap;var Pt;!function(t){t[t.IDLE=0]="IDLE",t[t.DRAGGING_BEYOND_THRESHOLD=1]="DRAGGING_BEYOND_THRESHOLD",t[t.DRAGGING=2]="DRAGGING"}(Pt||(Pt={}));const kt={tremorPixels:3,listenToButtons:new Set([jt.PRIMARY]),minSpotsCount:1};class Yt extends((0,g.GA)().with()){constructor(t,e={}){super(),this.A12_state=Pt.IDLE,this.FE8_startingPoint={x:0,y:0},this.D82_dragOffset={x:0,y:0},this.C64_pointerPosition={x:0,y:0},this.C69_onSpotAdded=()=>{if(this.B30_device.spots.length<this.B2B_options.minSpotsCount)return;const t=this.B30_device.state;if(this.A12_state<Pt.DRAGGING_BEYOND_THRESHOLD&&this.B2B_options.listenToButtons.has(t)){const t=this.B30_device.pointerPosition;this.A12_state=Pt.DRAGGING_BEYOND_THRESHOLD,this.FE8_startingPoint.x=t.x,this.FE8_startingPoint.y=t.y,this.D82_dragOffset={x:0,y:0},this.C64_pointerPosition=this.B30_device.pointerPosition}else this.A13_skip(this.B30_device.pointerPosition)},this.D84_onSpotsChanged=()=>{if(this.A12_state<Pt.DRAGGING_BEYOND_THRESHOLD)return;const t=this.B30_device.pointerPosition,e=this.D82_dragOffset;this.D82_dragOffset=M.lu(t,this.FE8_startingPoint),this.C64_pointerPosition=this.B30_device.pointerPosition,this.A12_state<=Pt.DRAGGING_BEYOND_THRESHOLD&&Math.max(Math.abs(this.D82_dragOffset.x),Math.abs(this.D82_dragOffset.y))>this.B2B_options.tremorPixels?(this._emit("dragStart"),this.A12_state=Pt.DRAGGING,this.B30_device.suppressSelection()):this.A12_state!==Pt.DRAGGING||M.wy(e,this.D82_dragOffset)||this._emit("dragMove")},this.C74_onSpotsRemoved=()=>{this.B30_device.spots.length<this.B2B_options.minSpotsCount?(this._emit("dragEnd"),this.A12_state===Pt.DRAGGING&&this.B30_device.suppressNextClick(),this.A12_state=Pt.IDLE,this.D82_dragOffset={x:0,y:0},this.C64_pointerPosition={x:0,y:0}):this.A13_skip(this.B30_device.pointerPosition)},this.B30_device=t,this.B2B_options=Object.assign(Object.assign({},kt),e),this.C6A_deviceSubscription=this.B30_device.on("spotsAdded",this.C69_onSpotAdded).on("spotsChanged",this.D84_onSpotsChanged).on("spotsRemoved",this.C74_onSpotsRemoved)}destroy(){this.C6A_deviceSubscription.offAll()}get dragStartingPoint(){return this.FE8_startingPoint}get pointerPosition(){return this.C64_pointerPosition}get dragOffset(){return this.A12_state===Pt.DRAGGING?this.D82_dragOffset:{x:0,y:0}}get isDragging(){return this.A12_state!==Pt.IDLE}A13_skip(t){if(this.A12_state<Pt.DRAGGING)return this.FE8_startingPoint=t,void(this.C64_pointerPosition=t);this._emit("dragEnd"),this.FE8_startingPoint=t,this.C64_pointerPosition=t,this._emit("dragStart")}}const Zt=12*E.Z;class Ut extends((0,g.GA)().with()){constructor(t){super(),this.D9D_scale=1,this.A12_state=0,this.FCE_angle=0,this.EC3_angleDelta=0,this.FD8_panTiltDelta=0,this.EA6_initialTouchDistance=1,this.C71_initialTouchesY=[0,0],this.A12_initialDirection={x:0,y:0},this.B30_device=t,this.C6A_deviceSubscription=this.B30_device.on("spotsAdded",(()=>{2===this.B30_device.spots.length&&(this.A12_state=1,this.EA6_initialTouchDistance=Wt(this.B30_device.spots),this.C71_initialTouchesY=[this.B30_device.spots[0].y,this.B30_device.spots[1].y],this.A12_initialDirection=Gt(this.B30_device.spots),this.D95_updateState())})).on("spotsChanged",(()=>{if(this.B30_device.spots.length<=1)return;if(this.D95_updateState(),1!==this.A12_state)return;const t=Math.abs(Wt(this.B30_device.spots)-this.EA6_initialTouchDistance),e=Math.abs(this.FCE_angle)>Zt,i=t>=15,o=this.B30_device.spots[0].y-this.C71_initialTouchesY[0],s=this.B30_device.spots[1].y-this.C71_initialTouchesY[1],n=!e&&Math.sign(o)===Math.sign(s)&&Math.abs(o)>=5&&Math.abs(s)>=5&&t<10;(e||i||n)&&(this.A12_state=2,this.EA6_initialTouchDistance=Wt(this.B30_device.spots),this.A12_initialDirection=Gt(this.B30_device.spots),this.D95_updateState(),this._emit(i||e?"pinchRotateStart":"panTiltStart"))})).on("spotsRemoved",(()=>{this.B30_device.spots.length<=1?(2===this.A12_state&&this._emit("gestureEnd"),this.D9D_scale=1,this.FCE_angle=0,this.EC3_angleDelta=0,this.FD8_panTiltDelta=0,this.A12_initialDirection={x:0,y:0},this.EA6_initialTouchDistance=0,this.C71_initialTouchesY=[0,0]):this.D95_updateState()}))}destroy(){this.C6A_deviceSubscription.offAll()}get scale(){return 2===this.A12_state?this.D9D_scale:1}get angle(){return 2===this.A12_state?this.D84_getCorrectedAngle():0}get panTiltDelta(){return 2===this.A12_state?this.FD8_panTiltDelta:0}D95_updateState(){const t=this.B30_device.spots,e=Wt(t);var i,o;this.D9D_scale=e?e/this.EA6_initialTouchDistance:1,this.FCE_angle=(i=Gt(t),o=this.A12_initialDirection,Math.atan2(i.y,i.x)-Math.atan2(o.y,o.x)),this.FD8_panTiltDelta=this.C71_initialTouchesY[0]-t[0].y}D84_getCorrectedAngle(){const t=Math.abs(this.FCE_angle)>Zt;return!this.EC3_angleDelta&&t&&(this.EC3_angleDelta=-Math.sign(this.FCE_angle)*Zt),this.EC3_angleDelta?this.FCE_angle+this.EC3_angleDelta:0}}function Wt(t){if(t.length<2)return 0;const e=M.lu(t[0],t[1]);return M.kE(e)}function Gt(t){return M.lu(t[0],t[1])}var Qt;!function(t){t[t.SCROLL_DOWN=-1]="SCROLL_DOWN",t[t.SCROLL_UP=1]="SCROLL_UP"}(Qt||(Qt={}));class Ht extends((0,g.GA)().with()){constructor(t,e){super(),this.B46_disabled=!1,this.D9C_onWheel=t=>{var e;if(this.B46_disabled||"boolean"==typeof t.isTrusted&&!t.isTrusted)return;if(null===(e=this.options)||void 0===e?void 0:e.filter(t))return;t.preventDefault(),t.stopPropagation();let i=t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?1:40,o=!1;(0,Bt.jU)("firefox",{gte:90})&&t.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i=1),t.ctrlKey&&(0,Bt.n$)("macos")&&(0,Bt.jU)("firefox")&&(i*=6),t.ctrlKey&&(0,Bt.n$)("macos")&&(0,Bt.jU)("chrome",{gte:100})&&(i*=6,o=!0);let s=(o||void 0===t.wheelDeltaY?-t.deltaY:t.wheelDeltaY)*i*(t.shiftKey?.25:1);this._emit("wheel",s)},this.EBC_element=t,this.EBC_element.addEventListener("wheel",this.D9C_onWheel,{passive:!1}),this.options=e}destroy(){this.EBC_element.removeEventListener("wheel",this.D9C_onWheel)}disable(){this.B46_disabled=!0}enable(){this.B46_disabled=!1}}const Vt=5,$t=.001,Xt={linear:{p1:{x:0,y:0},p2:{x:1,y:1}},ease:{p1:{x:.25,y:.1},p2:{x:.25,y:1}},"ease-in":{p1:{x:.42,y:0},p2:{x:1,y:1}},"ease-out":{p1:{x:0,y:0},p2:{x:.58,y:1}},"ease-in-out":{p1:{x:.42,y:0},p2:{x:.58,y:1}}};function qt(t){if("function"==typeof t)return t;if("string"==typeof t)return t in Xt||(0,w._y)(new Error(`Unexpected timing function used: ${t}`)),qt(Xt[t]);const e=t,{p1:i,p2:o}=e,s={x:3*i.x,y:3*i.y},n={x:3*(o.x-2*i.x),y:3*(o.y-2*i.y)},r={x:3*(i.x-o.x)+1,y:3*(i.y-o.y)+1};function a(t){return r.x*Math.pow(t,3)+n.x*Math.pow(t,2)+s.x*t}function h(t){return s.x+t*(2*n.x+3*t*r.x)}return function(t){return e=function(t){let e,i=t,o=0;for(;o<Vt&&(e=a(i)-t,!(Math.abs(e)<$t));)i-=e/h(i),o++;return i}(t),r.y*Math.pow(e,3)+n.y*Math.pow(e,2)+s.y*e;var e}}const Kt=qt("ease");function Jt(t,e,i){return t(e)-t(e-i)}function te(t,e,i,o,s=Kt){const n=o?v.B.worldToRelativePixels(M.lu(o,t.worldCenter),t.zoom):null,r=oe(s,e-t.zoom,n);return t.animateForDuration(i,r)}function ee(t,e,i,o=Kt){if(M.pU(e,M.jQ,1e-10))return{complete:Promise.resolve(),isRunning:!1,stop(){}};const s=qt(o);return t.animateForDuration(i,((t,i,o)=>{const n=M.Sm(e,Jt(s,i,o)),r=M.IH(t.worldCenter,n);return Object.assign(Object.assign({},t),{worldCenter:r})}))}function ie(t,e,i,o,s=Kt){return Math.abs(i-t.zoom)<1e-10?ee(t,M.lu(e,t.worldCenter),o,s):function(t,e,i,o,s=Kt){const n=t.worldCenter,r={x:0,y:0},a={x:!1,y:!1},h=oe(s,i-t.zoom,r);return t.animateForDuration(o,((o,s,l)=>{if(1===s)return Object.assign(Object.assign({},o),{worldCenter:e,zoom:i});const c=v.B.convertPixelSizeToWorldSize(t.size,o.zoom),d=!t.worldOptions.cycledX&&c.x>2,u=!t.worldOptions.cycledY&&Math.abs(c.y)>2;if(!a.x&&!d){const{x:t}=se(e,i,n,o.zoom);r.x=t,a.x=!0}if(!a.y&&!u){const{y:t}=se(e,i,n,o.zoom);r.y=t,a.y=!0}return h(o,s,l)}))}(t,e,i,o,s)}function oe(t,e,i){const o=qt(t);return(t,s,n)=>{const r=t.zoom+e*Jt(o,s,n);if(!i)return Object.assign(Object.assign({},t),{zoom:r});const a=M.lu(v.B.convertPixelSizeToWorldSize(i,t.zoom),v.B.convertPixelSizeToWorldSize(i,r)),h=M.IH(t.worldCenter,a);return Object.assign(Object.assign({},t),{worldCenter:h,zoom:r})}}function se(t,e,i,o){const s=e-o,n=M.lu(t,i),r=M.Sm(n,Math.sign(s)/(Math.pow(2,Math.abs(s))-1)),a=s>0?t:i,h=M.IH(a,r);return v.B.worldToRelativePixels(M.lu(h,i),o)}function ne(t,e,i,o,s=Kt){const n=qt(s);return t.animateForDuration(o,((t,o,s)=>{if(1===o)return Object.assign(Object.assign({},t),{azimuth:i});const r=t.azimuth+e*Jt(n,o,s);return Object.assign(Object.assign({},t),{azimuth:r})}))}function re(t,e,i,o=Kt){const s=e-t.tilt,n=qt(o);return t.animateForDuration(i,((t,i,o)=>{if(1===i)return Object.assign(Object.assign({},t),{tilt:e});const r=t.tilt+s*Jt(n,i,o);return Object.assign(Object.assign({},t),{tilt:r})}))}function ae(t,{zoom:e,azimuth:i},o){const s=v.B.getScale(e,o),n=M.Sm(t,s-1);return M.U1(v.B.convertPixelSizeToWorldSize(n,o,n),i)}class he extends((0,g.GA)().with()){constructor(t,e,i,o){super(),this.EC8_deltaAccumulator=0,this.C67_zoomPointCenterOffset=M.jQ,this.D9C_onWheel=t=>{const e=Date.now();this.EC8_deltaAccumulator=t;const i=this.zoomDuration;if(!this.B2C_updateWheelTrend(t)||this.A12_state&&e-this.A12_state.startTs<i)return;this.C67_zoomPointCenterOffset=M.lu(this.C63_zoomPointSource(),M.ZO(this.EB7_map.size,2));const o=Math.sign(this.EC8_deltaAccumulator);this.EC8_deltaAccumulator=0;const s=this.EA3_computeNewState(this.A12_state,e,o);if(s){const t=!this.A12_state;this.A12_state=s,t&&this._emit("zoomStart")}this.A12_state&&!this.isInAction&&(this.D95_animation=this.EB7_map.animate(this.C77_animationStep),this.D95_animation.complete.finally((()=>this._emit("zoomEnd"))))},this.C77_animationStep=t=>{const{zoom:e,dt:i}=le(this.A12_state,Date.now());if(i>=this.A12_state.duration+50&&(this.D95_animation.stop(),this.D95_animation=void 0,this.A12_state=void 0,this.EAA_currentWheelTrend=void 0),e===t.zoom)return t;const o=ae(this.C67_zoomPointCenterOffset,t,e),s=M.IH(t.worldCenter,o);return Object.assign(Object.assign({},t),{worldCenter:s,zoom:e})},this.EB7_map=t,this.B30_device=e,this.C63_zoomPointSource=i,this.zoomDuration=o,this.A16_init()}get isInAction(){return void 0!==this.D95_animation&&this.D95_animation.isRunning}destroy(){this.D88_suspend()}enable(){this.A16_init()}disable(){this.D88_suspend()}A16_init(){this.C6A_deviceSubscription||(this.C6A_deviceSubscription=this.B30_device.on("wheel",this.D9C_onWheel))}D88_suspend(){this.D95_animation&&this.D95_animation.isRunning&&this.D95_animation.stop(),this.C6A_deviceSubscription&&(this.C6A_deviceSubscription.offAll(),this.C6A_deviceSubscription=void 0)}EA3_computeNewState(t,e,i){const o=t?le(t,e).zoom:this.EB7_map.zoom;let s=o+i;if(t&&(s=(0,S.q)(s,t.startZoom-4,t.startZoom+4)),s=(0,S.q)(s,this.EB7_map.zoomRange.min,this.EB7_map.zoomRange.max),s=Math.round(s),s=Number(s.toFixed(2)),s!==o)return{startZoom:o,targetZoom:s,startTs:e,duration:this.zoomDuration}}B2C_updateWheelTrend(t){const e=this.EAA_currentWheelTrend,i=Math.sign(t);return!(Math.abs(i)<1e-10)&&(this.EAA_currentWheelTrend=i,!e||i===e)}}function le(t,e){const i=e-t.startTs,o=(0,S.q)(i/t.duration,0,1);return{zoom:t.startZoom+(t.targetZoom-t.startZoom)*o,dt:i}}const ce=.03;class de extends((0,g.GA)().with()){constructor(t,e,i){super(),this.FED_wheelAccumulator=0,this.C67_zoomPointCenterOffset=M.jQ,this.C6C_deltaZoom=0,this.ADC_prevFrameTimestamp=0,this.D9C_onWheel=t=>{this.FED_wheelAccumulator+=t,this.C67_zoomPointCenterOffset=M.lu(this.C63_zoomPointSource(),M.ZO(this.EB7_map.size,2)),this.D95_animation||(this.ADC_prevFrameTimestamp=Date.now(),this.D95_animation=this.EB7_map.animate(this.C77_animationStep),this.D95_animation.complete.finally((()=>{clearTimeout(this.B49_zoomEndTimer),this.B49_zoomEndTimer=window.setTimeout((()=>{this._emit("zoomEnd"),this.B49_zoomEndTimer=void 0}))})),clearTimeout(this.B49_zoomEndTimer),this.B49_zoomEndTimer=void 0,this._emit("zoomStart"))},this.C77_animationStep=t=>{this.FED_wheelAccumulator&&(Math.sign(this.FED_wheelAccumulator)!==Math.sign(this.C6C_deltaZoom)&&(this.C6C_deltaZoom=0),this.C6C_deltaZoom+=function(t,e){const i=Math.sign(t),o=Math.min(1,1/Math.abs(5.5*Math.abs(e)-1)),s=(0,S.q)(Math.abs(t)*o/600,.005,2);return i*s}(this.FED_wheelAccumulator,this.C6C_deltaZoom),this.FED_wheelAccumulator=0);const e=Date.now();if(e-this.ADC_prevFrameTimestamp>400||Math.abs(this.C6C_deltaZoom)<=.03){const e=t.zoom,i=(0,S.q)(e+this.C6C_deltaZoom,this.EB7_map.zoomRange.min,this.EB7_map.zoomRange.max);this.C6C_deltaZoom=0,this.D95_animation.stop(),this.D95_animation=void 0;const o=ae(this.C67_zoomPointCenterOffset,t,i),s=M.IH(t.worldCenter,o);return Object.assign(Object.assign({},t),{worldCenter:s,zoom:i})}let i;i=Math.abs(this.C6C_deltaZoom)>.12?.25*this.C6C_deltaZoom:Math.sign(this.C6C_deltaZoom)*ce,this.C6C_deltaZoom-=i;const o=(0,S.q)(t.zoom+i,this.EB7_map.zoomRange.min,this.EB7_map.zoomRange.max),s=ae(this.C67_zoomPointCenterOffset,t,o),n=M.IH(t.worldCenter,s);return this.ADC_prevFrameTimestamp=e,Object.assign(Object.assign({},t),{worldCenter:n,zoom:o})},this.EB7_map=t,this.B30_device=e,this.C63_zoomPointSource=i,this.A16_init()}get isInAction(){return void 0!==this.D95_animation&&this.D95_animation.isRunning}destroy(){this.D88_suspend()}enable(){this.A16_init()}disable(){this.D88_suspend()}A16_init(){this.C6A_deviceSubscription||(this.C6A_deviceSubscription=this.B30_device.on("wheel",this.D9C_onWheel))}D88_suspend(){this.D95_animation&&this.D95_animation.isRunning&&this.D95_animation.stop(),this.C6A_deviceSubscription&&(this.C6A_deviceSubscription.offAll(),this.C6A_deviceSubscription=void 0)}}const ue=Math.cos(Math.PI/6),_e=qt("ease-out");class pe{constructor(){this.EC6_history=[]}push(t){this.EC6_history.push({position:t,ts:Date.now()}),this.EC6_history.length>=30&&this.EC6_history.shift()}computeMovement(){const t=Date.now(),e=this.EC6_history.filter((e=>e.ts>=t-500));if(e.length<2||t-e[e.length-1].ts>=100)return null;const i=M.lu(e[e.length-2].position,e[e.length-1].position);if(M.pU(i,M.jQ,2))return null;M.Fv(i,i);let o=0;for(let s=e.length-1;s>=1;s--){const n=M.lu(e[s-1].position,e[s].position),r=M.kE(n);if(M.AK(n,i)/r<=ue)break;const a=(t-e[s].ts)/500;o+=r/Math.log2(2+a)}return M.Sm(i,Math.min(o,500))}}class me extends((0,g.GA)().with()){constructor(t,e){super(),this.EB7_map=t,this.D9E_dragger=e,this.D80_dragSubscription=this.B30_initDrag()}destroy(){this.FD4_stopAnimationIfAny(),this.FF2_stopAllSubscriptions()}enable(){this.D80_dragSubscription||(this.D80_dragSubscription=this.B30_initDrag())}disable(){this.FD4_stopAnimationIfAny(),this.FF2_stopAllSubscriptions(),this.D9E_dragger.isDragging&&this._emit("dragEnd")}get isInAction(){return void 0!==this.C65_dragAnimation&&this.C65_dragAnimation.isRunning}FF2_stopAllSubscriptions(){this.D83_dragEndSubscription&&(this.D83_dragEndSubscription.offAll(),this.D83_dragEndSubscription=void 0),this.D80_dragSubscription&&(this.D80_dragSubscription.offAll(),this.D80_dragSubscription=void 0)}B30_initDrag(){const t=this.D9E_dragger.group();return t.on("dragStart",(()=>{if(this.EB7_map.dragger.isDragging)return;this._emit("dragStart"),this.FD4_stopAnimationIfAny();const e=(0,o.XA)(this.D9E_dragger.dragStartingPoint,this.EB7_map),i=new pe;i.push(this.D9E_dragger.pointerPosition),t.on("dragMove",(()=>i.push(this.D9E_dragger.pointerPosition))),this.C65_dragAnimation=this.EB7_map.animate((t=>Object.assign(Object.assign({},t),{worldCenter:this.A11_computeWorldCenter(e)}))),this.D83_dragEndSubscription=this.D9E_dragger.on("dragEnd",(()=>{this.D83_dragEndSubscription.offAll();const t={worldCenter:this.A11_computeWorldCenter(e),zoom:this.EB7_map.zoom,azimuth:this.EB7_map.azimuth,tilt:this.EB7_map.tilt};this.EB7_map.setCamera(t),this.FD4_stopAnimationIfAny();const o=i.computeMovement();if(!o)return void this._emit("dragEnd");const s=v.B.convertPixelSizeToWorldSize(o,this.EB7_map.zoom),n=M.U1(s,t.azimuth),r=M.IH(this.EB7_map.worldCenter,n);this._emit("inertiaStart",{targetPositionWcs:r}),this.C65_dragAnimation=ee(this.EB7_map,n,400,_e),this.C65_dragAnimation.complete.finally((()=>this._emit("dragEnd")))}))})),t}FD4_stopAnimationIfAny(){this.C65_dragAnimation&&this.C65_dragAnimation.isRunning&&this.C65_dragAnimation.stop()}A11_computeWorldCenter(t){const e=(0,o.XA)(this.D9E_dragger.pointerPosition,this.EB7_map),i=M.lu(e,t);return M.lu(this.EB7_map.worldCenter,i)}}class ge extends((0,g.GA)().with()){constructor(t,e,i){super(),this.B38_isEnabled=!1,this.EC3_onDblClick=()=>{this.D7C_zoomOn(1)},this.A8F_onRightDblClick=()=>{this.D7C_zoomOn(-1)},this.EB7_map=t,this.D96_zoomDuration=e,this.FEB_zoomPointSrc=i,this.A16_init()}get isInAction(){return void 0!==this.D95_animation&&this.D95_animation.isRunning}destroy(){this.D88_suspend()}enable(){this.A16_init()}disable(){this.D88_suspend()}A16_init(){this.B38_isEnabled||(this.EB7_map.events.on("dblclick","any",this.EC3_onDblClick),this.EB7_map.events.on("rightdblclick","any",this.A8F_onRightDblClick),this.B38_isEnabled=!0)}D88_suspend(){this.B38_isEnabled&&(this.EB7_map.events.off("dblclick","any",this.EC3_onDblClick),this.EB7_map.events.off("rightdblclick","any",this.A8F_onRightDblClick)),this.D95_animation&&this.D95_animation.isRunning&&this.D95_animation.stop(),this.B38_isEnabled=!1}D7C_zoomOn(t){this._emit("zoomStart");const e=(0,o.wm)(this.FEB_zoomPointSrc(),this.EB7_map);this.D95_animation=te(this.EB7_map,this.EB7_map.zoom+t,this.D96_zoomDuration,e),this.D95_animation.complete.finally((()=>this._emit("zoomEnd")))}}class ye extends((0,g.GA)().with()){constructor(t,e,i){super(),this.rotationAllowed=!1,this.tiltAllowed=!1,this.A69_onTiltStart=()=>{if(!this.tiltAllowed)return this.B39_onPinchRotateStart();this.FD4_stopAnimationIfAny(),this._emit("tiltStart"),this.EB7_map.updateCameraOptions({enabledTiltTransition:!0});const t=this.EB7_map.tilt,e=this.EB7_map.animate((e=>{const i=t+Math.PI*this.A25_gestureRecognizer.panTiltDelta/this.EB7_map.size.y;return this._emit("tiltChanged"),Object.assign(Object.assign({},e),{tilt:i})})),i=this.A25_gestureRecognizer.on("gestureEnd",(()=>{i.offAll(),e.stop();const t=()=>{this._emit("tiltEnd"),this.EB7_map.updateCameraOptions({enabledTiltTransition:!1})},o=this.EB7_map.tilt<this.A64_tiltRange.min;if(o||this.EB7_map.tilt>this.A64_tiltRange.max){const e=o?this.A64_tiltRange.min:this.A64_tiltRange.max;this.D88_stopTiltAnimationIfAny(),this.B46_tiltAnimation=re(this.EB7_map,e,this.A34_tiltDuration),this.B46_tiltAnimation.complete.finally(t)}else t()}))},this.B39_onPinchRotateStart=()=>{this.FD4_stopAnimationIfAny(),this._emit("zoomStart");const t=this.EB7_map.zoom,e=this.EB7_map.azimuth,i=this.EB7_map.animate((i=>{const o=t+Math.log2(this.A25_gestureRecognizer.scale);let s;s=this.rotationAllowed?e+this.A25_gestureRecognizer.angle:i.azimuth;let n=i.worldCenter;if("zoomToCenter"===this.FD1_getZoomStrategy()){const t=ae(M.lu(this.D7D_getZoomPointSrc(),M.ZO(this.EB7_map.size,2)),i,o);n=M.IH(i.worldCenter,t)}return this._emit("zoomChanged"),Object.assign(Object.assign({},i),{worldCenter:n,azimuth:s,zoom:o})})),o=this.A25_gestureRecognizer.on("gestureEnd",(()=>{o.offAll(),i.stop();const t=Math.round(this.EB7_map.zoom),s=[];if(this.rotationAllowed&&Math.abs(this.A25_gestureRecognizer.angle)<this.A1F_rotateThreshold&&(this.FD5_stopRotateAnimationIfAny(),this.FCB_rotateAnimation=ne(this.EB7_map,-this.A25_gestureRecognizer.angle,e,this.D97_rotateDuration),s.push(this.FCB_rotateAnimation.complete)),this.snapToRound&&t!==this.EB7_map.zoom){let e;if(this.B35_stopZoomAnimationIfAny(),"zoomToCenter"===this.FD1_getZoomStrategy()){const[t,i]=this.EB7_map.center;e=this.EB7_map.projection.toWorldCoordinates([t,i])}this.FE4_zoomAnimation=te(this.EB7_map,t,this.D96_zoomDuration,e),s.push(this.FE4_zoomAnimation.complete)}s.length?Promise.all(s).finally((()=>this._emit("zoomEnd"))).catch((t=>(0,w.H)(t))):this._emit("zoomEnd")}))},this.EB7_map=t,this.snapToRound=i.snapToRound,this.D96_zoomDuration=i.zoomDuration,this.D97_rotateDuration=i.rotateDuration,this.A1F_rotateThreshold=i.rotateThreshold,this.A34_tiltDuration=i.tiltDuration,this.A64_tiltRange=i.tiltRange,this.D7D_getZoomPointSrc=i.getZoomPointSrc,this.FD1_getZoomStrategy=i.getZoomStrategy,this.A25_gestureRecognizer=e,this.A16_init()}destroy(){this.D88_suspend()}get isInAction(){var t,e,i;return Boolean((null===(t=this.FE4_zoomAnimation)||void 0===t?void 0:t.isRunning)||(null===(e=this.FCB_rotateAnimation)||void 0===e?void 0:e.isRunning)||(null===(i=this.B46_tiltAnimation)||void 0===i?void 0:i.isRunning))}enable(){this.A16_init()}disable(){this.D88_suspend()}A16_init(){this.C6A_deviceSubscription||(this.C6A_deviceSubscription=this.A25_gestureRecognizer.on("pinchRotateStart",this.B39_onPinchRotateStart).on("panTiltStart",this.A69_onTiltStart))}D88_suspend(){this.C6A_deviceSubscription&&(this.C6A_deviceSubscription.offAll(),this.C6A_deviceSubscription=void 0),this.FD4_stopAnimationIfAny()}FD4_stopAnimationIfAny(){this.B35_stopZoomAnimationIfAny(),this.FD5_stopRotateAnimationIfAny(),this.D88_stopTiltAnimationIfAny()}B35_stopZoomAnimationIfAny(){var t;(null===(t=this.FE4_zoomAnimation)||void 0===t?void 0:t.isRunning)&&(this.FE4_zoomAnimation.stop(),this.FE4_zoomAnimation=void 0)}FD5_stopRotateAnimationIfAny(){var t;(null===(t=this.FCB_rotateAnimation)||void 0===t?void 0:t.isRunning)&&(this.FCB_rotateAnimation.stop(),this.FCB_rotateAnimation=void 0)}D88_stopTiltAnimationIfAny(){var t;(null===(t=this.B46_tiltAnimation)||void 0===t?void 0:t.isRunning)&&(this.B46_tiltAnimation.stop(),this.B46_tiltAnimation=void 0)}}class fe extends((0,g.GA)().with()){constructor(t,e,i){super(),this.EBC_element=(0,P.E)("ymaps3x0--magnifier"),this.EC8_backdropElement=(0,P.E)("ymaps3x0--magnifier-backdrop"),this.A11_onDragStart=()=>{this.EBC_selectionInfo=this.C5D_computeSelectionInfo(),this.EB7_map.container.appendChild(this.EBC_element),document.body.appendChild(this.EC8_backdropElement),this.D9C_updateElementDimensions(this.EBC_selectionInfo),this._emit("selectionStart")},this.D85_onDragMove=()=>{this.EBC_selectionInfo&&(this.EBC_selectionInfo=this.C5D_computeSelectionInfo(),this.D9C_updateElementDimensions(this.EBC_selectionInfo))},this.A12_onDragEnd=()=>{this.EBC_selectionInfo&&(this.D95_animation=this.FDF_zoomByCurrentSelection(this.EBC_selectionInfo),this.D95_animation.complete.finally((()=>this._emit("selectionEnd"))),this.A1C_cleanupSelection()),setTimeout((()=>this.A21_detachBackdrop()))},this.EAE_onKeyDown=t=>{"Escape"===t.key&&this.EBC_selectionInfo&&(this._emit("selectionEnd"),this.A1C_cleanupSelection())},this.EC8_backdropElement.addEventListener("contextmenu",(t=>t.preventDefault())),this.EB7_map=t,this.D9E_dragger=e,this.snapToRound=i,this.A16_init()}destroy(){this.D88_suspend(),this.FDA_detachElement()}get isInAction(){return void 0!==this.D95_animation&&this.D95_animation.isRunning}enable(){this.A16_init()}disable(){this.D88_suspend()}A16_init(){this.D96_subscriptions||(document.addEventListener("keydown",this.EAE_onKeyDown),this.D96_subscriptions=this.D9E_dragger.group().on("dragStart",this.A11_onDragStart).on("dragMove",this.D85_onDragMove).on("dragEnd",this.A12_onDragEnd))}D88_suspend(){this.D95_animation&&this.D95_animation.isRunning&&this.D95_animation.stop(),document.removeEventListener("keydown",this.EAE_onKeyDown),this.D96_subscriptions&&(this.D96_subscriptions.offAll(),this.D96_subscriptions=void 0),this.A21_detachBackdrop()}A1C_cleanupSelection(){this.EBC_selectionInfo=void 0,this.FDA_detachElement()}FDA_detachElement(){this.EBC_element.parentNode&&this.EBC_element.parentNode.removeChild(this.EBC_element)}A21_detachBackdrop(){this.EC8_backdropElement.parentNode&&this.EC8_backdropElement.parentNode.removeChild(this.EC8_backdropElement)}D9C_updateElementDimensions({point:t,offset:e}){this.EBC_element.style.left=`${Math.round(t.x)}px`,this.EBC_element.style.top=`${Math.round(t.y)}px`,this.EBC_element.style.width=`${Math.abs(Math.round(e.x))}px`,this.EBC_element.style.height=`${Math.abs(Math.round(e.y))}px`,this.EBC_element.style.transform=`scale(${e.x<0?-1:1}, ${e.y<0?-1:1})`}FDF_zoomByCurrentSelection(t){const{center:e,zoom:i}=function({size:t,worldCenter:e,zoom:i,zoomRange:s,azimuth:n,tilt:r,fov:a},h,l){const c=(0,S.q)(Math.abs(h.offset.x),1e-10,t.x),d=(0,S.q)(Math.abs(h.offset.y),1e-10,t.y);let u=i+Math.min(Math.log2(t.x/c),Math.log2(t.y/d));l&&(u=Math.floor(u));const _=h.point,p=M.IH(h.point,h.offset),m=M.ZO(M.IH(_,p),2);return{zoom:Math.min(Math.max(u,s.min),s.max),center:(0,o.wm)(m,{size:t,worldCenter:e,zoom:i,azimuth:n,tilt:r,fov:a})}}(this.EB7_map,t,this.snapToRound);return ie(this.EB7_map,e,i,300)}C5D_computeSelectionInfo(){const{left:t,top:e}=this.EB7_map.container.getBoundingClientRect();return{point:M.lu(this.D9E_dragger.dragStartingPoint,{x:t,y:e}),offset:this.D9E_dragger.dragOffset}}}class Ce extends((0,g.GA)().with()){constructor(t,e,i,o){super(),this.B38_isEnabled=!1,this.A12_deviceStateChangedEventGroup=void 0,this.FCE_onClick=t=>{if(this.C72_dragEventGroup)return void this.FF0_destroyDragEvents();const e=M.Ue(t.x,t.y);this.C72_dragEventGroup=this.DA0_initDragEvents(e),window.clearTimeout(this.B35_clickTimer),this.B35_clickTimer=window.setTimeout((()=>{this.FF0_destroyDragEvents()}),300)},this.EB7_map=t,this.B30_device=e,this.D9E_dragger=i,this.zoomStrategy=o,this.A16_init()}destroy(){this.D88_suspend()}get isInAction(){return void 0!==this.D95_animation&&this.D95_animation.isRunning}enable(){this.A16_init()}disable(){this.D88_suspend()}A16_init(){this.B38_isEnabled||(this.AE6_addListeners(),this.B38_isEnabled=!0)}D88_suspend(){this.B38_isEnabled&&(window.clearTimeout(this.B35_clickTimer),this.FF0_destroyDragEvents(),this.C59_removeListeners(),this.D95_animation&&this.D95_animation.isRunning&&this.D95_animation.stop(),this.B38_isEnabled=!1)}AE6_addListeners(){if(this.A12_deviceStateChangedEventGroup)return;let t;this.A12_deviceStateChangedEventGroup=this.B30_device.on("stateChanged",(()=>{this.B30_device.state!==jt.PRIMARY?(t&&M.kE(M.lu(t,this.B30_device.pointerPosition))<=7&&this.FCE_onClick(t),t=void 0):t=this.B30_device.pointerPosition}))}C59_removeListeners(){this.A12_deviceStateChangedEventGroup&&(this.A12_deviceStateChangedEventGroup.offAll(),this.A12_deviceStateChangedEventGroup=void 0)}DA0_initDragEvents(t){const e=this.D9E_dragger.group();return e.on("dragStart",(()=>{let i=this.D9E_dragger.dragStartingPoint;window.clearTimeout(this.B35_clickTimer);M.kE(M.lu(t,i))>20||(this._emit("zoomStart"),e.on("dragMove",(()=>{const e=this.D9E_dragger.pointerPosition,s=M.lu(e,i);i=e;const n=s.y/this.EB7_map.size.y*10,r=this.EB7_map.zoom+n,a=this.EB7_map.zoomRange;if(r<a.min||r>a.max)return;const h="zoomToCenter"===this.zoomStrategy?this.EB7_map.worldCenter:(0,o.XA)(t,this.EB7_map);this.D95_animation=te(this.EB7_map,r,0,h)})),e.on("dragEnd",(()=>{this.FF0_destroyDragEvents(),this.D95_animation?this.D95_animation.complete.finally((()=>this._emit("zoomEnd"))):this._emit("zoomEnd")})))})),e}FF0_destroyDragEvents(){this.C72_dragEventGroup&&(this.C72_dragEventGroup.offAll(),this.C72_dragEventGroup=void 0)}}class Ee extends((0,g.GA)().with()){constructor(t,e){super(),this.B40_isRotateStartEmitted=!1,this.B2A_isTiltStartEmitted=!1,this.A12_state={type:0},this.rotationAllowed=!0,this.tiltAllowed=!0,this.A11_onDragStart=()=>{0===this.A12_state.type&&(this.A12_state={type:1,animation:this.EB7_map.animate(this.A14_onAnimationStep),previousPoint:this.D9E_dragger.dragStartingPoint})},this.D85_onDragMove=()=>{this.A12_state.type},this.A12_onDragEnd=()=>{1===this.A12_state.type&&(this.A12_state.animation.stop(),this.A12_state={type:0},this.C60_stopRotate(),this.ABD_stopTilt())},this.A14_onAnimationStep=t=>{if(1!==this.A12_state.type)return t;const e=M.lu(this.A12_state.previousPoint,this.D9E_dragger.pointerPosition);this.A12_state.previousPoint=this.D9E_dragger.pointerPosition;const i=this.rotationAllowed?Math.PI*e.x/this.EB7_map.size.x:0,o=this.tiltAllowed?Math.PI*e.y/this.EB7_map.size.y:0;return i&&!this.B40_isRotateStartEmitted&&(this._emit("rotateStart"),this.B40_isRotateStartEmitted=!0),o&&!this.B2A_isTiltStartEmitted&&(this._emit("tiltStart"),this.B2A_isTiltStartEmitted=!0),Object.assign(Object.assign({},t),{azimuth:t.azimuth+i,tilt:t.tilt+o})},this.EB7_map=t,this.D9E_dragger=e,this.A1F_draggerSubscription=this.D9E_dragger.on("dragStart",this.A11_onDragStart).on("dragMove",this.D85_onDragMove).on("dragEnd",this.A12_onDragEnd),this.enable()}get isInAction(){return 1===this.A12_state.type}enable(){this.A12_state={type:0}}disable(){this.stop(),this.A12_state={type:2}}stop(){1===this.A12_state.type&&(this.A12_state.animation.stop(),this.A12_state={type:0},this.C60_stopRotate(),this.ABD_stopTilt())}destroy(){this.disable(),this.A1F_draggerSubscription.offAll()}C60_stopRotate(){this.B40_isRotateStartEmitted&&(this._emit("rotateEnd"),this.B40_isRotateStartEmitted=!1)}ABD_stopTilt(){this.B2A_isTiltStartEmitted&&(this._emit("tiltEnd"),this.B2A_isTiltStartEmitted=!1)}}const Ae=18*E.Z;class ve extends((0,g.GA)().with()){constructor(t,e){super(),this.D96_subscriptions=[],this.EC1_zoomStrategy="zoomToPointer",this.B38_userEnabled=[],this.D91_mapEnabledRotation=!0,this.EA3_restoreDrag=()=>{-1!==this.B38_userEnabled.indexOf("drag")&&this.drag.enable()},this.A16_deviceEventsFilter=({target:e})=>{const i=e instanceof Element?t.findFeatureByElement(e):null;return Boolean(null==i?void 0:i.feature.blockBehaviors)};const i=function(t,e){let i=Rt.get(t);return i&&!i.destroyed||(i=(0,Bt.FB)()?new It(t,e):new Ft(t,e),Rt.set(t,i)),i}(t.container,{filter:this.A16_deviceEventsFilter});this.EB7_map=t;const s="snap"===this.EB7_map.effectiveZoomRounding;this.FEB_zoomPointSrc=()=>{if("zoomToCenter"===this.EC1_zoomStrategy){const[t,e]=this.EB7_map.center,i=this.EB7_map.projection.toWorldCoordinates([t,e]);return(0,o.k6)(i,this.EB7_map)}const e=i.pointerPosition,s=t.container.getBoundingClientRect();return{x:e.x-s.left,y:e.y-s.top}},this.A15_leftButtonDragger=new Yt(i),this.C64_rightButtonDragger=new Yt(i,{listenToButtons:new Set([jt.SECONDARY])}),this.magnifier=new fe(t,this.C64_rightButtonDragger,s),this.B46_proxyEvents(this.magnifier,"magnifier",["selectionStart","selectionEnd"]),this.drag=new me(t,this.A15_leftButtonDragger),this.B46_proxyEvents(this.drag,"drag",["dragStart","dragEnd"]),this.dblClick=new ge(t,200,this.FEB_zoomPointSrc),this.B46_proxyEvents(this.dblClick,"dblClick",["zoomStart","zoomEnd"]),this.magnifier.disable();const n={zoomDuration:200,rotateDuration:200,rotateThreshold:Ae,tiltDuration:200,getZoomStrategy:()=>this.EC1_zoomStrategy,getZoomPointSrc:this.FEB_zoomPointSrc,snapToRound:s,tiltRange:this.EB7_map.tiltRange};this.C67_twoFingersGesture=new Ut(i),this.pinchZoom=new ye(t,this.C67_twoFingersGesture,n),this.B46_proxyEvents(this.pinchZoom,"pinchZoom",["zoomStart","zoomEnd"]),this.B46_proxyEvents(this.pinchZoom,"panTilt",["tiltStart","tiltEnd"]);const r=this.pinchZoom.on("zoomStart",(()=>{"zoomToCenter"===this.EC1_zoomStrategy&&this.drag.disable()})).on("zoomEnd",this.EA3_restoreDrag).on("tiltStart",(()=>this.drag.disable())).on("tiltEnd",this.EA3_restoreDrag);this.D96_subscriptions.push(r),this.FE1_wheelDevice=new Ht(this.EB7_map.container,{filter:this.A16_deviceEventsFilter}),this.A18_roundScrollZoom=new he(this.EB7_map,this.FE1_wheelDevice,this.FEB_zoomPointSrc,200),this.B46_proxyEvents(this.A18_roundScrollZoom,"scrollZoom",["zoomStart","zoomEnd"]),this.C61_smoothScrollZoom=new de(this.EB7_map,this.FE1_wheelDevice,this.FEB_zoomPointSrc),this.B46_proxyEvents(this.C61_smoothScrollZoom,"scrollZoom",["zoomStart","zoomEnd"]),this.oneFingerZoom=new Ce(t,i,this.A15_leftButtonDragger,this.EC1_zoomStrategy),this.B46_proxyEvents(this.oneFingerZoom,"oneFingerZoom",["zoomStart","zoomEnd"]);const a=this.oneFingerZoom.on("zoomStart",(()=>this.drag.disable())).on("zoomEnd",this.EA3_restoreDrag);this.D96_subscriptions.push(a);const h=new Yt(i,{listenToButtons:new Set([jt.CTRL_PRIMARY,jt.CMD_PRIMARY])});this.rotate=new Ee(this.EB7_map,h),this.B46_proxyEvents(this.rotate,"mouseRotate",["rotateStart","rotateEnd"]),this.B46_proxyEvents(this.rotate,"mouseTilt",["tiltStart","tiltEnd"]),this.FEE_behaviorsRegistry={drag:this.drag,pinchZoom:this.pinchZoom,scrollZoom:s?this.A18_roundScrollZoom:this.C61_smoothScrollZoom,dblClick:this.dblClick,magnifier:this.magnifier,oneFingerZoom:this.oneFingerZoom,mouseRotate:!1,mouseTilt:!1,pinchRotate:!1,panTilt:!1},this.setEnabled(e),this._updateZoomRounding()}get isInAction(){for(const t of Object.keys(this.FEE_behaviorsRegistry))if("pinchRotate"!==t&&"panTilt"!==t&&"mouseRotate"!==t&&"mouseTilt"!==t&&this.FEE_behaviorsRegistry[t].isInAction)return!0;return!1}get zoomStrategy(){return this.EC1_zoomStrategy}destroy(){this.D96_subscriptions.forEach((t=>t.offAll())),this.drag.destroy(),this.pinchZoom.destroy(),this.dblClick.destroy(),this.magnifier.destroy(),this.oneFingerZoom.destroy(),this.rotate.destroy(),this.A18_roundScrollZoom.destroy(),this.C61_smoothScrollZoom.destroy(),this.A15_leftButtonDragger.destroy(),this.C64_rightButtonDragger.destroy(),this.C67_twoFingersGesture.destroy(),this.FE1_wheelDevice.destroy()}setEnabled(t){this.B38_userEnabled.splice(0,1/0,...t);for(const e of Object.keys(this.FEE_behaviorsRegistry))this.B34_setEnabledSingle(e,-1!==t.indexOf(e))}setZoomStrategy(t){this.EC1_zoomStrategy=t,this.oneFingerZoom.zoomStrategy=t}mapToggleRotation(t){this.D91_mapEnabledRotation=t,this.setEnabled(this.B38_userEnabled)}_updateZoomRounding(){const t="snap"===this.EB7_map.effectiveZoomRounding;this.magnifier.snapToRound=t,this.pinchZoom.snapToRound=t,t?(this.A18_roundScrollZoom.enable(),this.C61_smoothScrollZoom.disable(),this.FEE_behaviorsRegistry.scrollZoom=this.A18_roundScrollZoom):(this.A18_roundScrollZoom.disable(),this.C61_smoothScrollZoom.enable(),this.FEE_behaviorsRegistry.scrollZoom=this.C61_smoothScrollZoom)}B34_setEnabledSingle(t,e){"pinchRotate"===t?this.FEE_behaviorsRegistry.pinchZoom.rotationAllowed=this.D91_mapEnabledRotation&&e:"panTilt"===t?this.FEE_behaviorsRegistry.pinchZoom.tiltAllowed=this.D91_mapEnabledRotation&&e:"mouseRotate"===t?this.rotate.rotationAllowed=this.D91_mapEnabledRotation&&e:"mouseTilt"===t?this.rotate.tiltAllowed=this.D91_mapEnabledRotation&&e:e?this.FEE_behaviorsRegistry[t].enable():this.FEE_behaviorsRegistry[t].disable(),"scrollZoom"===t&&(e?this.FE1_wheelDevice.enable():this.FE1_wheelDevice.disable())}B46_proxyEvents(t,e,i){this.D96_subscriptions.push(t.on(i[0],(()=>this._emit("actionStart",e))).on(i[1],(()=>this._emit("actionEnd",e))))}}var Me=i(3488),De=i(16300);class xe extends((0,g.GA)().with()){constructor(){super(...arguments),this.element=(0,P.E)()}getLayerReadyState(){}destroy(){}update(){}resize(){}setLayers(){}setObjectFilters(){}setInvisibleCollidingPrimitives(){}findObjectInPosition(){return null}findObjectInPositionEx(){return{layers:[]}}preloadHotspotsInPoint(){}preloadHotspotsForViewport(){}setDataSources(){}getIndoorPlans(){return null}getVisibleObjects(){return null}getTile3dState(){return null}setObjectHighlight(){}setTileContentClippingGeometry(){}get fov(){return at.d$}}const Se={min:0,max:50*E.Z,expansion:10*E.Z};class be{constructor(t,e,i,o){this.A12_dataSources={},this.C57_layers=new Map,this.B2D_onMouseEnter=t=>{var e;if("feature"===t.type){const i=null===(e=this.A12_dataSources[t.source].features.get(t.feature.id))||void 0===e?void 0:e.style.cursor;void 0!==i&&(void 0===this.B4D_prevCursor&&(this.B4D_prevCursor=this.EBC_element.style.cursor),this.EBC_element.style.cursor=i)}},this.FEE_onMouseLeave=()=>{void 0!==this.B4D_prevCursor&&(this.EBC_element.style.cursor=this.B4D_prevCursor,this.B4D_prevCursor=void 0)},this.EB7_map=t,this.EBC_element=e,this.setDataSources(i),this.setLayers(o)}destroy(){this.C57_layers.forEach(((t,e)=>this.EB3_unsubscribeFromLayerEvents(e)))}setDataSources(t){this.A12_dataSources=Object.assign({},t)}setLayers(t){const e=new Set;for(const i of t)i.source in this.A12_dataSources&&e.add(i.id);const{result:i}=(0,k.B)(this.C57_layers,e,(t=>this.EC3_subscribeToLayerEvents(t)),((t,e)=>this.EB3_unsubscribeFromLayerEvents(e)));this.C57_layers=i}EC3_subscribeToLayerEvents(t){this.EB7_map.events.on("mouseenter",t,this.B2D_onMouseEnter),this.EB7_map.events.on("mouseleave",t,this.FEE_onMouseLeave)}EB3_unsubscribeFromLayerEvents(t){this.EB7_map.events.off("mouseenter",t,this.B2D_onMouseEnter),this.EB7_map.events.off("mouseleave",t,this.FEE_onMouseLeave)}}function we(t,e,i){const o=M.G7(v.B.pixelsToWorld(e,i),(t=>(0,S.q)(t,-1,1-1e-15)));return t.fromWorldCoordinates(o)}function je(t,e,i){const o=t.toWorldCoordinates(e);return v.B.worldToPixels(o,i)}function Be(t,e,i){const o=je(t,e[0],i),s=je(t,e[1],i),n=v.B.getWorldPixelSize(i),r=[[o.x,o.y],[s.x,s.y]];return o.x>s.x&&(r[0][0]=o.x,r[1][0]=s.x+n),o.y>s.y&&(r[0][1]=s.y,r[1][1]=o.y),r}function Le(t,e){return{x:Math.max(t.x-(e?e[1]+e[3]:0),1),y:Math.max(t.y-(e?e[0]+e[2]:0),1)}}function ze(t,e,i,o,s=!0,n=(0,m.oF)()){const r=function(t,e,i,o,s){const[[n,r],[a,h]]=Be(t,e,0),l=Math.max(Math.abs(a-n),1e-10),c=Math.max(Math.abs(h-r),1e-10),d=(0,S.q)(Math.min(Math.log2(i.x/l),Math.log2(i.y/c)),s.min,s.max);return o?Math.floor(d+1e-6):d}(t,e,Le(i,o),s,n),a=function(t,e,i){const[[o,s],[n,r]]=Be(t,e,i);return we(t,{x:(o+n)/2,y:(s+r)/2},i)}(t,e,r);return{center:a,zoom:r}}const Te={x:0,y:0},Ie=[25,25,25,25],Ne={pointer:{start:["pointerdown"],move:["pointermove"],end:["pointerup"]},touchMouse:{start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","mouseup"]}};class Fe extends((0,g.GA)().with()){constructor(t,e={tremorPixels:3}){super(),this._map=t,this.B2B_options=e,this.B46_filters=new Set,this.C71_draggableObjectPointer=null,this.D98_startDiff=null,this.EB2_startCursorPosition=null,this.C64_pointerPosition=Te,this.A12_state=0,this.C62_mapCenterOffsetWcs=Te,this.C5C_eventsNames=(0,Bt.FB)()?Ne.pointer:Ne.touchMouse,this.A11_onDragStart=(t,{screenCoordinates:e})=>{if(!t||"feature"!==t.type)return;const i=this.EA7_draggableObject(t);if(!this.C74_isDraggable(i))return;this.A12_state=1,this.C71_draggableObjectPointer=Object.assign({},t),this.EB2_startCursorPosition=e,this.C64_pointerPosition={x:e[0],y:e[1]};const s=Oe(i),n=(0,o.XA)({x:e[0],y:e[1]},this._map);this.D98_startDiff={world:M.lu(s,n),pixels:M.lu(v.B.worldToPixels(s,this._map.zoom),v.B.worldToPixels(n,this._map.zoom))},this.C5C_eventsNames.move.forEach((t=>{this._map.events.on(t,"any",this.FCD_onDrag)})),this.C5C_eventsNames.end.forEach((t=>{window.addEventListener(t,this.A12_onDragEnd)}))},this.FCD_onDrag=(t,{screenCoordinates:e})=>{ymaps3.strictMode&&(0,b.h)(null!==this.C71_draggableObjectPointer,"The dragged object must exist"),ymaps3.strictMode&&(0,b.h)(null!==this.EB2_startCursorPosition,"Cursor start coordinates must be defined");const i=this.EA7_draggableObject(this.C71_draggableObjectPointer);if(!i)return this.A12_onDragEnd();this.C64_pointerPosition={x:e[0],y:e[1]};const s=(0,o.XA)(this.C64_pointerPosition,this._map),n=this.B49_getNewGeometry(s,i);if(1===this.A12_state){if(Math.max(Math.abs(this.EB2_startCursorPosition[0]-e[0]),Math.abs(this.EB2_startCursorPosition[1]-e[1]))>this.B2B_options.tremorPixels){!1!==this._emit("dragStart",{object:i,newGeometry:n})&&(this.A12_state=2,this._map.on("update",this.A15_onMapUpdate))}}else{this.EB2_startCursorPosition=e;!1!==this._emit("dragMove",{object:i,newGeometry:n})&&(this.ECA_updateCoordinates(n,i),this.B2F_dragMapFollowerHandler())}},this.A15_onMapUpdate=()=>{this.FCD_onDrag(null,{screenCoordinates:[this.C64_pointerPosition.x,this.C64_pointerPosition.y]})},this.A12_onDragEnd=()=>{if(0!==this.A12_state){if(this.FEF_stopMapDragFollowAnimation(),this.C5C_eventsNames.move.forEach((t=>{this._map.events.off(t,"any",this.FCD_onDrag)})),this.C5C_eventsNames.end.forEach((t=>{window.removeEventListener(t,this.A12_onDragEnd)})),this._map.offSingle("update",this.A15_onMapUpdate),2===this.A12_state){const t=this.EA7_draggableObject(this.C71_draggableObjectPointer);t&&this._emit("dragEnd",{object:t,newGeometry:t.geometry})}this.C71_draggableObjectPointer=null,this.A12_state=0}},this.C5C_eventsNames.start.forEach((t=>{this._map.events.on(t,"any",this.A11_onDragStart)}))}destroy(){this.C5C_eventsNames.start.forEach((t=>{this._map.events.off(t,"any",this.A11_onDragStart)})),this.A12_onDragEnd(),this.FEF_stopMapDragFollowAnimation()}get filters(){const t=[];return this.B46_filters.forEach((e=>{t.push(e)})),t}get isDragging(){return this.A12_state>0}addFilter(t){return this.B46_filters.add(t),this}removeFilter(t){return this.B46_filters.delete(t),this}EA7_draggableObject(t){return t?"feature"===t.type?this._map.getFeatureInWorldCoordinatesById(t.source,t.feature.id):void(0,w._y)(new Error(`Need implementation for type: ${t.type}`)):null}C74_isDraggable(t){if(!t||!this.B46_filters.size)return!1;let e=!1;return this.B46_filters.forEach((i=>{i(t)&&(e=!0)})),e}B49_getNewGeometry(t,e){if(ymaps3.strictMode&&(0,b.h)(null!==this.C71_draggableObjectPointer,"The dragged object must exist"),ymaps3.strictMode&&(0,b.h)(null!==this.D98_startDiff,"Need difference between cursor coordinates and object start"),ymaps3.strictMode&&(0,b.h)("Feature"===e.type,`Need implementation for type: ${e.type}`),"Point"===e.geometry.type)return this.EB5_calculateWorldWithPixelFixedOffset(t);const i=M.lu(Oe(e),M.IH(t,this.D98_startDiff.world));return(0,y.ZE)(e.geometry,(t=>M.lu(t,i)))}ECA_updateCoordinates(t,e){ymaps3.strictMode&&(0,b.h)(null!==this.C71_draggableObjectPointer,"The dragged object must exist"),ymaps3.strictMode&&(0,b.h)(null!==this.D98_startDiff,"Need difference between cursor coordinates and object start"),ymaps3.strictMode&&(0,b.h)("Feature"===e.type,`Need implementation for type: ${e.type}`),e.geometry.coordinates=t.coordinates,this._map.updateInWorldCoordinatesFeature(this.C71_draggableObjectPointer.source,e)}EB5_calculateWorldWithPixelFixedOffset(t){ymaps3.strictMode&&(0,b.h)(null!==this.D98_startDiff,"Need difference between cursor coordinates and object start");const e=v.B.worldToPixels(t,this._map.zoom);return{type:"Point",coordinates:v.B.pixelsToWorld(M.IH(e,this.D98_startDiff.pixels),this._map.zoom)}}B2F_dragMapFollowerHandler(){const t=this.EA7_draggableObject(this.C71_draggableObjectPointer);if(!t||!t.mapFollowsOnDrag)return;const e=this._map;if(!e||!this.isDragging)return void this.FD9_setMapCenterOffsetWcs(Te);const i="boolean"!=typeof t.mapFollowsOnDrag&&t.mapFollowsOnDrag.activeZoneMargin?[...t.mapFollowsOnDrag.activeZoneMargin]:Ie.slice();e.margin&&(i[0]+=e.margin[0],i[1]+=e.margin[1],i[2]+=e.margin[2],i[3]+=e.margin[3]);const o=e.container.getBoundingClientRect(),s={x:o.width,y:o.height};s.x-=i[1]+i[3],s.y-=i[0]+i[2];const n=function(t,e,i){const o=M.ZO(t,2),s=M.lu(i,e);if(s.x>-o.x&&s.x<o.x&&s.y>-o.y&&s.y<o.y)return{x:0,y:0};const n={x:0,y:0};if(0===s.x)n.x=0,n.y=o.y*Math.sign(s.y);else{const t=s.y/s.x,e=t*o.x;if(e>=-o.y&&e<=o.y){const t=Math.sign(s.x);n.x=o.x*t,n.y=e*t}else{const e=1/t*o.y,i=Math.sign(s.y);n.x=e*i,n.y=o.y*i}}return M.lu(s,n)}(s,M.IH(M.ZO(s,2),{x:i[3],y:i[0]}),M.lu(this.C64_pointerPosition,{x:o.left,y:o.top}));M.ZO(n,2,n);const r=M.kE(n);r>120&&M.Sm(n,120/r,n),this.FD9_setMapCenterOffsetWcs(v.B.convertPixelSizeToWorldSize(n,e.zoom))}D9C_animateMap(){if(!this._hasOffset||!this.isDragging)return;const t=this._map,e=this.EA7_draggableObject(this.C71_draggableObjectPointer);e&&(this.EA4_mapDragFollowHandler=this._map.animate((()=>(this.ECA_updateCoordinates((0,y.ZE)(e.geometry,(t=>M.IH(t,this.C62_mapCenterOffsetWcs))),e),{worldCenter:M.IH(this.C62_mapCenterOffsetWcs,t.worldCenter),azimuth:t.azimuth,zoom:t.zoom,tilt:t.tilt,fov:t.fov}))))}FEF_stopMapDragFollowAnimation(){var t;(null===(t=this.EA4_mapDragFollowHandler)||void 0===t?void 0:t.isRunning)&&this.EA4_mapDragFollowHandler.stop()}FD9_setMapCenterOffsetWcs({x:t,y:e}){var i;this.C62_mapCenterOffsetWcs.x===t&&this.C62_mapCenterOffsetWcs.y===e||(this.C62_mapCenterOffsetWcs={x:t,y:e},null===(i=this.FEF_stopMapDragFollowAnimation)||void 0===i||i.call(this),this.D9C_animateMap())}get _hasOffset(){return 0!==this.C62_mapCenterOffsetWcs.x||0!==this.C62_mapCenterOffsetWcs.y}}function Oe(t){switch(ymaps3.strictMode&&(0,b.h)("Feature"===t.type,`Need implementation for type: ${t.type}`),t.geometry.type){case"Point":return t.geometry.coordinates;case"LineString":return t.geometry.coordinates[0];case"Polygon":case"MultiLineString":return t.geometry.coordinates[0][0];case"MultiPolygon":return t.geometry.coordinates[0][0][0]}}var Re=i(23771),Pe=i(81703);const ke=Math.round,Ye=Math.round,Ze="ymaps3x0--main-engine-container",Ue="ymaps3x0--hide",We="ymaps3";class Ge extends((0,g.GA)().with()){get projection(){return this.EAE_projection}constructor(t){super(),this.C57_renderLoop=new f.d,this.A12_dataSources={},this.B46_filters=new Set,this.C64_invisibleCollidingPrimitives=new Map,this.A26_collidingGeometriesBySource=new Map,this.B3B_topRasterLayers=[],this.C77_mainLayers=[],this.B42_vectorFailed=!1,this.EA4_featuresByDataSource=new Map,this.C5F_cameraOptions={enabledTiltTransition:!1},this.A1E_destroyed=!1,this.container=(0,P.E)("ymaps3x0--map");const{element:e,dataSources:i,topRasterLayers:o,mainLayers:s,mode:n,margin:r,tiltRange:a,zoomRange:h,zoomRounding:l="auto",behaviors:c=["drag","scrollZoom","pinchZoom","dblClick","magnifier"],projection:d=Me.L,worldOptions:u={cycledX:!0,cycledY:!1},restrictMapArea:_=!1,eventObjectsFilter:p,experiments:g={},nonRotatableRasterSources:y=[],metricsTransport:E=(()=>{}),tilt:A=0,azimuth:v=0}=t;var M;M=E,F||(F=M),this.EBB_experiments=g,this.EAE_projection=d,this.worldOptions=u,this.FDE_restrictMapArea=_,this.EB7_worldRestrictMapArea=this.FDE_restrictMapArea&&this.FDE_restrictMapArea.map((t=>d.toWorldCoordinates(t))),this.B3F_nonRotatableRasterSources=new Set(y),this.tiltRange=null!=a?a:Se,this.EB3_topEngineContainer=(0,P.E)("ymaps3x0--top-engine-container"),this.EB8_mainEngineContainer=(0,P.E)(Ze),this.container.appendChild(this.EB8_mainEngineContainer),this.container.appendChild(this.EB3_topEngineContainer),e.appendChild(this.container);const{size:D,offset:x}=Qe(this.container.parentElement);this.A11_size=D,this.B4B_offset=x,this.B4C_resizeContainer(),this.A14_zoomRange=h?Object.assign({},h):(0,m.oF)(),this.D8F_zoomRounding=l,"raster"===n&&(this.C63_effectiveZoomRounding="snap"),this.EAD_margin=r;const{bounds:S,center:b,zoom:w}=t;this.A26_camera=this.C76_createCamera(S,b,w,v,A),this.FEB_effectiveMode=null,this.FF2_desiredMode=n,this.EC1_dataSourceDescriptions={};for(const t of Object.keys(i)){this.EC1_dataSourceDescriptions[t]=(0,C.wo)(i[t]);const e=this.ECA_createDataSource(this.EC1_dataSourceDescriptions[t]);null!==e&&(this.A12_dataSources[t]=e)}Ve(this.A14_zoomRange,this.EC1_dataSourceDescriptions),this.C77_mainLayers=He(s,i),this.B3B_topRasterLayers=He(o,i),this.EB1_assertLayersIsValid(this.B3B_topRasterLayers,this.C77_mainLayers);const{topEngine:j,eventGroup:B}=this.EC3_createTopEngine();this.C6B_topRasterEngine=j,this.EB6_topRasterEngineEventGroup=B,this.EBB_applyMode(),this.events=new De.Q(this,p),this.behaviors=new ve(this,c),this.dragger=new Fe(this),this.dragger.addFilter((t=>"Feature"===(null==t?void 0:t.type)&&Boolean(t.draggable))),this.EB6_subscribeToDomEvents(),this.FD7_handleRotatability(),this.EA9_update(),this.on("ready",(()=>{this.C6B_topRasterEngine.animateFirstScreen=!0,"raster"===this.C53_mainEngine.type&&(this.C53_mainEngine.engine.animateFirstScreen=!0)}))}C76_createCamera(t,e,i,o=0,s=0){t&&({center:e,zoom:i}=ze(this.projection,t,this.size,this.margin,"snap"===this.effectiveZoomRounding,this.zoomRange));const n=D(this.projection,e,i,o,this.margin),r=v.B.restrictToZeroWorld(n,this.worldOptions);return this.D90_restrictCamera({zoom:i,worldCenter:r,azimuth:o,tilt:s})}get size(){return this.A11_size}get offset(){return this.B4B_offset}get center(){return this.calculateCenter(this.A26_camera.worldCenter)}get worldCenter(){return this.A26_camera.worldCenter}get zoom(){return this.A26_camera.zoom}get bounds(){return function(t,e,i,o,s){const n=Le(o,s),r=je(t,e,i),a={x:r.x-n.x/2,y:r.y-n.y/2},h={x:r.x+n.x/2,y:r.y+n.y/2};return[we(t,a,i),we(t,h,i)]}(this.projection,this.center,this.zoom,this.size,this.margin)}get tilt(){return this.A26_camera.tilt}get azimuth(){return this.A26_camera.azimuth}get camera(){return this.A26_camera}get fov(){var t,e;return null!==(e=null===(t=this.C53_mainEngine)||void 0===t?void 0:t.engine.fov)&&void 0!==e?e:A}get zoomRange(){let t=Object.assign({},this.A14_zoomRange);const e=[...this.B3B_topRasterLayers,...this.C77_mainLayers];for(const i of e)if(i.source&&i.source!==z){const e=this.EC1_dataSourceDescriptions[i.source];"tile"===e.type&&e.clampMapZoom&&(t=(0,m.Hx)(t,e.zoomRange||this.A14_zoomRange))}return t}get destroyed(){return this.A1E_destroyed}get isInAction(){return Boolean(this.EA6_animateHandler&&this.EA6_animateHandler.isRunning||this.behaviors&&this.behaviors.isInAction||this.FEF_animateHandlerAzimuth&&this.FEF_animateHandlerAzimuth.isRunning||this.D7A_animateHandlerTilt&&this.D7A_animateHandlerTilt.isRunning)}get restrictMapArea(){return this.FDE_restrictMapArea}get zoomRounding(){return this.D8F_zoomRounding}setZoomRounding(t){t!==this.D8F_zoomRounding&&(this.D8F_zoomRounding=t,this.D91_chooseEffectiveZoomRounding())}get effectiveZoomRounding(){return this.C63_effectiveZoomRounding}addObjectFilter(t){this.B46_filters.add(t),this.ABA_applyFilters()}removeObjectFilter(t){this.B46_filters.delete(t),this.ABA_applyFilters()}getInvisibleCollidingPrimitives(){return this.C64_invisibleCollidingPrimitives}addInvisibleCollidingPrimitives(t){t.forEach(((t,e)=>{this.C64_invisibleCollidingPrimitives.set(e,{anchor:this.projection.toWorldCoordinates(t.anchor),rect:t.rect})})),this.D83_applyInvisibleCollidingPrimitives()}removeInvisibleCollidingPrimitives(t){t.forEach((t=>{this.C64_invisibleCollidingPrimitives.delete(t)})),this.D83_applyInvisibleCollidingPrimitives()}setObjectHighlight(t){this.C53_mainEngine.engine.setObjectHighlight(t),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.setObjectHighlight(t)}calculateCenter(t){return function(t,e,i,o,s){if(s){const t=x(s,i,o);e=M.IH(e,t)}return t.fromWorldCoordinates(e)}(this.projection,t,this.A26_camera.zoom,this.A26_camera.azimuth,this.EAD_margin)}setProjection(t){this.EAE_projection=t,this.EA9_update()}setCamera(t){const{worldCenter:e,zoom:i}=t;isFinite(e.x)&&isFinite(e.y)||(0,w._y)(new Error("Trying to set non-finite center")),isFinite(i)||(0,w._y)(new Error("Trying to set non-finite zoom")),this.A26_camera=this.D90_restrictCamera(Object.assign(Object.assign({},t),{zoom:i})),this.EA9_update()}animate(t){const e=this.C57_renderLoop.animate((e=>{const i=this.A26_camera,o=t(i,e);o!==i&&this.setCamera(o)}));return e.complete.then((()=>this._emit("update"))),e}animateForDuration(t,e){let i=0;const o=this.C57_renderLoop.animateForDuration((t=>{const o=t-i;i=t;const s=this.A26_camera,n=e(s,t,o);n!==s&&this.setCamera(n)}),t);return o.complete.then((()=>this._emit("update"))),o}setZoomRange(t){Ve(t,this.EC1_dataSourceDescriptions),this.A14_zoomRange=Object.assign({},t),this._emit("zoomRangeChange")}getMode(){return this.FF2_desiredMode}getEffectiveMode(){return this.FEB_effectiveMode}setMode(t){this.FF2_desiredMode!==t&&(this.FF2_desiredMode=t,this.EBB_applyMode())}get margin(){if(this.EAD_margin)return this.EAD_margin}setMargin(t){this.EAD_margin=t,this._emit("update")}setCenter(t){this.setCenterAndZoom(t,this.zoom)}setCenterAndZoom(t,e){const i=D(this.projection,t,e,this.A26_camera.azimuth,this.EAD_margin);M.pU(i,this.A26_camera.worldCenter,at.YQ)&&e===this.A26_camera.zoom||this.setCamera(Object.assign(Object.assign({},this.A26_camera),{worldCenter:i,zoom:e,azimuth:0,tilt:0}))}setZoom(t){this.setCenterAndZoom(this.center,t)}setBounds(t){const{center:e,zoom:i}=ze(this.projection,t,this.size,this.margin,"snap"===this.effectiveZoomRounding,this.zoomRange);this.setCenterAndZoom(e,i)}setRestrictMapArea(t){this.FDE_restrictMapArea=t,this.EB7_worldRestrictMapArea=this.FDE_restrictMapArea&&this.FDE_restrictMapArea.map((t=>this.projection.toWorldCoordinates(t)))}animateCenterAndZoom(t,e,i,o){this.EA6_animateHandler&&this.EA6_animateHandler.isRunning&&this.EA6_animateHandler.stop();const s=this.zoomRange,n=(0,S.q)(e,s.min,s.max),r=D(this.projection,t,e,this.A26_camera.azimuth,this.EAD_margin),a=v.B.moveCloseToCenter(r,this.A26_camera.worldCenter);return this.EA6_animateHandler=ie(this,a,n,i,o),this.EA6_animateHandler.complete}animateTilt(t,e,i){return this.D7A_animateHandlerTilt&&this.D7A_animateHandlerTilt.isRunning&&this.D7A_animateHandlerTilt.stop(),e?(this.D7A_animateHandlerTilt=re(this,null!=t?t:0,e,i),this.D7A_animateHandlerTilt.complete):(this.setCamera(Object.assign(Object.assign({},this.camera),{tilt:t})),Promise.resolve())}animateAzimuth(t,e,i){return this.FEF_animateHandlerAzimuth&&this.FEF_animateHandlerAzimuth.isRunning&&this.FEF_animateHandlerAzimuth.stop(),e?(this.FEF_animateHandlerAzimuth=ne(this,t-this.azimuth,t,e,i),this.FEF_animateHandlerAzimuth.complete):(this.setCamera(Object.assign(Object.assign({},this.camera),{azimuth:t})),Promise.resolve())}getLayerReadyState(t){const e=this.C6B_topRasterEngine.getLayerReadyState(t),i=this.C53_mainEngine.engine.getLayerReadyState(t);return e||i}getLayerState(t,e,i){i||(i="vector"===this.A1B_getEffectiveMode()?"vector":"raster");const o=this.C53_mainEngine;if(o.type!==i&&"transitionToVector"!==o.type&&"preVector"!==o.type)return;let s=o.engine;return"transitionToVector"===o.type&&"vector"===i&&(s=o.vector.engine),s.getLayerReadyState(t,e)}destroy(){this.A1E_destroyed||(this._emit("beforeDestroy"),this.dragger.destroy(),this.events.destroy(),this.behaviors.destroy(),this.D91_destroyMainEngine(),this.EB6_topRasterEngineEventGroup.offAll(),this.C6B_topRasterEngine.destroy(),this.container.removeChild(this.EB3_topEngineContainer),this.container.removeChild(this.EB8_mainEngineContainer),this.container.parentElement.removeChild(this.container),this.A1E_destroyed=!0)}resize(t=!1,e=!1){const{size:i,offset:o}=Qe(this.container.parentElement);if(M.wy(i,this.A11_size))return;let s=this.A26_camera.worldCenter;if(t){const t=M.ZO(M.lu(i,this.A11_size),2);M.U1(t,this.A26_camera.azimuth,t);const e=v.B.convertPixelSizeToWorldSize({x:t.x,y:-t.y},this.A26_camera.zoom);s=M.lu(this.A26_camera.worldCenter,e)}const n=v.B.convertPixelSizeToWorldSize(M.ZO(i,2),this.A26_camera.zoom);s={x:s.x,y:(0,S.q)(s.y,-1-n.y,1+n.y)},M.wy(s,this.A26_camera.worldCenter)||this.setCamera(Object.assign(Object.assign({},this.A26_camera),{worldCenter:s})),this.A11_size=i,this.B4B_offset=o,this.B4C_resizeContainer(),this.C6B_topRasterEngine.resize(this.A11_size),this.C53_mainEngine.engine.resize(this.A11_size),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.resize(this.A11_size),this._emit("resize"),e?this.renderImmediately():this.C57_renderLoop.update()}B4C_resizeContainer(){this.container.style.width=this.A11_size.x+"px",this.container.style.height=this.A11_size.y+"px"}addGroup(t,e,i={},o=ht.oR){this.B33_getFeaturesDataSource(t).addGroup(e,i,o)}removeGroupAndChildren(t,e){this.B33_getFeaturesDataSource(t).removeGroupAndChildren(e)}addFeature(t,e,i={},o=ht.oR){const{feature:s,bbox:n}=this.D91_convertFeatureToWorld(e);this.B33_getFeaturesDataSource(t).addFeature(s,i,n,o),this.D7C_getFeaturesForDataSource(t).set(e.id,e)}addFeatureInWorldCoordinates(t,e,i={},o=ht.oR){const{feature:s,bbox:n}=this.EC1_convertFeatureToGeo(e);this.B33_getFeaturesDataSource(t).addFeature(e,i,n,o),this.D7C_getFeaturesForDataSource(t).set(e.id,s)}getFeatureById(t,e){var i;const o=this.D7C_getFeaturesForDataSource(t);return o.has(e)&&null!==(i=o.get(e))&&void 0!==i?i:null}getFeatureInWorldCoordinatesById(t,e){var i,o;return null!==(o=null===(i=this.B33_getFeaturesDataSource(t).getFeatureById(e))||void 0===i?void 0:i.feature)&&void 0!==o?o:null}removeFeatureById(t,e){this.B33_getFeaturesDataSource(t).removeFeatureById(e),this.D7C_getFeaturesForDataSource(t).delete(e)}updateFeature(t,e,i){const{feature:o,bbox:s}=this.D91_convertFeatureToWorld(e);this.B33_getFeaturesDataSource(t).updateFeature(o,s,i),this.D7C_getFeaturesForDataSource(t).set(e.id,e)}updateInWorldCoordinatesFeature(t,e,i){const{feature:o,bbox:s}=this.EC1_convertFeatureToGeo(e);this.B33_getFeaturesDataSource(t).updateFeature(e,s,i),this.D7C_getFeaturesForDataSource(t).set(e.id,o)}upsertFeature(t,e,i={},o=ht.oR){const s=this.B33_getFeaturesDataSource(t),{feature:n,bbox:r}=this.D91_convertFeatureToWorld(e);s.hasFeatureWithId(e.id)?(s.updateFeature(n,r,i),s.moveFeatureToGroup(e.id,o)):s.addFeature(n,i,r,o),this.D7C_getFeaturesForDataSource(t).set(e.id,e)}moveFeatureToGroup(t,e,i=ht.oR){return this.B33_getFeaturesDataSource(t).moveFeatureToGroup(e,i)}hasFeature(t,e){return this.B33_getFeaturesDataSource(t).hasFeatureWithId(e)}addTile3d(t,e){this.EB7_getTile3dDataSource(t).addRootTile(e)}replaceTile3d(t,e){this.EB7_getTile3dDataSource(t).replaceRootTile(e)}removeTile3d(t,e){this.EB7_getTile3dDataSource(t).removeRootTile(e)}showTile3d(t,e){this.EB7_getTile3dDataSource(t).showRootTile(e)}hideTile3d(t,e){this.EB7_getTile3dDataSource(t).hideRootTile(e)}changeTile3dTextures(t,e,i){this.EB7_getTile3dDataSource(t).changeRootTileTextures(e,i)}getTile3dTexturesTiers(t,e){return this.EB7_getTile3dDataSource(t).getRootTileTexturesTiers(e)}getTile3dState(t,e){return"vector"===this.C53_mainEngine.type?this.C53_mainEngine.engine.getTile3dState(t,e):"transitionToVector"===this.C53_mainEngine.type?this.C53_mainEngine.vector.engine.getTile3dState(t,e):null}setTileContentClippingGeometry(t,e){var i,o;const s=this.C56_getDataSourceById(t);if(ymaps3.strictMode&&(0,b.h)(s instanceof O.Nt,`"${t}" must be TileDataSource`),!e)return this.A26_collidingGeometriesBySource.delete(t),void(null===(i=this.FE6_getVectorEngine())||void 0===i||i.setTileContentClippingGeometry(this.A26_collidingGeometriesBySource));const n={type:"MultiPolygon",coordinates:("Polygon"===e.type?[e.coordinates]:e.coordinates).map((t=>t.map((t=>t.map((t=>this.EAE_projection.toWorldCoordinates(t)))))))};this.A26_collidingGeometriesBySource.set(t,n),null===(o=this.FE6_getVectorEngine())||void 0===o||o.setTileContentClippingGeometry(this.A26_collidingGeometriesBySource)}FE6_getVectorEngine(){return"vector"===this.C53_mainEngine.type?this.C53_mainEngine.engine:"transitionToVector"===this.C53_mainEngine.type?this.C53_mainEngine.vector.engine:null}setLayers({topRasterLayers:t,mainLayers:e}){t&&(this.B3B_topRasterLayers=He(t,this.EC1_dataSourceDescriptions)),e&&(this.C77_mainLayers=He(e,this.EC1_dataSourceDescriptions)),this.EB1_assertLayersIsValid(this.B3B_topRasterLayers,this.C77_mainLayers),this.C6B_topRasterEngine.setLayers(this.B3B_topRasterLayers);"vector"===this.C53_mainEngine.type&&this.C53_mainEngine.initLayersTimer||this.A79_setMainEngineLayers(this.C77_mainLayers),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.setLayersAbortController&&this.C53_mainEngine.vector.engine.setLayers(this.C77_mainLayers),this.D91_chooseEffectiveZoomRounding(),this.FD7_handleRotatability(),this._emit("update"),this._emit("copyrightsChange")}getLayers(){return{topRasterLayers:this.B3B_topRasterLayers.map($e),mainLayers:this.C77_mainLayers.map($e)}}getLayersEx(){return{topRasterLayers:this.B3B_topRasterLayers.map((t=>Object.assign({},t))),mainLayers:this.C77_mainLayers.map((t=>Object.assign({},t)))}}getDataSource(t){const e=this.EC1_dataSourceDescriptions[t];return e?(0,C.wo)(e):void 0}addDataSource(t,e,i){this.EC1_dataSourceDescriptions[t]=(0,C.wo)(e);const o=this.ECA_createDataSource(this.EC1_dataSourceDescriptions[t],i);null!==o&&(this.A12_dataSources[t]=o),this.EBF_setEngineDataSources(this.A12_dataSources)}removeDataSource(t){[...this.C77_mainLayers,...this.B3B_topRasterLayers].some((e=>e.source===t))&&(0,w._y)(new Error(`Can't remove, data source with id="${t} is used"`)),delete this.EC1_dataSourceDescriptions[t],delete this.A12_dataSources[t],this.EBF_setEngineDataSources(this.A12_dataSources)}updateTileDataSource(t,e){const i=this.C62_getTileDataSource(t),o=(0,C.wo)(e);this.EC1_dataSourceDescriptions[t]=o,i.setSource(o),Ve(this.A14_zoomRange,this.EC1_dataSourceDescriptions),this._emit("zoomRangeChange"),this._emit("copyrightsChange")}updateTile3dDataSource(t,e){const i=this.EB7_getTile3dDataSource(t),o=(0,C.wo)(e);i.setSource(o)}provideVectorMapEngineFactory(t){this.C52_vectorMapEngineFactory=t,this._emit("vectorLoad"),"raster"!==this.FF2_desiredMode&&this.EBB_applyMode()}isVectorMapEngineFactoryProvided(){return Boolean(this.C52_vectorMapEngineFactory)}findFeatureByElement(t){const e=this.C6B_topRasterEngine.findFeatureByElement(t);if(e){const t=this.D7C_getFeaturesForDataSource(e.source).get(e.feature.id);return{type:"feature",layer:e.layer,source:e.source,feature:t}}return null}findObjectInWorldPosition(t){const e=this.C6B_topRasterEngine.findObjectInPosition(t)||this.C53_mainEngine.engine.findObjectInPosition(t);return this.EBB_toMapObject(e)||null}findObjectInWorldPositionEx(t){const e=this.C6B_topRasterEngine.findObjectInPositionEx(t),i=e.layers.find((t=>t.object))?{layers:[]}:this.C53_mainEngine.engine.findObjectInPositionEx(t);return{layers:[...e.layers.map((({layer:t,object:e})=>({layer:t,object:this.EBB_toMapObject(e)}))),...i.layers.map((({layer:t,object:e})=>({layer:t,object:this.EBB_toMapObject(e)})))]}}renderImmediately(t=f._.FULL){this.C57_renderLoop.renderImmediately(t)}preloadHotspotsInPoint(t){const e=v.B.restrictToZeroWorld(t,this.worldOptions);this.C6B_topRasterEngine.preloadHotspotsInPoint(e),this.C53_mainEngine.engine.preloadHotspotsInPoint(e),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.preloadHotspotsInPoint(t)}preloadHotspotsForViewport(){this.C6B_topRasterEngine.preloadHotspotsForViewport(),this.C53_mainEngine.engine.preloadHotspotsForViewport(),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.preloadHotspotsForViewport()}getIndoorPlans(){return"vector"===this.C53_mainEngine.type?this.C53_mainEngine.engine.getIndoorPlans():"transitionToVector"===this.C53_mainEngine.type?this.C53_mainEngine.vector.engine.getIndoorPlans():null}getVisibleObjects(t){return"vector"===this.C53_mainEngine.type?this.C53_mainEngine.engine.getVisibleObjects(t):"transitionToVector"===this.C53_mainEngine.type?this.C53_mainEngine.vector.engine.getVisibleObjects(t):null}A79_setMainEngineLayers(t){this.C53_mainEngine.engine.setLayers(t),"vector"===this.C53_mainEngine.type&&this.C53_mainEngine.cursorController&&this.C53_mainEngine.cursorController.setLayers(t)}EBF_setEngineDataSources(t){this.C6B_topRasterEngine.setDataSources(t),this.C53_mainEngine.engine.setDataSources(t),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.setDataSources(t),"vector"===this.C53_mainEngine.type&&this.C53_mainEngine.cursorController&&this.C53_mainEngine.cursorController.setDataSources(t)}A1B_getEffectiveMode(){return"raster"===this.FF2_desiredMode||this.B42_vectorFailed?"raster":this.C52_vectorMapEngineFactory?"vector":"auto"===this.FF2_desiredMode?"raster":"vector"===this.FF2_desiredMode?this.C53_mainEngine&&"preVector"!==this.C53_mainEngine.type?"raster":"preVector":void(ymaps3.strictMode&&(0,b.h)(!1,"Cant get effective map mode"))}EBB_applyMode(){const t=this.A1B_getEffectiveMode();if(this.FEB_effectiveMode===t)return this.A79_setMainEngineLayers(this.C77_mainLayers),void this.C57_renderLoop.update();if(this.FEB_effectiveMode=t,"preVector"===this.FEB_effectiveMode){const t=new xe;this.C53_mainEngine={type:"preVector",engine:t,eventGroup:t.group()}}else if("raster"===this.FEB_effectiveMode){this.D91_destroyMainEngine();const t=new wt(this.A11_size,this.A26_camera,this.C57_renderLoop,this.worldOptions,this.projection,this.A12_dataSources,Ye,this.C6B_topRasterEngine.animateFirstScreen,this.tiltRange);this.EB8_mainEngineContainer.appendChild(t.element),t.setLayers(this.C77_mainLayers),t.setObjectFilters(this.B46_filters);const e=t.group().on("tilesReady",(()=>this._emit("ready"))).on("tilesLoaded",(()=>this._emit("loaded"))).on("stateChanged",(()=>this._emit("stateChanged"))).on("hotspotsChanged",(()=>this._emit("hotspotsChanged")));this.C53_mainEngine={type:"raster",engine:t,eventGroup:e},this._emit("mainEngineChanged"),this.D91_chooseEffectiveZoomRounding(),this.FD7_handleRotatability(),this.C6B_topRasterEngine.update(this.A26_camera,this.C53_mainEngine.engine.fov)}else{let t;const e={init:performance.now(),duration:-1,revealDuration:-1};try{t=this.C52_vectorMapEngineFactory(this.A11_size,this.A26_camera,this.A12_dataSources,this.C57_renderLoop,this.worldOptions,this.tiltRange,this.EBB_experiments)}catch(t){return void this.EA9_onVectorError({source:`${We}/engine_create`,message:`${We}: failed to create vector engine: ${t}`})}if("preVector"===this.C53_mainEngine.type){const i=this.EB4_switchMainEngineToVector(t);i.initLayersTimer=window.setTimeout((()=>{const o=t.on("stateChanged",(()=>{var i;this.DA2_isReadyToShowVector(t)&&(o.offAll(),e.revealDuration=performance.now()-e.init,this.EB8_mainEngineContainer.appendChild(t.element),this.EAB_onVectorStart(e),i={vectorStart:e.duration,vectorReveal:e.revealDuration},null==F||F(i)),this._emit("stateChanged")}));this.FD3_setVectorLayers(i,e),i.initLayersTimer=void 0}))}else{const i=t.on("internalError",(t=>this.EA9_onVectorError(t))).on("contentError",(t=>this.FD5_onVectorContentError(t))).on("indoorPlansChanged",(()=>this._emit("indoorPlansChanged"))).on("hotspotsChanged",(()=>this._emit("hotspotsChanged"))).on("tile3dChanged",(t=>this._emit("tile3dChanged",t))).on("tile3dVisibilityChange",(t=>this._emit("tile3dVisibilityChange",t))).on("visibleObjectsChanged",(()=>this._emit("visibleObjectsChanged"))),o={type:"vector",engine:t,eventGroup:i};this.C53_mainEngine={engine:this.C53_mainEngine.engine,eventGroup:this.C53_mainEngine.eventGroup,type:"transitionToVector",vector:o},this.C53_mainEngine.vector.initLayersTimer=window.setTimeout((()=>{"transitionToVector"===this.C53_mainEngine.type?(this.C53_mainEngine.vector.transitionEventGroup=t.on("stateChanged",(()=>{var i;if(this.DA2_isReadyToShowVector(t,this.C53_mainEngine.engine)){if("transitionToVector"!==this.C53_mainEngine.type)return void this.FCC_onBadMainEngineState();null===(i=this.C53_mainEngine.vector.transitionEventGroup)||void 0===i||i.offAll(),e.revealDuration=performance.now()-e.init,this.D91_finalizeSwitchingToVector(e)}this._emit("stateChanged")})),this.FD3_setVectorLayers(o,e),this.C53_mainEngine.vector.initLayersTimer=void 0):this.FCC_onBadMainEngineState()}))}}this.C57_renderLoop.update(),this._emit("indoorPlansChanged")}FD3_setVectorLayers(t,e){return new Promise((i=>{const o=t.engine,s=t=>{(0,Pe.D)(t)||this.EA9_onVectorError({source:`${We}/layers`,message:`${We}: failed to set vector layers: ${t}`})},n=()=>{o.setObjectFilters(this.B46_filters),o.setInvisibleCollidingPrimitives(this.C64_invisibleCollidingPrimitives),o.setTileContentClippingGeometry(this.A26_collidingGeometriesBySource),e.duration=performance.now()-e.init,i()};try{if(o.initLayersAsync){t.setLayersAbortController=new AbortController;const e=t.setLayersAbortController.signal;o.initLayersAsync(this.C77_mainLayers,e).then(n).catch(s)}else o.setLayers(this.C77_mainLayers),n();t.cursorController&&t.cursorController.setLayers(this.C77_mainLayers)}catch(t){s(t)}}))}EB4_switchMainEngineToVector(t){return this.C53_mainEngine.eventGroup.offAll(),this.C53_mainEngine.engine.destroy(),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.eventGroup.offAll(),this.C53_mainEngine={type:"vector",engine:t,cursorController:new be(this,t.element,this.A12_dataSources,this.C77_mainLayers),eventGroup:t.group().on("internalError",(t=>this.EA9_onVectorError(t))).on("contentError",(t=>this.FD5_onVectorContentError(t))).on("tilesReady",(()=>this._emit("ready"))).on("tilesLoaded",(()=>this._emit("loaded"))).on("stateChanged",(()=>this._emit("stateChanged"))).on("indoorPlansChanged",(()=>this._emit("indoorPlansChanged"))).on("tile3dChanged",(t=>this._emit("tile3dChanged",t))).on("tile3dVisibilityChange",(t=>this._emit("tile3dVisibilityChange",t))).on("visibleObjectsChanged",(()=>this._emit("visibleObjectsChanged")))},this.C6B_topRasterEngine.update(this.A26_camera,this.C53_mainEngine.engine.fov),this._emit("indoorPlansChanged"),this._emit("mainEngineChanged"),this.D91_chooseEffectiveZoomRounding(),this.FD7_handleRotatability(),this.C53_mainEngine}DA2_isReadyToShowVector(t,e){let i=0,o=0,s=0,n=0,r=0,a=0;if(this.C77_mainLayers.forEach((h=>{const l=t.getLayerReadyState(h.id);l&&(n+=l.tilesTotal,s+=l.tilesReady),l&&(r+=l.graphicsTotal,a+=l.graphicsReady);const c=null==e?void 0:e.getLayerReadyState(h.id);c&&(o+=c.tilesTotal,i+=c.tilesReady)})),0===n||0===s)return!1;return 0===o||a===r&&(s>=.75*n||s/n>=i/o)}EAB_onVectorStart(t){this._emit("vectorStart",{duration:t.duration,revealDuration:t.revealDuration})}EA9_onVectorError(t){var e;this.B42_vectorFailed=!0,this.EBB_applyMode(),this._emit("vectorError",t),t.source.startsWith(We)?(0,w.H)(new Error(t.message)):((0,w.H)(new Error("vector: internal error")),(0,w.vp)(new Error(t.message),`fatal / ${function(t){var e,i;if(null===(e=t.source)||void 0===e?void 0:e.startsWith("Worker"))return"worker";const o=null===(i=t.source)||void 0===i?void 0:i.split("/");return o&&o.length>0?o[o.length-1]:"unknown"}(t)}`,{type:"fatal error",source:t.source,nestedError:null===(e=t.error)||void 0===e?void 0:e.message}))}FD5_onVectorContentError(t){var e;(0,w.vp)(new Error(t.message),`content / ${function(t){var e;if("internal task error"===t.message)return"internal task";const i=null===(e=t.source)||void 0===e?void 0:e.split("/");return i&&i.length>0?i[i.length-1]:"unknown"}(t)}`,{type:"content error",source:t.source,nestedError:null===(e=t.error)||void 0===e?void 0:e.message})}FCC_onBadMainEngineState(){this.EA9_onVectorError({source:`${We}/engine_state`,message:`${We}: unexpected main engine state: ${this.C53_mainEngine.type}`})}D91_finalizeSwitchingToVector(t){if("transitionToVector"!==this.C53_mainEngine.type)return void this.FCC_onBadMainEngineState();const e=this.C53_mainEngine.vector.engine;this.C53_mainEngine.vector.animationAbortController=new AbortController;const i=this.C53_mainEngine.vector.animationAbortController.signal,o=this.EB8_mainEngineContainer;this.EB8_mainEngineContainer=(0,P.E)(Ze),this.EB8_mainEngineContainer.appendChild(e.element),this.EAB_onVectorStart(t),function(t,e,i){return new Promise(((o,s)=>{t.parentElement.insertBefore(e,t),i.addEventListener("abort",(()=>{s((0,Pe.o)())})),t.addEventListener("transitionend",(()=>{Xe(t),o()})),t.classList.add(Ue),getComputedStyle(t).opacity}))}(o,this.EB8_mainEngineContainer,i).then((()=>{"transitionToVector"===this.C53_mainEngine.type?this.EB4_switchMainEngineToVector(e):this.FCC_onBadMainEngineState()})).catch((t=>{(0,Pe.D)(t)||this.EA9_onVectorError({source:`${We}/engine_switch`,message:`${We}: switch to vector aborted: ${t}`})}))}FD7_handleRotatability(){var t;const e=[...this.B3B_topRasterLayers,..."vector"!==this.C53_mainEngine.type?this.C77_mainLayers:[]].every((t=>!this.B3F_nonRotatableRasterSources.has(t.source)));null===(t=this.behaviors)||void 0===t||t.mapToggleRotation(e),!e&&(0!==this.A26_camera.azimuth||this.A26_camera.tilt>0)&&(this.A26_camera=Object.assign(Object.assign({},this.A26_camera),{azimuth:0,tilt:0}),this.EA9_update())}EB1_assertLayersIsValid(t,e){for(const{source:t}of e){const e=this.EC1_dataSourceDescriptions[t];e?"tile"!==e.type||e.hasOwnProperty("vector")?"indoor"!==t||"tile"===e.type&&e.vector&&e.vector.indoorPlanUrl||(0,w._y)(new Error('Source "indoor" has a special meaning and must be a vector indoor data source.')):(0,w._y)(new Error(`Source "${t}" in main engine does not have vector field`)):(0,w._y)(new Error(`Unknown data source ${t}`))}const i=[...e,...t].map((({id:t})=>t)),o=new Set(i);ymaps3.strictMode&&(0,b.h)(i.length===o.size,`Layers have duplicates "${i}"`)}D91_destroyMainEngine(){this.C53_mainEngine&&("vector"===this.C53_mainEngine.type&&(this.C53_mainEngine.setLayersAbortController&&this.C53_mainEngine.setLayersAbortController.abort(),this.C53_mainEngine.cursorController&&this.C53_mainEngine.cursorController.destroy(),clearTimeout(this.C53_mainEngine.initLayersTimer),Xe(this.C53_mainEngine.engine.element)),"transitionToVector"===this.C53_mainEngine.type&&(this.C53_mainEngine.vector.animationAbortController&&this.C53_mainEngine.vector.animationAbortController.abort(),this.C53_mainEngine.vector.setLayersAbortController&&this.C53_mainEngine.vector.setLayersAbortController.abort(),this.C53_mainEngine.vector.transitionEventGroup&&this.C53_mainEngine.vector.transitionEventGroup.offAll(),clearTimeout(this.C53_mainEngine.vector.initLayersTimer),this.C53_mainEngine.vector.eventGroup.offAll(),Xe(this.C53_mainEngine.vector.engine.element),this.C53_mainEngine.vector.engine.destroy()),this.C53_mainEngine.eventGroup.offAll(),this.C53_mainEngine.engine.destroy())}EC3_createTopEngine(){const t=new wt(this.A11_size,this.A26_camera,this.C57_renderLoop,this.worldOptions,this.projection,this.A12_dataSources,(t=>this.C53_mainEngine&&"vector"===this.C53_mainEngine.type?(t=>{const e=Math.floor(t);return t-e<.5?e:e+1})(t):Ye(t)),!1,this.tiltRange);this.EB3_topEngineContainer.appendChild(t.element);const e=t.group().on("tilesReady",(()=>this._emit("ready"))).on("tilesLoaded",(()=>this._emit("loaded"))).on("stateChanged",(()=>this._emit("stateChanged"))).on("hotspotsChanged",(()=>this._emit("hotspotsChanged")));return t.setLayers(this.B3B_topRasterLayers),t.setObjectFilters(this.B46_filters),{topEngine:t,eventGroup:e}}EA9_update(){this.C53_mainEngine.engine.update(this.A26_camera,A),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.update(this.A26_camera,A),this.C6B_topRasterEngine.update(this.A26_camera,this.C53_mainEngine.engine.fov),this.C57_renderLoop.update(),this._emit("update")}EB6_subscribeToDomEvents(){this.container.addEventListener("contextmenu",(t=>t.preventDefault()))}convertScreenToWorldCoordinates({clientX:t,clientY:e}){const i=(0,o.XA)({x:t,y:e},this);return{worldCoordinates:i,coordinates:this.projection.fromWorldCoordinates(i)}}FCC_restrictZoom(t){const{min:e,max:i}=this.zoomRange;return(0,S.q)(t,e,i)}D91_convertFeatureToWorld(t){return qe(this.worldOptions,t,(t=>this.projection.toWorldCoordinates(t)),((t,e)=>({geo:t,global:e})))}EC1_convertFeatureToGeo(t){return qe(this.worldOptions,t,(t=>this.projection.fromWorldCoordinates(t)),((t,e)=>({geo:e,global:t})))}D7C_getFeaturesForDataSource(t){return this.EA4_featuresByDataSource.has(t)||this.EA4_featuresByDataSource.set(t,new Map),this.EA4_featuresByDataSource.get(t)}ECA_createDataSource(t,e){const{type:i}=t;switch(i){case"markers":case"geojson":return new ht.m5;case"tile":return new O.Nt(t,this.worldOptions,e);case"tile3d":return new Mt.N(t)}return new Re.m}B33_getFeaturesDataSource(t){const e=this.C56_getDataSourceById(t);return ymaps3.strictMode&&(0,b.h)(e instanceof ht.m5,`"${t}" must be FeaturesDataSource`),e}EB7_getTile3dDataSource(t){const e=this.C56_getDataSourceById(t);return ymaps3.strictMode&&(0,b.h)(e instanceof Mt.N,`"${t}" must be Tile3dDataSource`),e}C62_getTileDataSource(t){const e=this.C56_getDataSourceById(t);return ymaps3.strictMode&&(0,b.h)(e instanceof O.Nt,`"${t}" must be TileDataSource`),e}C56_getDataSourceById(t){return ymaps3.strictMode&&(0,b.h)(void 0!==this.A12_dataSources[t],`Unknown data source "${t}"`),this.A12_dataSources[t]}A1F_getEffectiveZoomRounding(){return"auto"!==this.D8F_zoomRounding?this.D8F_zoomRounding:this.B42_vectorFailed?"snap":this.C77_mainLayers.length&&"raster"!==this.FEB_effectiveMode?"smooth":"snap"}D91_chooseEffectiveZoomRounding(){var t;const e=this.A1F_getEffectiveZoomRounding();if(this.C63_effectiveZoomRounding!==e){if(this.C63_effectiveZoomRounding=e,"snap"===this.C63_effectiveZoomRounding){const t=ke(this.A26_camera.zoom);this.setCamera(Object.assign(Object.assign({},this.A26_camera),{zoom:t}))}null===(t=this.behaviors)||void 0===t||t._updateZoomRounding(),this._emit("zoomRoundingChanged")}}ABA_applyFilters(){this.C53_mainEngine.engine.setObjectFilters(this.B46_filters),this.C6B_topRasterEngine.setObjectFilters(this.B46_filters),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.setObjectFilters(this.B46_filters)}D83_applyInvisibleCollidingPrimitives(){this.C53_mainEngine.engine.setInvisibleCollidingPrimitives(this.C64_invisibleCollidingPrimitives),"transitionToVector"===this.C53_mainEngine.type&&this.C53_mainEngine.vector.engine.setInvisibleCollidingPrimitives(this.C64_invisibleCollidingPrimitives)}EBB_toMapObject(t){if(!t)return t;if("raw-hotspot"===t.type){const e=Object.assign(Object.assign({},t.feature),{geometry:t.feature.geometry&&(0,y.ZE)(t.feature.geometry,(([t,e])=>[e,t]))});return{type:"hotspot",layer:t.layer,source:t.source,feature:e}}if("hotspot"===t.type){const e=Object.assign(Object.assign({},t.feature),{geometry:t.feature.geometry&&(0,y.ZE)(t.feature.geometry,(t=>this.projection.fromWorldCoordinates(t)))});return{type:"hotspot",layer:t.layer,source:t.source,feature:e}}if("feature"===t.type){const e=this.D7C_getFeaturesForDataSource(t.source).get(t.feature.id);return e?{type:"feature",layer:t.layer,source:t.source,feature:e}:null}return"empty-object"===t.type?Object.assign({},t):null}updateCameraOptions(t){this.C5F_cameraOptions=Object.assign(Object.assign({},this.C5F_cameraOptions),t)}D90_restrictCamera(t){const e=this.FCC_restrictZoom(t.zoom),{enabledTiltTransition:i}=this.C5F_cameraOptions,o={zoom:e,worldCenter:v.B.fitViewportToWorld(t.worldCenter,{zoom:e,worldOptions:this.worldOptions,size:this.size}),azimuth:(0,S.d)(t.azimuth,0,2*Math.PI),tilt:(0,S.q)(t.tilt,this.tiltRange.min-(i?this.tiltRange.expansion:0),this.tiltRange.max+(i?this.tiltRange.expansion:0))};return this.EB7_worldRestrictMapArea?function(t,e,i,o){const s=Le(i,o),{x:n,y:r}=v.B.convertPixelSizeToWorldSize(s,t.zoom),a=n/2,h=-r/2,{x:l,y:c}=t.worldCenter;let{x:d,y:u}=t.worldCenter;return d-a<e[0].x&&(d=e[0].x+a),u-h<e[0].y&&(u=e[0].y+h),d+a>e[1].x&&(d=e[1].x-a),u+h>e[1].y&&(u=e[1].y-h),d!==l||u!==c?Object.assign(Object.assign({},t),{worldCenter:{x:d,y:u}}):t}(o,this.EB7_worldRestrictMapArea,this.size,this.margin):o}}function Qe(t){const{top:e,left:i,right:o,bottom:s}=t.getBoundingClientRect();return{size:{x:t.clientWidth,y:t.clientHeight},offset:{top:e,left:i,right:window.innerWidth-o,bottom:window.innerHeight-s}}}function He(t,e){return t.map((t=>{const i="string"==typeof t?function(t,e){const i=t.match(N);i&&0!==i[0].length||(0,w._y)(new Error(`Bad string layer spec '${t}'`));const[,o,s,n]=i,r=n?n.split(","):[],a=Object.create(null);for(const t of r)a[t]=!0;return{id:t,source:o,type:s,options:{raster:Object.assign(Object.assign({},a),null==e?void 0:e.raster),vector:Object.assign(Object.assign({},a),null==e?void 0:e.vector)}}}(t):t,o=I(i);return o.source===z||e[o.source]||(0,w._y)(new Error(`Nonexistent data source "${o.source}" in "${i.id}"`)),o}))}function Ve(t,e){(0,m.i3)(t);const i=Object.assign({},t);for(const o of Object.keys(e)){const s=e[o];if("tile"===s.type&&(s.zoomRange&&(0,m.i3)(s.zoomRange),s.clampMapZoom)){const e=s.zoomRange||t;(0,m.Hx)(i,e,i)}}(0,m.i3)(i)}function $e(t){return t.id}function Xe(t){t.parentElement&&t.parentElement.removeChild(t)}function qe(t,e,i,o){ymaps3.strictMode&&(0,b.h)(!t.cycledY,"Y-cycled projections are not supported");let s=1/0,n=-1/0,r=1/0,a=-1/0;return{feature:(0,y.Cr)(e,(e=>{const h=i(e),{geo:l,global:c}=o(e,h);if(t.cycledX){const t=l[0]<-180||l[0]>180?Math.round(l[0]/360):0;c.x+=2*t}return s=c.x<s?c.x:s,n=c.x>n?c.x:n,r=c.y<r?c.y:r,a=c.y>a?c.y:a,h})),bbox:{minX:s,maxX:n,minY:r,maxY:a}}}var Ke=i(67245),Je=i(21131),ti=i(80437),ei=i(42542),ii=i(53013),oi=i(79293),si=i(93379),ni=i.n(si),ri=i(7795),ai=i.n(ri),hi=i(90569),li=i.n(hi),ci=i(3565),di=i.n(ci),ui=i(19216),_i=i.n(ui),pi=i(44589),mi=i.n(pi),gi=i(61046),yi={};yi.styleTagTransform=mi(),yi.setAttributes=di(),yi.insert=li().bind(null,"head"),yi.domAPI=ai(),yi.insertStyleElement=_i();ni()(gi.Z,yi);gi.Z&&gi.Z.locals&&gi.Z.locals;var fi=i(45340),Ci={};Ci.styleTagTransform=mi(),Ci.setAttributes=di(),Ci.insert=li().bind(null,"head"),Ci.domAPI=ai(),Ci.insertStyleElement=_i();ni()(fi.Z,Ci);fi.Z&&fi.Z.locals&&fi.Z.locals;function Ei(t,e){return e>=t.length?t:e<=4?"":`...${t.slice(t.length-e+3)}`}const Ai=Object.freeze({position:"bottom right",showScale:!1});class vi extends ii.SY{constructor(t={}){super(t),this.B2A_copyrights={text:"",options:{}},this.FDE_applyCopyrights=this.FDE_applyCopyrights.bind(this),this.A46_rearrange=this.A46_rearrange.bind(this),this.FF1_render=this.FF1_render.bind(this),this.D8F_syncTheme=this.D8F_syncTheme.bind(this)}_onAttach(){var t;this.B45_createDom();const e=null===(t=this._consumeContext(ti.X))||void 0===t?void 0:t.map;e&&(e.on("copyrightsChange",this.FDE_applyCopyrights),e.on("resize",this.A46_rearrange),this.EAA_scaleControl=new oi.d({}),this.B3C_toggleScaleControl(),this._watchContext(ei.N,this.D8F_syncTheme,{immediate:!0}),this._watchContext(ti.X,this.FF1_render,{immediate:!0}),this.FDE_applyCopyrights())}_onUpdate(t){void 0!==t.showScale&&this.B3C_toggleScaleControl(),void 0!==t.position&&this.FF1_render()}_onDetach(){var t;null===(t=this.FF0_detachDom)||void 0===t||t.call(this),this.FF0_detachDom=void 0;const e=this._consumeContext(ti.X).map;e.offSingle("copyrightsChange",this.FDE_applyCopyrights),e.offSingle("resize",this.A46_rearrange)}B45_createDom(){this.A92_containerElement=(0,P.E)("ymaps3x0--map-copyrights"),this.B4A_copyrightsTextElement=(0,P.E)("ymaps3x0--map-copyrights__text"),this.FE1_agreementLinkElement=document.createElement("a"),this.FE1_agreementLinkElement.className="ymaps3x0--map-copyrights__user-agreements",this.FE1_agreementLinkElement.setAttribute("target","_blank"),this.EC8_scaleElement=(0,P.E)("ymaps3x0--map-copyrights__scale"),this.B3E_copyrightsContainer=(0,P.E)("ymaps3x0--map-copyrights__container"),this.EC3_logoElement=(0,P.E)("ymaps3x0--map-copyrights__logo"),this.EC3_logoElement.style.width="46px",this.EC3_logoElement.style.height="20px",this.B3E_copyrightsContainer.appendChild(this.B4A_copyrightsTextElement),this.B3E_copyrightsContainer.appendChild(this.FE1_agreementLinkElement),this.A92_containerElement.appendChild(this.B3E_copyrightsContainer),this.A92_containerElement.appendChild(this.EC3_logoElement),this.A92_containerElement.appendChild(this.EC8_scaleElement),this.FF0_detachDom=(0,Je.sT)(this,this.A92_containerElement,this.EC8_scaleElement)}FF1_render(){var t;const e=null===(t=this._consumeContext(ti.X))||void 0===t?void 0:t.meta;if(!e)return;const[i,o]=this._props.position.split(" ");this.A92_containerElement.className=["ymaps3x0--map-copyrights",`ymaps3x0--map-copyrights_${i}`,`ymaps3x0--map-copyrights_${o}`].join(" ");const s=e.copyrights.userAgreementHost.replace("{{lang}}",e.lang);this.FE1_agreementLinkElement.setAttribute("href",s),this.A46_rearrange()}D8F_syncTheme(){var t,e;const i=null===(t=this._consumeContext(ti.X))||void 0===t?void 0:t.meta,o=null===(e=this._consumeContext(ei.N))||void 0===e?void 0:e.theme;if(!i||!o)return;const s=`ymaps3x0--icon-logo-${i.copyrights.logoLang}-white`,n=`ymaps3x0--icon-logo-${i.copyrights.logoLang}-black`,r="ymaps3x0--map-copyrights__dark-container";"dark"===o?(this.EC3_logoElement.classList.add(s),this.EC3_logoElement.classList.remove(n),this.B3E_copyrightsContainer.classList.add(r)):"light"===o&&(this.EC3_logoElement.classList.add(n),this.EC3_logoElement.classList.remove(s),this.B3E_copyrightsContainer.classList.remove(r))}FDE_applyCopyrights(){var t,e,i;const o=null===(t=this._consumeContext(ti.X))||void 0===t?void 0:t.map;if(!o)return;const s=o.getLayersEx(),n=Array.from(new Set([...s.mainLayers,...s.topRasterLayers].map((t=>t.source))));n.sort();const r=[],a={trim:void 0,logo:void 0};for(const t of n){const s=o.getDataSource(t);"tile"===(null==s?void 0:s.type)&&(s.copyrights&&r.push(...s.copyrights),s.copyrightsOptions&&(null!==(e=a.trim)&&void 0!==e||(a.trim=s.copyrightsOptions.trim),null!==(i=a.logo)&&void 0!==i||(a.logo=s.copyrightsOptions.logo)))}const h=r.join(" ");this.B2A_copyrights.text===h&&this.B2A_copyrights.options.trim===a.trim&&this.B2A_copyrights.options.logo===a.logo||(this.B2A_copyrights={text:h,options:a},this.A46_rearrange())}A28_computeMaxWidth(t){return t-this.EC3_logoElement.offsetWidth-this.FE1_agreementLinkElement.offsetWidth-40}A46_rearrange(){const t=this._consumeContext(ti.X);if(!t)return;const{text:e,options:i}=this.B2A_copyrights;if(!1!==i.logo?this.EC3_logoElement.style.removeProperty("display"):this.EC3_logoElement.style.display="none",this.FE1_agreementLinkElement.textContent=t.meta.copyrights.userAgreementTextLong,this.B4A_copyrightsTextElement.textContent=e,this.B4A_copyrightsTextElement.title=e,!1!==i.trim){this.B3E_copyrightsContainer.style.removeProperty("whiteSpace");do{if(this.B4A_copyrightsTextElement.offsetWidth<this.A28_computeMaxWidth(t.map.size.x))break;if(this.FE1_agreementLinkElement.textContent=t.meta.copyrights.userAgreementTextShort,this.B4A_copyrightsTextElement.offsetWidth<this.A28_computeMaxWidth(t.map.size.x))break;const i=Math.round(this.B4A_copyrightsTextElement.offsetWidth/e.length),o=(this.A28_computeMaxWidth(t.map.size.x)-30)/i;this.B4A_copyrightsTextElement.textContent=Ei(e,Math.ceil(o))}while(0)}else this.B3E_copyrightsContainer.style.whiteSpace="normal";const o=Math.max(this.B3E_copyrightsContainer.offsetHeight,this.EC3_logoElement.offsetHeight,20),[s]=this._props.position.split(" ");"top"===s?(this.EC8_scaleElement.style.removeProperty("bottom"),this.EC8_scaleElement.style.top=`${o+16}px`):(this.EC8_scaleElement.style.removeProperty("top"),this.EC8_scaleElement.style.bottom=`${o+16}px`)}B3C_toggleScaleControl(){const t=-1!==this.children.indexOf(this.EAA_scaleControl);this._props.showScale&&!t?(this.EC8_scaleElement.style.display="",this.addChild(this.EAA_scaleControl)):!this._props.showScale&&t&&(this.EC8_scaleElement.style.display="none",this.removeChild(this.EAA_scaleControl)),this.A46_rearrange()}}vi.defaultProps=Ai;var Mi=i(95282),Di=i(89123),xi=i(93439),Si=i(65549),bi=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]])}return i};var wi=i(132),ji=i(67916),Bi=i(90858),Li=i(89061),zi=i(46393),Ti={};Ti.styleTagTransform=mi(),Ti.setAttributes=di(),Ti.insert=li().bind(null,"head"),Ti.domAPI=ai(),Ti.insertStyleElement=_i();ni()(zi.Z,Ti);zi.Z&&zi.Z.locals&&zi.Z.locals;var Ii=i(44087),Ni={};Ni.styleTagTransform=mi(),Ni.setAttributes=di(),Ni.insert=li().bind(null,"head"),Ni.domAPI=ai(),Ni.insertStyleElement=_i();ni()(Ii.Z,Ni);Ii.Z&&Ii.Z.locals&&Ii.Z.locals;var Fi,Oi,Ri,Pi,ki,Yi=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))},Zi=function(t,e,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:e.set(t,i),i},Ui=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};class Wi extends((0,g.GA)().with()){constructor(t){super(),Object.assign(this,t)}emitAfterUpdate(){this._emit("afterUpdate")}}const Gi="ymaps3x0--map-container",Qi=Object.freeze({className:"",camera:{tilt:0,azimuth:0},mode:"auto",zoomRounding:"auto",hotspotsStrategy:(0,Bt.b1)()?"forViewport":"forPointerPosition",zoomRange:(0,m.oF)(),zoomStrategy:"zoomToPointer",behaviors:["drag","scrollZoom","pinchZoom","dblClick"],margin:[0,0,0,0],copyrights:!0,copyrightsPosition:"bottom right",showScaleInCopyrights:!1,worldOptions:{cycledX:!0,cycledY:!1},restrictMapArea:!1,get config(){return(0,Di._K)()},projection:wi.C,theme:"light"});class Hi extends Ke.ru{constructor(t,e,i){super(e,{container:!0}),this.EC8_vectorInitFailed=!1,this.C57_layers=[],this.C6C_isDestroyed=!1,this.B45_isVectorLoading=!1,Fi.set(this,void 0),Oi.set(this,void 0),Ri.set(this,void 0),Pi.set(this,void 0);const o=(0,Di.yY)(this._props.config);if(!o)throw new Error("ymaps3: missing config");Zi(this,Pi,o,"f"),this.FE7_rootContainer=t,this.C68_container=document.createElement("ymaps"),this.C68_container.className=Gi,this._props.className&&(this.C68_container.className=`${Gi} ${this._props.className}`),this.FE7_rootContainer.appendChild(this.C68_container),Zi(this,Fi,new Wi({map:this.B3A_createMap(),meta:o.meta,upsertLayer:t=>this.C71_upsertLayer(t),removeLayer:t=>this.FD5_removeLayer(t),isUpdating:!1}),"f"),this.A12__implProvideContext(ti.X,Ui(this,Fi,"f")),Zi(this,Ri,{},"f"),this.A12__implProvideContext(xi.$,Ui(this,Ri,"f"));const[s]=(0,Je.vi)(this,this.C68_container);this.A12__implProvideContext(Je.dh,s),Zi(this,Oi,{theme:this._props.theme},"f"),this.A12__implProvideContext(ei.N,Ui(this,Oi,"f")),"raster"!==this._props.mode&&this.EC3_loadVector().catch((()=>{})),this.B2D_resizeObserver=new ResizeObserver((()=>Ui(this,Fi,"f").map.resize())),this.B2D_resizeObserver.observe(this.FE7_rootContainer),this.B2A_copyrights=new vi({position:this._props.copyrightsPosition,showScale:this._props.showScaleInCopyrights}),this.A24__toggleCopyrights(this._props.copyrights,o.meta.copyrights.allowRemove);const n=new Mi.EQ({});this._addDirectChild(n),this.A12__implProvideContext(Mi.f$,{subscribe:n.subscribe.bind(n)}),null==i||i.forEach((t=>this.addChild(t))),Li.kg.info({group:"create",payload:Object.assign({name:"YMap"},this.FD9__implLoggerProps())})}FD9__implLoggerProps(){return{time:(0,Li.up)()}}addChild(t,e){return super.addChild(t,e)}removeChild(t){return super.removeChild(t)}FE8_canBeMainLayer(t){var e;const{map:i}=Ui(this,Fi,"f"),o=t.source||t.id.split(":")[0],s=i.getDataSource(o),n="geojson"===(null==s?void 0:s.type)&&"markers"!==t.type&&!1===(null==s?void 0:s.dynamic),r="tile"===(null==s?void 0:s.type)&&Boolean(s.vector),a="tile3d"===(null==s?void 0:s.type),h=Boolean(t.implementation&&t.implementation({source:o,type:null!==(e=t.type)&&void 0!==e?e:"",effectiveMode:"vector"}));return n||r||a||h}AB1_prepareLayersToSet(t){const e=[...t],i=[];for(let t=e.length-1;t>=0;t--){const o=e[t];if(!this.FE8_canBeMainLayer(o))break;i.push(o),e.splice(t,1)}return e.reverse(),{topRasterLayers:e,mainLayers:i}}A81_filterLayers(t){return this.C57_layers.filter((e=>t!==e.id))}C71_upsertLayer(t){if(t.implementation&&!Ui(this,Pi,"f").meta.allowedFeatures.customLayers&&!(0,Bi.BC)(t.implementation))throw new Error("Custom layers is not allowed");const e=[t,...this.A81_filterLayers(t.id)],i=e.reduce(((t,e)=>(t.set(e.id,e.zIndex),t)),new Map);this.C57_layers=e.sort(((t,e)=>{let o=t.zIndex,s=e.zIndex;return t.grouppedWith&&i.has(t.grouppedWith)&&(o=i.get(t.grouppedWith)),e.grouppedWith&&i.has(e.grouppedWith)&&(s=i.get(e.grouppedWith)),s-o||e.zIndex-t.zIndex}));const o=this.AB1_prepareLayersToSet(this.C57_layers),{topRasterLayers:s}=o,n=s.find((t=>this.FE8_canBeMainLayer(t)));n&&console.warn(`Vector layer "${n.id}" should have z-index less than raster layer "${s[s.length-1].id}"`),Ui(this,Fi,"f").map.setLayers(o)}FD5_removeLayer(t){this.C57_layers=this.A81_filterLayers(t.id),Ui(this,Fi,"f").map.setLayers(this.AB1_prepareLayersToSet(this.C57_layers))}get container(){return this.C68_container}get center(){return Ui(this,Fi,"f").map.center}get zoom(){return Ui(this,Fi,"f").map.zoom}get tilt(){return Ui(this,Fi,"f").map.tilt}get azimuth(){return Ui(this,Fi,"f").map.azimuth}get bounds(){return Ui(this,Fi,"f").map.bounds}get zoomRange(){return Ui(this,Fi,"f").map.zoomRange}get tiltRange(){return Ui(this,Fi,"f").map.tiltRange}get projection(){return Ui(this,Fi,"f").map.projection}get size(){return Ui(this,Fi,"f").map.size}get behaviors(){return this._props.behaviors}get config(){return this._props.config}get restrictMapArea(){return this._props.restrictMapArea}get theme(){return Ui(this,Oi,"f").theme}setLocation(t){this.update({location:t})}setCamera(t){this.update({camera:t})}B37__setLocation(t){var e,i;const{map:o}=Ui(this,Fi,"f"),s=t;let n=null!==(e=s.center)&&void 0!==e?e:this.center,r=null!==(i=s.zoom)&&void 0!==i?i:this.zoom;if(s.bounds){const{center:t,zoom:e}=ze(this.projection,s.bounds,this.size,o.margin,"snap"===o.effectiveZoomRounding,this.zoomRange);n=t,r=e}t.duration?o.animateCenterAndZoom(n,r,t.duration,t.easing):o.setCenterAndZoom(n,r)}setMode(t){var e;if(this._props.mode=t,"raster"===t)return null===(e=this.EA9__abortVectorLoad)||void 0===e||e.call(this),void Ui(this,Fi,"f").map.setMode(this._correctMode);this.EC3_loadVector().finally((()=>{Ui(this,Fi,"f").map.setMode(this._correctMode)}))}setZoomRange(t){Ui(this,Fi,"f").map.setZoomRange(t),this._props.zoomRange=t}setBehaviors(t){Ui(this,Fi,"f").map.behaviors.setEnabled(t),this._props.behaviors=t}setZoomRounding(t){Ui(this,Fi,"f").map.setZoomRounding(t),this._props.zoomRounding=t}setMargin(t){Ui(this,Fi,"f").map.setMargin(t),this._props.margin=t}setConfig(t){const e=t?(0,Di.yY)(t):void 0;e&&e.meta&&(Zi(this,Pi,e,"f"),Zi(this,Fi,new Wi(Object.assign(Object.assign({},Ui(this,Fi,"f")),{meta:e.meta})),"f"),this.A12__implProvideContext(ti.X,Ui(this,Fi,"f"))),this._props.config=t}setProjection(t){const{map:e}=Ui(this,Fi,"f"),i=[...e.center];e.setProjection(t),e.setCenter(i)}setRestrictMapArea(t){Ui(this,Fi,"f").map.setRestrictMapArea(t),this._props.restrictMapArea=t}destroy(){var t;if(this.C6C_isDestroyed)return;null===(t=this.EA9__abortVectorLoad)||void 0===t||t.call(this),this.B2D_resizeObserver.disconnect(),this.EA6__implDetach();const e=this.children;for(let t=e.length-1;t>=0;t--)this.removeChild(e[t]);Ui(this,Fi,"f").map.destroy(),this.FE7_rootContainer.removeChild(this.C68_container),this.C6C_isDestroyed=!0}B3A_createMap(){const t=Ui(this,Pi,"f");t.isApplied=!0;const e=new Ge(Object.assign(Object.assign({element:this.C68_container},this._props.location),{mode:this._correctMode,dataSources:{},topRasterLayers:[],mainLayers:[],margin:this._props.margin,behaviors:this._props.behaviors,zoomRounding:this._props.zoomRounding,zoomRange:this._props.zoomRange,experiments:t.experiments,projection:this._props.projection,tiltRange:this._props.tiltRange,worldOptions:this._props.worldOptions,restrictMapArea:this._props.restrictMapArea,metricsTransport:t=>Li.kg.info({group:"core",payload:t}),tilt:this._props.camera.tilt,azimuth:this._props.camera.azimuth}));return e.addDataSource(z,{type:"none"}),"forPointerPosition"===this._props.hotspotsStrategy?function(t){let e;const i=()=>{if(!t.behaviors.isInAction&&e){const i={x:e.clientX,y:e.clientY},s=(0,o.XA)(i,t);t.preloadHotspotsInPoint(s)}},s=t=>{e=t,i()},n=t.behaviors.on("actionEnd",(()=>{i()})),r=t.on("beforeDestroy",(()=>{r.offAll(),n.offAll(),t.container.removeEventListener("mousemove",s)}));t.container.addEventListener("mousemove",s)}(e):function(t){let e;const i=t.behaviors.on("actionStart",(()=>{e&&(e.offAll(),e=void 0)})).on("actionEnd",(()=>{e||t.behaviors.isInAction||(t.preloadHotspotsForViewport(),e=t.on("update",(()=>t.preloadHotspotsForViewport())))})),o=t.on("beforeDestroy",(()=>{o.offAll(),i.offAll(),e&&(e.offAll(),e=void 0)}));e=t.on("update",(()=>t.preloadHotspotsForViewport()))}(e),e.behaviors.setZoomStrategy(this._props.zoomStrategy),e}get _correctMode(){return Ui(this,Pi,"f").meta.allowedFeatures.vector&&!this.EC8_vectorInitFailed?this._props.mode:"raster"}_onUpdate(t){const{map:e}=Ui(this,Fi,"f");if(Ui(this,Fi,"f").isUpdating=!0,t.mode&&this.setMode(t.mode),t.zoomRange&&this.setZoomRange(t.zoomRange),t.behaviors&&this.setBehaviors(t.behaviors),t.zoomRounding&&this.setZoomRounding(t.zoomRounding),t.zoomStrategy&&e.behaviors.setZoomStrategy(t.zoomStrategy),t.margin&&this.setMargin(t.margin),t.projection&&this.setProjection(t.projection),t.config&&this.setConfig(t.config),void 0!==t.copyrights&&this.A24__toggleCopyrights(t.copyrights,Ui(this,Pi,"f").meta.copyrights.allowRemove),t.className&&(this.C68_container.className=`${Gi} ${t.className}`),t.copyrightsPosition&&this.B2A_copyrights.update({position:t.copyrightsPosition}),void 0!==t.showScaleInCopyrights&&this.B2A_copyrights.update({showScale:t.showScaleInCopyrights}),t.restrictMapArea&&this.setRestrictMapArea(t.restrictMapArea),void 0!==t.theme&&this.ECBsetTheme({theme:t.theme}),t.location&&this.B37__setLocation(t.location),void 0!==t.camera){const{duration:i,azimuth:o,tilt:s,easing:n}=t.camera;void 0!==o&&o!==this.azimuth&&e.animateAzimuth(o,i,n),void 0!==s&&s!==this.tilt&&e.animateTilt(s,i,n)}Ui(this,Fi,"f").isUpdating=!1,Ui(this,Fi,"f").emitAfterUpdate()}EC3_loadVector(){if(this.B45_isVectorLoading)return Promise.resolve();if(Ui(this,Fi,"f").map.isVectorMapEngineFactoryProvided()&&"raster"!==Ui(this,Fi,"f").map.getEffectiveMode())return Promise.resolve();if(!l())return this.EA5__onVectorInitFailed(),Promise.reject();let t=!1;this.B45_isVectorLoading=!0;const e=new Promise(((e,i)=>{setTimeout((()=>{var o,s;if(t)return i(new Error("aborted"));const n=Ui(this,Pi,"f"),r=a({allowSoftware:Boolean(null===(o=n.experiments)||void 0===o?void 0:o.allowVectorSoftwareRendering)});return r&&((null===(s=n.experiments)||void 0===s?void 0:s.skipVectorChecks)||h(r).supported)?e(r):i(new Error("Vector is not supported"))}))}));return this.EA9__abortVectorLoad=()=>{t=!0,this.B45_isVectorLoading=!1},Promise.all([e,this.FE9__loadVectorEngine()]).then((([e,i])=>Yi(this,void 0,void 0,(function*(){if(t)return;const[o,s]=yield Promise.all([i.getContentProviderWorker(Ui(this,Pi,"f")),i.getRichModelDecoderWorkerUrl(Ui(this,Pi,"f"))]);Ui(this,Fi,"f").map.provideVectorMapEngineFactory(i.vectorMapEngineFactory(e,i.vector,(()=>o))),Zi(this,Ri,{vector:i,richModelDecoderUrl:s},"f"),this.A12__implProvideContext(xi.$,Ui(this,Ri,"f")),Li.kg.info({group:"vector-engine",message:"loaded"})})))).catch((e=>{t||(this.EA5__onVectorInitFailed(),Li.kg.error({group:"vector-engine",error:e}))})).finally((()=>{this.B45_isVectorLoading=!1}))}EA5__onVectorInitFailed(){this.EC8_vectorInitFailed=!0,Ui(this,Fi,"f").map.setMode(this._correctMode)}FE9__loadVectorEngine(){return(0,Si.N)("@yandex/ymaps3-vector")}A24__toggleCopyrights(t,e=!1){t||!e?this.B2A_copyrights.parent||this._addDirectChild(this.B2A_copyrights):this.B2A_copyrights.parent&&this._removeDirectChild(this.B2A_copyrights)}ECBsetTheme(t){const{theme:e}=t;e&&(Ui(this,Oi,"f").theme=e),this.A12__implProvideContext(ei.N,Ui(this,Oi,"f"))}}Fi=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,ki=ji.sq,Hi.defaultProps=Qi,Hi[ki]=(t,{reactify:e,React:i})=>{const o=e.entity(class extends t{constructor(t){var{container:e}=t;super(e,bi(t,["container"]))}}),s=i.version.startsWith("19"),n=s?"ymaps-element":"ymaps";s&&void 0===customElements.get(n)&&customElements.define(n,class extends HTMLElement{});const r=i.forwardRef(((t,e)=>{const s=i.useRef(null),[r,a]=i.useState(!0);return i.useEffect((()=>{r&&a(!1)}),[r]),i.createElement(n,{is:n,ref:s,style:{width:"100%",height:"100%",margin:0,padding:0,display:"block"}},s.current&&i.createElement(o,Object.assign({},t,{ref:e,container:s.current})))}));return r.displayName="YMapContainer",r}},132:(t,e,i)=>{i.d(e,{C:()=>o});const o=i(3488).L},25739:(t,e,i)=>{i.d(e,{h:()=>a});var o,s=i(21131),n=i(53013),r=i(67916);class a extends n.SY{_onAttach(){this.element=document.createElement(this._props.tagName),this._onUpdate(this._props),this.FF0_detachDom=(0,s.sT)(this,this.element,null),this._props.onElement(this.element),this.C75_adjustContext()}C75_adjustContext(){var t;if(null===(t=this.FDE_disposeWatch)||void 0===t||t.call(this),this.FDE_disposeWatch=void 0,this._props.context){const t=this._props.context;this.FDE_disposeWatch=this._watchContext(t,(()=>{this._props.onContext(this._consumeContext(t))}),{immediate:!0})}}_onDetach(){var t;this._props.onElement(void 0),null===(t=this.FF0_detachDom)||void 0===t||t.call(this),this.FF0_detachDom=void 0,this.element=void 0}_onUpdate(t){t.className&&(this.element.className=t.className),t.style&&(this.element.style.cssText="",Object.assign(this.element.style,t.style)),t.context&&this.C75_adjustContext()}}o=r.sq,a.defaultProps={tagName:"ymaps"},a[o]=(t,{reactify:e,ReactParent:i,React:o,ReactDOM:s})=>{const n=e.entity(t);return function(t){const[r,a]=o.useState(),[h,l]=o.useState(void 0),c=e.context(t.context);return o.createElement(n,Object.assign({},t,{onElement:a,onContext:l}),o.createElement(i.Provider,{value:void 0},o.createElement(c.Provider,{value:h},r&&s.createPortal(t.children,r))))}}},51804:(t,e,i)=>{i.d(e,{i:()=>s});var o=i(53013);class s extends o.SY{_onAttach(){this._onUpdate(this._props)}_onUpdate({value:t}){const e=this._props.context;e&&t&&this._provideContext(e,t)}}},49378:(t,e,i)=>{i.d(e,{d:()=>S});var o=i(93379),s=i.n(o),n=i(7795),r=i.n(n),a=i(90569),h=i.n(a),l=i(3565),c=i.n(l),d=i(19216),u=i.n(d),_=i(44589),p=i.n(_),m=i(87392),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=h().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=u();s()(m.Z,g);m.Z&&m.Z.locals&&m.Z.locals;var y=i(21131),f=i(42542),C=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]])}return i};var E,A=i(67916),v=i(53013);const M="ymaps3x0--control__background",D="ymaps3x0--control__dark",x=Object.freeze({transparent:!1});class S extends v.SY{constructor(t,e){super(null!=t?t:{}),this.C58_innerElement=e}_createDom(){return document.createElement("ymaps")}_onAttach(){var t;this.EBC_element=this._createDom(),this.EBC_element.classList.add("ymaps3x0--control"),this.C58_innerElement&&this.EBC_element.appendChild(this.C58_innerElement),this.FF0_detachDom=(0,y.sT)(this,this.EBC_element,null!==(t=this.C58_innerElement)&&void 0!==t?t:this.EBC_element),this.EBC_element.classList.toggle(M,!this._props.transparent),this._props.transparent||this.A18__watchThemeContext()}_onUpdate(t){var e,i,o;void 0!==t.transparent&&(t.transparent?(null===(e=this.EBC_element)||void 0===e||e.classList.remove(M,D),null===(i=this.AC9_unwatchThemeContext)||void 0===i||i.call(this)):(null===(o=this.EBC_element)||void 0===o||o.classList.add(M),this.A18__watchThemeContext()))}A18__watchThemeContext(){this.AC9_unwatchThemeContext=this._watchContext(f.N,(()=>this.C53_updateTheme()),{immediate:!0})}_onDetach(){var t,e;null===(t=this.FF0_detachDom)||void 0===t||t.call(this),this.FF0_detachDom=void 0,this.EBC_element=void 0,null===(e=this.AC9_unwatchThemeContext)||void 0===e||e.call(this),this.AC9_unwatchThemeContext=void 0}C53_updateTheme(){const t=this._consumeContext(f.N);if(!t||!this.EBC_element)return;const{theme:e}=t;this.EBC_element.classList.toggle(D,"dark"===e)}}E=A.sq,S.B4B__implName="YMapControl",S.defaultProps=x,S[E]=(t,{reactify:e,React:i,ReactDOM:o})=>{const s=e.entity(class extends t{constructor(t){var{controlElement:e}=t;super(C(t,["controlElement"])),this.B33_controlElement=e}_createDom(){return this.B33_controlElement}}),n=i.forwardRef(((t,e)=>{var{children:n}=t,r=C(t,["children"]);const[a]=i.useState((()=>document.createElement("ymaps")));return i.createElement(i.Fragment,null,i.createElement(s,Object.assign({},r,{ref:e,controlElement:a}),o.createPortal(n,a)))}));return n.displayName="YMapControlContainer",n}},98348:(t,e,i)=>{i.d(e,{A:()=>x,J:()=>D});var o=i(49378),s=i(21131),n=i(53013),r=i(93379),a=i.n(r),h=i(7795),l=i.n(h),c=i(90569),d=i.n(c),u=i(3565),_=i.n(u),p=i(19216),m=i.n(p),g=i(44589),y=i.n(g),f=i(11464),C={};C.styleTagTransform=y(),C.setAttributes=_(),C.insert=d().bind(null,"head"),C.domAPI=l(),C.insertStyleElement=m();a()(f.Z,C);f.Z&&f.Z.locals&&f.Z.locals;var E=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]])}return i};var A,v=i(67916),M=i(42542);class D extends n.SY{_onAttach(){var t;this.EBC_element=document.createElement("button"),this.EBC_element.className="ymaps3x0--button ymaps3x0--control-button",this.EBC_element.type="button",this._props.element&&this.EBC_element.appendChild(this._props.element),this.FF0_detachDom=(0,s.sT)(this,this.EBC_element,null!==(t=this._props.element)&&void 0!==t?t:this.EBC_element),this.B33_updateElement(this._props),this.AC9_unwatchThemeContext=this._watchContext(M.N,(()=>this.C53_updateTheme()),{immediate:!0})}B33_updateElement(t){this.EBC_element&&(void 0!==t.disabled&&(this.EBC_element.disabled=t.disabled),void 0!==t.text&&(this.EBC_element.textContent=t.text),void 0!==t.onClick&&(this.EBC_element.onclick=t.onClick),void 0!==t.color&&(this.EBC_element.style.color=t.color),void 0!==t.background&&(this.EBC_element.style.backgroundColor=t.background))}_onUpdate(t){this.B33_updateElement(t)}_onDetach(){var t,e;null===(t=this.FF0_detachDom)||void 0===t||t.call(this),this.FF0_detachDom=void 0,this.EBC_element=void 0,null===(e=this.AC9_unwatchThemeContext)||void 0===e||e.call(this),this.AC9_unwatchThemeContext=void 0}C53_updateTheme(){const t=this._consumeContext(M.N);if(!t||!this.EBC_element)return;const{theme:e}=t,i="ymaps3x0--control-button__dark";"dark"===e?this.EBC_element.classList.add(i):"light"===e&&this.EBC_element.classList.remove(i)}}D.B4B__implName="YMapControlCommonButton";class x extends n._p{_onAttach(){this.A26_button=new D(this._props),this.B29_control=(new o.d).addChild(this.A26_button),this.addChild(this.B29_control)}_onUpdate(t){var e;null===(e=this.A26_button)||void 0===e||e.update(t)}_onDetach(){this.removeChild(this.B29_control)}get text(){return this._props.text}}A=v.sq,x[A]=(t,{reactify:e,React:i,ReactDOM:o})=>{const s=e.entity(class extends t{constructor(t){super(t)}}),n=i.forwardRef(((t,e)=>{var{children:n,element:r}=t,a=E(t,["children","element"]);const[h]=i.useState((()=>document.createElement("ymaps")));return void 0!==r?i.createElement(s,Object.assign({},a,{ref:e,element:r})):i.createElement(s,Object.assign({},a,{ref:e,element:h}),o.createPortal(n,h))}));return n.displayName="YMapControlButtonContainer",n}},15646:(t,e,i)=>{i.d(e,{l:()=>E,f:()=>v});var o=i(67245),s=i(21131),n=i(53013),r=i(93379),a=i.n(r),h=i(7795),l=i.n(h),c=i(90569),d=i.n(c),u=i(3565),_=i.n(u),p=i(19216),m=i.n(p),g=i(44589),y=i.n(g),f=i(79550),C={};C.styleTagTransform=y(),C.setAttributes=_(),C.insert=d().bind(null,"head"),C.domAPI=l(),C.insertStyleElement=m();a()(f.Z,C);f.Z&&f.Z.locals&&f.Z.locals;const E=new o._y("ControlContext");o.zS.add(E);const A={top:"vertical",left:"horizontal",bottom:"vertical",right:"horizontal"};class v extends n.SY{constructor(t,e){super(t,e)}_onAttach(){this.EBC_element=document.createElement("ymaps"),this._onUpdate(this._props),this.FF0_detachDom=(0,s.sT)(this,this.EBC_element,this.EBC_element)}_onUpdate(t){if(!t.position&&!t.orientation)return;const e=function(t){switch(t.position){case"top":return["top","center","horizontal"];case"left":return["center","left","vertical"];case"bottom":return["bottom","center","horizontal"];case"right":return["center","right","vertical"];default:const[e,i]=t.position.split(" "),o=t.orientation||"horizontal";if("vertical"===A[e]&&"horizontal"===A[i])return[e,i,o];if("horizontal"===A[e]&&"vertical"===A[i])return[i,e,o]}return null}(this._props);this.A12__implProvideContext(E,{position:e}),this.EBC_element.className="ymaps3x0--controls",e?e.forEach((t=>{this.EBC_element.className+=` ymaps3x0--controls_${t}`})):(this.EBC_element.style.setProperty("display","none"),console.error(`Cannot display controls: unknown position: ${this._props.position}`))}_onDetach(){var t;null===(t=this.FF0_detachDom)||void 0===t||t.call(this),this.FF0_detachDom=void 0,this.EBC_element=void 0}}},95282:(t,e,i)=>{i.d(e,{f$:()=>m,EQ:()=>g});var o=i(80437),s=i(78062),n=i(36733),r=i(87459),a=i(79609);let h=0;function l(t,e){const i="jsonp_ymaps3_coverage_"+h++,o=new URLSearchParams({l:t.layers.join(","),lang:t.lang,callback:i}),s=`${t.host}v2/layers_stamps?${o.toString()}`;return(0,a.R6)({url:s,callbackName:i},e).then((t=>{const e={layers:new Map};for(const[i,o]of Object.entries(t.data))e.layers.set(i,{id:i,version:o.version,zoomRange:{min:o.zoomRange[0],max:o.zoomRange[1]}});return e}))}var c=i(53013),d=i(81703),u=i(67245),_=i(89061);function p(t,e){let i;return(...o)=>{clearTimeout(i),i=setTimeout((()=>t(...o)),e)}}const m=new u._y("coverage");u.zS.add(m);class g extends c._p{constructor(t={}){super(t),this.D96_subscriptions=new Set,this.EBD_currentIntervalMs=1/0,this.EBA_queueRequest=p(this.FEF_request.bind(this),16),this.FF1_queueRequestStamps=p(this._requestStamps.bind(this),16);const e=new s.t({onUpdate:p(this.FEF_request.bind(this),1e3)});this.addChild(e)}subscribe(t){const e=new y(t,(()=>{this.D96_subscriptions.delete(e),e.versioned&&this._scheduleStampsRequests()}));return this.D96_subscriptions.add(e),"map"===e.layer&&"admin"===t.maptype&&(e.copyrightsOptions={logo:!1}),this.EBA_queueRequest(),t.versioned&&(this.FF1_queueRequestStamps(),this._scheduleStampsRequests()),e}_onAttach(){this._watchContext(o.X,(()=>this.EB7_onMapContextChange()),{immediate:!0})}_onDetach(){var t;null===(t=this.B4D_abortController)||void 0===t||t.abort(),this.B4D_abortController=void 0}_scheduleStampsRequests(){const t=Array.from(this.D96_subscriptions).filter((t=>t.versioned&&t.versioned.interval>0)).map((t=>t.versioned.interval)),e=Math.min(...t);0!==e&&e!==this.EBD_currentIntervalMs&&(this.B44_stampsRequestsInterval&&clearInterval(this.B44_stampsRequestsInterval),this.FF1_queueRequestStamps(),this.EBD_currentIntervalMs=e,this.B44_stampsRequestsInterval=setInterval((()=>{this._requestStamps()}),this.EBD_currentIntervalMs)),0===e&&(this.EBD_currentIntervalMs=1/0,this.B44_stampsRequestsInterval&&clearInterval(this.B44_stampsRequestsInterval))}EB7_onMapContextChange(){this._consumeContext(o.X)&&this.FEF_request()}FEF_request(){var t;const e=this._consumeContext(o.X),i=this.root;if(!e.map||!i)return;const s=function(t,e){const i=new Set,o=new Set,s=new Set;if(e.forEach((t=>{s.add(t),i.add(t.layer),t.maptype&&o.add(t.maptype)})),0===i.size)return;return{host:t.meta.hosts.apiCoverageService,coordinates:t.map.center,zoom:t.map.zoom,lang:t.meta.lang,layers:Array.from(i).sort(),maptype:Array.from(o).sort()[0],subscriptions:s}}(e,this.D96_subscriptions);if(a=s,h=this.C70_coverageArgs,a===h||a&&h&&function(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}(a.subscriptions,h.subscriptions)&&a.host===h.host&&a.coordinates.join(",")===h.coordinates.join(",")&&a.zoom===h.zoom&&a.lang===h.lang&&a.layers.join(",")===h.layers.join(",")&&a.maptype===h.maptype)return;var a,h;if(null===(t=this.B4D_abortController)||void 0===t||t.abort(),this.B4D_abortController=void 0,this.C70_coverageArgs=s,!this.C70_coverageArgs)return;this.B4D_abortController=new AbortController;const l=e.map;(function(t,e){const{min:i,max:o}=(0,n.oF)(),s=(0,r.q)(t.zoom,i,o),a=new URLSearchParams({l:t.layers.join(","),ll:t.coordinates.join(","),z:Math.round(s).toString(),lang:t.lang});void 0!==t.maptype&&"map"!==t.maptype&&a.set("maptype",t.maptype);const h=`${t.host}v2?${a.toString()}`;return fetch(h,{signal:e}).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${t.url} Status: ${t.status}`);return t.json()})).then((t=>{const e={layers:new Map};for(const i of t){const t=i.zoomRange?{min:i.zoomRange[0],max:i.zoomRange[1]}:void 0,o=Object.assign(Object.assign({},i),{zoomRange:t});e.layers.set(o.id,o)}return e}))})(this.C70_coverageArgs,this.B4D_abortController.signal).then((t=>{var e;const i=this.root,s=null===(e=this._consumeContext(o.X))||void 0===e?void 0:e.map;i&&l===s&&!s.destroyed&&this.D96_subscriptions.forEach((e=>{var i;const o=t.layers.get(e.layer);o&&(e.copyrights=o.copyrights,e.copyrightsOptions=null!==(i=o.copyrightsOptions)&&void 0!==i?i:{},e.versioned||(e.zoomRange=o.zoomRange),e.onUpdate())}))})).catch((t=>{if(!(0,d.D)(t)){if(_.kg.error(t),!this._props.onError)throw t;this._props.onError(t)}}))}_requestStamps(){var t;const e=this._consumeContext(o.X),i=this.root;if(!e.map||!i)return;const s={host:e.meta.hosts.apiCoverageService,lang:e.meta.lang,layers:Array.from(this.D96_subscriptions).filter((t=>t.versioned)).map((t=>t.layer))};null===(t=this.B4D_stampsAbortController)||void 0===t||t.abort(),this.B4D_stampsAbortController=void 0,0!==s.layers.length&&(this.B4D_stampsAbortController=new AbortController,l(s,this.B4D_stampsAbortController.signal).then((t=>{this.D96_subscriptions.forEach((e=>{const i=t.layers.get(e.layer);i&&(e.version=i.version,e.zoomRange=i.zoomRange,e.onUpdate())}))})).catch((t=>{if(!(0,d.D)(t)){if(_.kg.error(t),!this._props.onError)throw t;this._props.onError(t)}})))}}class y{constructor(t,e){this.B29_onDestroy=e,this.copyrightsOptions={},this.layer=t.layer,this.maptype=t.maptype,this.onUpdate=t.onUpdate,this.versioned=t.versioned}destroy(){this.B29_onDestroy()}}},46874:(t,e,i)=>{i.d(e,{h:()=>h});var o=i(82795),s=i(32340),n=i(53013),r=i(90858);const a=Object.freeze({visible:!0,source:"ymaps3x0-default-feature"});class h extends n._p{_onAttach(){const{source:t,zIndex:e}=this._props;this.B29_dataSource=new o.v({id:t}),this.C63_featuresLayer=new s.F({type:"features",source:t,zIndex:e}),this.C79_markerLayer=new s.F({type:"markers",source:t,zIndex:e}),this.addChild(this.B29_dataSource),this._props.visible&&(this.addChild(this.C63_featuresLayer),this.addChild(this.C79_markerLayer))}_onUpdate(t){var e,i,o;const{source:s,zIndex:n}=this._props;null===(e=this.B29_dataSource)||void 0===e||e.update({id:s}),null===(i=this.C63_featuresLayer)||void 0===i||i.update({source:s,zIndex:n}),null===(o=this.C79_markerLayer)||void 0===o||o.update({source:s,zIndex:n}),void 0!==t.visible&&this.C63_featuresLayer&&this.C79_markerLayer&&(t.visible?(this.addChild(this.C63_featuresLayer),this.addChild(this.C79_markerLayer)):(this.removeChild(this.C63_featuresLayer),this.removeChild(this.C79_markerLayer)))}_onDetach(){this.removeChild(this.B29_dataSource),this.removeChild(this.C63_featuresLayer),this.removeChild(this.C79_markerLayer)}}h.B4B__implName="YMapDefaultFeaturesLayer",h.defaultProps=a,(0,r.Qk)(h)},89363:(t,e,i)=>{i.d(e,{V:()=>d});var o=i(4303),s=i(32340),n=i(80437),r=i(76474),a=i(53013),h=i(95282),l=i(132);const c=(0,r._)({visible:!0,source:"ymaps3x0-default-satellite"});class d extends a._p{_onAttach(){const{source:t}=this._props;this.B29_dataSource=new o.b(this.FCC_getTileDataSourceProps()),this.D9C_layer=new s.F({source:t,type:"satellite"}),this.addChild(this.B29_dataSource),this._props.visible&&this.addChild(this.D9C_layer),this.A19_unwatchMapContext=this._watchContext(n.X,(()=>{var t;null===(t=this.B29_dataSource)||void 0===t||t.update(this.FCC_getTileDataSourceProps())}))}_onDetach(){var t,e;null===(t=this.A14_coverageSubscription)||void 0===t||t.destroy(),this.A14_coverageSubscription=void 0,this.removeChild(this.D9C_layer),this.removeChild(this.B29_dataSource),null===(e=this.A19_unwatchMapContext)||void 0===e||e.call(this),this.A19_unwatchMapContext=void 0}_onUpdate(t){var e,i;const{source:o}=this._props;null===(e=this.B29_dataSource)||void 0===e||e.update({id:o}),null===(i=this.D9C_layer)||void 0===i||i.update({source:o}),void 0!==t.visible&&this.D9C_layer&&(t.visible?this.addChild(this.D9C_layer):this.removeChild(this.D9C_layer))}FE2_createTileUrl(t){const{meta:e}=this._consumeContext(n.X);return t=t.replace("%d","{{d|4}}").replace("%l",`lang=${e.lang}`).replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}"),t+="&v="+e.layers.sat.version,e.apikey&&(t+="&apikey="+e.apikey),t}FCC_getTileDataSourceProps(){var t,e,i,o,s,r;const{meta:a,map:c}=this._consumeContext(n.X);if(c.projection.type!==l.C.type)throw new Error("YMapDefaultSatelliteLayer: layer does not support custom projections.");return null!==(t=this.A14_coverageSubscription)&&void 0!==t||(this.A14_coverageSubscription=null===(e=this._consumeContext(h.f$))||void 0===e?void 0:e.subscribe({layer:"sat",maptype:void 0,onUpdate:()=>{this.B29_dataSource&&this.A14_coverageSubscription&&this.B29_dataSource.update({copyrights:this.A14_coverageSubscription.copyrights,zoomRange:this.A14_coverageSubscription.zoomRange})}})),{id:this._props.source,copyrights:null!==(o=null===(i=this.A14_coverageSubscription)||void 0===i?void 0:i.copyrights)&&void 0!==o?o:[],zoomRange:null!==(r=null===(s=this.A14_coverageSubscription)||void 0===s?void 0:s.zoomRange)&&void 0!==r?r:{min:0,max:19},clampMapZoom:!0,raster:{type:"satellite",fetchTile:this.FE2_createTileUrl(a.hosts.satTiles)}}}}d.defaultProps=c},69207:(t,e,i)=>{i.d(e,{f:()=>E});var o=i(27294),s=i(87228),n=i(4303),r=i(32340),a=i(80437),h=i(42542),l=i(76393),c=i(76474),d=i(53013),u=i(95282),_=i(89123);var p=i(48244),m=i(76795),g=i(90858);const y={visible:!0,source:"ymaps3x0-default-scheme",hotspotsEnabled:!0,layers:{ground:{zIndex:1e3},buildings:{zIndex:1100},icons:{zIndex:1200},labels:{zIndex:1300}},get layersInfo(){return Object.keys(y.layers).reduce(((t,e)=>(t[e]={type:e,zIndex:y.layers[e].zIndex},t)),{})},clampMapZoom:!0};let f=!1;const C={map:"map",admin:"admin",driving:"driving",transit:"transit","future-map":"future_map","legacy-map":"map"};class E extends d._p{constructor(){super(...arguments),this.C57_layers={}}_onAttach(){const{source:t,layers:e}=this._props;this.B29_dataSource=new n.b(this.FCC_getTileDataSourceProps()),this.addChild(this.B29_dataSource),Object.keys(e).forEach((i=>{const o=new r.F(Object.assign({source:t,type:i},e[i]));this.C57_layers[i]=o,this._props.visible&&this.addChild(o)}));const{meta:i}=this._consumeContext(a.X);this._props.customization&&!i.allowedFeatures.customization&&console.warn("[ymaps] Map customization is not allowed and will be ignored."),this.A19_unwatchMapContext=this._watchContext(a.X,(()=>{var t;null===(t=this.B29_dataSource)||void 0===t||t.update(this.FCC_getTileDataSourceProps())})),this._props.theme||(this.AC9_unwatchThemeContext=this._watchContext(h.N,(()=>this.C53_updateTheme()),{immediate:!0})),this._consumeContext(l.e)&&this._watchContext(l.e,(()=>{var t;null===(t=this.B29_dataSource)||void 0===t||t.update(this.FCC_getTileDataSourceProps())}))}_onDetach(){var t,e,i;null===(t=this.A14_coverageSubscription)||void 0===t||t.destroy(),this.A14_coverageSubscription=void 0,Object.keys(this.C57_layers).forEach((t=>this.removeChild(this.C57_layers[t]))),this.C57_layers={},this.removeChild(this.B29_dataSource),null===(e=this.A19_unwatchMapContext)||void 0===e||e.call(this),this.A19_unwatchMapContext=void 0,null===(i=this.AC9_unwatchThemeContext)||void 0===i||i.call(this),this.AC9_unwatchThemeContext=void 0}_onUpdate(t){var e,i;const{source:o,layers:s}=this._props;null===(e=this.B29_dataSource)||void 0===e||e.update({id:o}),Object.keys(this.C57_layers).forEach((t=>{s[t]||this.removeChild(this.C57_layers[t])}));const n={};Object.keys(s).forEach((t=>{let e=this.C57_layers[t];e?e.update(Object.assign({source:o,type:t},s[t])):e=new r.F(Object.assign({source:o,type:t},s[t])),n[t]=e,this._props.visible?this.addChild(e,this.children.length):this.removeChild(e)})),this.C57_layers=n,(t.customization||t.theme||void 0!==t.hotspotsEnabled||void 0!==t.hd)&&(null===(i=this.B29_dataSource)||void 0===i||i.update(this.FCC_getTileDataSourceProps()))}FCC_getTileDataSourceProps(){var t,e,i,n,r,h;const c=this._consumeContext(a.X),d=this._consumeContext(l.e),p="dark"===this._props.theme;if(this._props.hd&&!c.meta.allowedFeatures.hd)throw new Error("HD map is not allowed");return this._props.customization&&this.root&&!f&&(!function(t,e=(0,_._K)()){const i=(0,_.yY)(e);if(i){const e=new URLSearchParams({apikey:i.meta.apikey,token:i.meta.token}),o=`${i.meta.hosts.apiCounterService}?${e}`;fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({counters:t})}).catch()}}({custom_map_hits:1},this.root.config),f=!0),this.A14_coverageSubscription&&this.A14_coverageSubscription.maptype===(null==d?void 0:d.type)||(null===(t=this.A14_coverageSubscription)||void 0===t||t.destroy(),this.A14_coverageSubscription=null===(e=this._consumeContext(u.f$))||void 0===e?void 0:e.subscribe({layer:"map",maptype:null==d?void 0:d.type,onUpdate:()=>{var t;this.A14_coverageSubscription&&this.B29_dataSource&&this.B29_dataSource.update({copyrights:null!==(t=this.A14_coverageSubscription.copyrights)&&void 0!==t?t:[],copyrightsOptions:this.A14_coverageSubscription.copyrightsOptions,zoomRange:this.A14_coverageSubscription.zoomRange})}})),{id:this._props.source,copyrights:null!==(n=null===(i=this.A14_coverageSubscription)||void 0===i?void 0:i.copyrights)&&void 0!==n?n:[],copyrightsOptions:null===(r=this.A14_coverageSubscription)||void 0===r?void 0:r.copyrightsOptions,zoomRange:null===(h=this.A14_coverageSubscription)||void 0===h?void 0:h.zoomRange,raster:{type:"ground",fetchTile:A({mapCtx:c,host:c.meta.hosts.mapTiles,typeCtx:d,theme:this._props.theme,hd:this._props.hd,customization:c.meta.allowedFeatures.customization?this._props.customization:void 0}),fetchHotspots:this._props.hotspotsEnabled?(0,s.E)(A({mapCtx:c,host:c.meta.hosts.mapjTiles,typeCtx:d})):void 0},vector:{priority:"high",requestTileSize:"X1",tileBeltSize:1,richPointEnabled:!(0,o.ic)(),tileUrl:v({mapCtx:c,host:c.meta.hosts.vectorTiles,withProjectionQuery:!0,typeCtx:d,hd:this._props.hd}),meshUrl:v({mapCtx:c,host:c.meta.hosts.vectorMeshes,withProjectionQuery:!0}),imageUrl:v({mapCtx:c,host:c.meta.hosts.vectorImages}),glyphRangeUrl:v({mapCtx:c,host:c.meta.hosts.vectorGlyphs}),customization:c.meta.allowedFeatures.customization?this._props.customization:void 0,theme:p?"dark":void 0},clampMapZoom:this._props.clampMapZoom}}C53_updateTheme(){const t=this._consumeContext(h.N);t&&this.update({theme:t.theme})}}function A(t){const{mapCtx:e,host:i,typeCtx:o,theme:s,hd:n,customization:r}=t;let a=i.replace("%l",`lang=${e.meta.lang}`).replace("%d","{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}");if(a+="&v="+e.meta.layers.map.version,e.meta.apikey&&(a+="&apikey="+e.meta.apikey),a+=(0,m.T)(e.map.projection.type),"dark"===s&&(a+="&theme=dark"),(null==o?void 0:o.type)&&C[o.type]&&(a+=`&maptype=${C[o.type]}`),n&&(a+="&hdmode=on"),r){a+=`&style=${(0,p.T)(r)}`}return a}function v(t){const{mapCtx:e,host:i,withProjectionQuery:o=!1,typeCtx:s,hd:n}=t;let r=i.replace("{{lang}}",e.meta.lang).replace("{{version}}",e.meta.layers.map.version);return o&&(r+=(0,m.T)(e.map.projection.type)),e.meta.apikey&&(r+="&apikey="+e.meta.apikey),(null==s?void 0:s.type)&&C[s.type]&&(r+=`&maptype=${C[s.type]}`),n&&(r+="&hdmode=on"),r}E.B4B__implName="YMapDefaultSchemeLayer",E.defaultProps=(0,c._)(y),(0,g.Qk)(E)},53013:(t,e,i)=>{i.d(e,{Fh:()=>s,MY:()=>a,SY:()=>r,_p:()=>n});var o=i(67245);class s extends o.L0{get root(){throw new Error("Not implemented")}get parent(){throw new Error("Not implemented")}}s=o.L0;class n extends o.n5{get root(){throw new Error("Not implemented")}get parent(){throw new Error("Not implemented")}}n=o.n5;class r extends o.MX{get root(){throw new Error("Not implemented")}get parent(){throw new Error("Not implemented")}addChild(t,e){return super.addChild(t,e)}removeChild(t){return super.removeChild(t)}}r=o.MX;class a extends o._y{}a=o._y},82399:(t,e,i)=>{i.d(e,{W:()=>c});var o=i(65036),s=i(53013),n=i(80437),r=i(16300),a=i(46874);const h=Object.freeze({source:a.h.defaultProps.source}),l=new WeakSet;class c extends s.Fh{get id(){return this.A24_id}constructor(t){super(t)}get properties(){return this._props.properties}get geometry(){const t=this._consumeContext(n.X),e=null==t?void 0:t.map.getFeatureById(this.B34_source,this.A24_id);return e?e.geometry:this._props.geometry}_onAttach(){const{map:t}=this._consumeContext(n.X);if(this.A24_id=this._props.id,this.B34_source=this._props.source,void 0===t.getDataSource(this.B34_source)){if(a.h.defaultProps.source===this.B34_source)throw new Error("You are using default data source for features, but it’s not on added to map. Maybe you forgot to add YMapDefaultFeaturesLayer.");throw new Error(`The DataSource with id='${this.B34_source}' was not found. Maybe you forgot to add it.`)}t.addFeature(this.B34_source,{type:"Feature",id:this.A24_id,geometry:this._props.geometry,cookie:this,draggable:this._props.draggable,blockBehaviors:this._props.blockBehaviors,blockEvents:this._props.blockEvents,mapFollowsOnDrag:this._props.mapFollowsOnDrag,disableRoundCoordinates:this._props.disableRoundCoordinates,hideOutsideViewport:this._props.hideOutsideViewport},this._props.style),l.has(t)||(l.add(t),t.dragger.on("dragStart",c.A11_onDragStart),t.dragger.on("dragMove",c.D85_onDragMove),t.dragger.on("dragEnd",c.A12_onDragEnd),t.events.on("click",r.$,c.FCE_onClick),t.events.on("fastclick",r.$,c.FDE_onFastClick),t.events.on("dblclick",r.$,c.EC3_onDoubleClick),t.events.on("mouseenter",r.$,c.B2D_onMouseEnter),t.events.on("mouseleave",r.$,c.FEE_onMouseLeave))}_onDetach(){const{map:t}=this._consumeContext(n.X);t.removeFeatureById(this.B34_source,this.A24_id)}_onUpdate({id:t,source:e,geometry:i}){var o;const{map:s}=this._consumeContext(n.X);(t||e)&&(s.removeFeatureById(this.B34_source,this.A24_id),e&&(this.B34_source=e),t&&(this.A24_id=t)),null!=i||(i=null===(o=s.getFeatureById(this.B34_source,this.A24_id))||void 0===o?void 0:o.geometry),s.upsertFeature(this.B34_source,{type:"Feature",id:this.A24_id,geometry:null!=i?i:this._props.geometry,cookie:this,draggable:this._props.draggable,blockBehaviors:this._props.blockBehaviors,blockEvents:this._props.blockEvents,mapFollowsOnDrag:this._props.mapFollowsOnDrag,disableRoundCoordinates:this._props.disableRoundCoordinates,hideOutsideViewport:this._props.hideOutsideViewport},this._props.style)}FD9__implLoggerProps(){return{geometry:this._props.geometry.type}}_getDefaultProps(){var t;return null!==(t=this.D8D_defaultPropsId)&&void 0!==t||(this.D8D_defaultPropsId="__auto_"+String(c.AB9_uid++)),Object.assign(Object.assign({},c.defaultProps),{id:this.D8D_defaultPropsId})}static A11_onDragStart(t){const e=t.object.cookie;if(!(e instanceof c))return;if(!e._props.onDragStart)return;return e._consumeContext(n.X)?e._props.onDragStart(e._props.geometry.coordinates):void 0}static D85_onDragMove(t){const e=t.object.cookie;if(!(e instanceof c))return;if(!e._props.onDragMove)return;const i=e._consumeContext(n.X);if(!i)return;const s=(0,o.ZE)(t.newGeometry,(t=>i.map.projection.fromWorldCoordinates(t)));return e._props.onDragMove(s.coordinates)}static A12_onDragEnd(t){const e=t.object.cookie;if(!(e instanceof c))return;if(!e._props.onDragEnd)return;const i=e._consumeContext(n.X);if(!i)return;const s=(0,o.ZE)(t.newGeometry,(t=>i.map.projection.fromWorldCoordinates(t)));return e._props.onDragEnd(s.coordinates)}}c.B4B__implName="YMapFeature",c.defaultProps=h,c.AB9_uid=0,c.FCE_onClick=(t,e,i)=>{var o,s;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(s=(o=t.feature.cookie._props).onClick)||void 0===s||s.call(o,i,e))},c.FDE_onFastClick=(t,e,i)=>{var o,s;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(s=(o=t.feature.cookie._props).onFastClick)||void 0===s||s.call(o,i,e))},c.EC3_onDoubleClick=(t,e,i)=>{var o,s;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(s=(o=t.feature.cookie._props).onDoubleClick)||void 0===s||s.call(o,i,e))},c.B2D_onMouseEnter=(t,e,i)=>{var o,s;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(s=(o=t.feature.cookie._props).onMouseEnter)||void 0===s||s.call(o,i,e))},c.FEE_onMouseLeave=(t,e,i)=>{var o,s;"feature"===t.type&&t.feature.cookie instanceof c&&(null===(s=(o=t.feature.cookie._props).onMouseLeave)||void 0===s||s.call(o,i,e))}},82795:(t,e,i)=>{i.d(e,{v:()=>r});var o=i(80437),s=i(53013);const n=Object.freeze({dynamic:!0});class r extends s.Fh{_onAttach(){const{map:t}=this._consumeContext(o.X);t.addDataSource(this._props.id,{type:"geojson",dynamic:this._props.dynamic})}_onDetach(){const{map:t}=this._consumeContext(o.X);t.removeDataSource(this._props.id)}_onUpdate(){this._onDetach(),this._onAttach()}}r.defaultProps=n},8155:(t,e,i)=>{i.d(e,{E:()=>s});var o=i(28400);class s{constructor(t,e){this.geometry=t,this.properties=e,this.id="string"==typeof e.id?e.id:"ymaps-hotspot-"+s.AB9_uid++,Object.defineProperty(this,o.e,{value:this,writable:!1,enumerable:!1})}}s.AB9_uid=0},32340:(t,e,i)=>{i.d(e,{F:()=>r});var o=i(80437),s=i(53013);const n=Object.freeze({zIndex:1500});class r extends s.Fh{_getDefaultProps(t){return Object.assign(Object.assign({},r.defaultProps),{id:`${t.source}:${t.type}`})}_onAttach(){this._consumeContext(o.X).upsertLayer(this._props)}_onDetach(){this._consumeContext(o.X).removeLayer(this._props)}_onUpdate(t,e){const i=this._consumeContext(o.X);void 0!==t.id&&i.removeLayer(e),i.upsertLayer(this._props)}}r.B4B__implName="YMapLayer",r.defaultProps=n},78062:(t,e,i)=>{i.d(e,{t:()=>_});var o=i(27284),s=i(82399),n=i(17783),r=i(80437),a=i(53013),h=i(8155),l=i(46184);function c(t){return{center:t.center.slice(),zoom:t.zoom,get bounds(){return t.bounds.map((t=>t.slice()))}}}function d(t){return{azimuth:t.azimuth,tilt:t.tilt}}function u(t){return Object.assign({},t.size)}class _ extends a.Fh{constructor(){super(...arguments),this.A22_domHandlers=new Map,this.B4F_mapHandlers=new Map,this.D98_behaviorsHandlers=new Map}B30_subscribeDomEvent({map:t},e,i){var o;const s=null!==(o=this._props.layer)&&void 0!==o?o:"any";if(!i||!s)return;const r=(t,e)=>{var o;switch(null==t?void 0:t.type){case"hotspot":{const s=this.C5D__getRealCookie(t.feature.cookie),n=s instanceof h.E?s:new h.E(t.feature.geometry,null!==(o=t.feature.properties[l.u])&&void 0!==o?o:t.feature.properties);return i({type:"hotspot",entity:n,source:t.source,layer:t.layer},e)}case"feature":const s=this.C5D__getRealCookie(t.feature.cookie);return s instanceof n.K?i({type:"marker",entity:s,source:t.source,layer:t.layer},e):i({type:"feature",entity:s,source:t.source,layer:t.layer},e);default:return i(void 0,e)}};t.events.on(e,s,r),this.A22_domHandlers.set(e,{layer:s,innerHandler:r})}A13_subscribeMapEvent(t,e,i){if(!i)return;const{map:s}=t;let n;if("update"===e){let o;n=()=>{t.isUpdating?null!=o||(o=t.group().on("afterUpdate",n)):(null==o||o.offAll(),o=void 0,i({type:e,camera:d(s),location:c(s),mapInAction:s.isInAction}))}}else"resize"===e?n=()=>i({type:e,size:u(s),mapInAction:s.isInAction}):ymaps3.strictMode&&(0,o.h)(!1,`Invalid MapEventType ${e}`);s.on(e,n),this.B4F_mapHandlers.set(e,n)}D90_subscribeMapIndoorPlansEvent({map:t},e,i){if(!i)return;const o=()=>i({type:e,indoorPlans:t.getIndoorPlans()});t.on(e,o),this.B4F_mapHandlers.set(e,o)}D81_subscribeMapStateChanged({map:t},e,i){if(!i)return;const o=()=>i({getLayerState(e,i,o){if(!i)throw new Error("layerType is required");return t.getLayerState(e,i,o)}});t.on("stateChanged",o),this.B4F_mapHandlers.set(e,o)}EBF_subscribeActionEvent({map:t},e,i){if(!i)return;const o=e=>i({type:e,camera:d(t),location:c(t)});t.behaviors.on(e,o),this.D98_behaviorsHandlers.set(e,o)}B42_subscribe(){const t=this._consumeContext(r.X),e=this._props;this.B30_subscribeDomEvent(t,"touchstart",e.onTouchStart),this.B30_subscribeDomEvent(t,"touchmove",e.onTouchMove),this.B30_subscribeDomEvent(t,"touchend",e.onTouchEnd),this.B30_subscribeDomEvent(t,"touchcancel",e.onTouchCancel),this.B30_subscribeDomEvent(t,"pointerdown",e.onPointerDown),this.B30_subscribeDomEvent(t,"pointermove",e.onPointerMove),this.B30_subscribeDomEvent(t,"pointerup",e.onPointerUp),this.B30_subscribeDomEvent(t,"pointercancel",e.onPointerCancel),this.B30_subscribeDomEvent(t,"fastclick",e.onFastClick),this.B30_subscribeDomEvent(t,"click",e.onClick),this.B30_subscribeDomEvent(t,"dblclick",e.onDblClick),this.B30_subscribeDomEvent(t,"mouseup",e.onMouseUp),this.B30_subscribeDomEvent(t,"mousedown",e.onMouseDown),this.B30_subscribeDomEvent(t,"mouseenter",e.onMouseEnter),this.B30_subscribeDomEvent(t,"mouseleave",e.onMouseLeave),this.B30_subscribeDomEvent(t,"mousemove",e.onMouseMove),this.B30_subscribeDomEvent(t,"contextmenu",e.onContextMenu),this.B30_subscribeDomEvent(t,"rightdblclick",e.onRightDblClick),this.A13_subscribeMapEvent(t,"update",e.onUpdate),this.A13_subscribeMapEvent(t,"resize",e.onResize),this.D90_subscribeMapIndoorPlansEvent(t,"indoorPlansChanged",e.onIndoorPlansChanged),this.D81_subscribeMapStateChanged(t,"stateChanged",e.onStateChanged),this.EBF_subscribeActionEvent(t,"actionStart",e.onActionStart),this.EBF_subscribeActionEvent(t,"actionEnd",e.onActionEnd)}FD7_unsubscribe(){const t=this._consumeContext(r.X);this.A22_domHandlers.forEach((({layer:e,innerHandler:i},o)=>{t.map.events.off(o,e,i)})),this.B4F_mapHandlers.forEach(((e,i)=>{t.map.offSingle(i,e)})),this.D98_behaviorsHandlers.forEach(((e,i)=>{t.map.behaviors.offSingle(i,e)}))}_onAttach(){this.B42_subscribe()}_onDetach(){this.FD7_unsubscribe()}_onUpdate(){this.FD7_unsubscribe(),this.B42_subscribe()}C5D__getRealCookie(t){return t instanceof s.W&&t.parent instanceof n.K?t.parent:t}}},17783:(t,e,i)=>{i.d(e,{K:()=>_});var o=i(82399),s=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]])}return i};var n,r=i(21131),a=i(46874),h=i(53013),l=i(67916),c=i(90858),d=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]])}return i};const u=Object.freeze({draggable:!1,mapFollowsOnDrag:!1,blockEvents:!1,blockBehaviors:!1,hideOutsideViewport:!1,zIndex:0,source:a.h.defaultProps.source});class _ extends h.SY{get properties(){return this._props.properties}get coordinates(){var t,e;return null!==(e=null===(t=this.FE9__feature)||void 0===t?void 0:t.geometry.coordinates)&&void 0!==e?e:this._props.coordinates}constructor(t,e){super(t,{container:!0}),this.element=null!=e?e:document.createElement("ymaps")}_onAttach(){var t;this.FE9__feature=new o.W(Object.assign({id:this._props.id,geometry:{type:"Point",coordinates:this._props.coordinates},style:{zIndex:null!==(t=this._props.zIndex)&&void 0!==t?t:0,element:this.element}},this._props)),this._addDirectChild(this.FE9__feature);const[e,i]=(0,r.vi)(this,this.element);this.C6D_destroyDomCtx=i,this.A12__implProvideContext(r.dh,e)}_onDetach(){var t;null===(t=this.C6D_destroyDomCtx)||void 0===t||t.call(this),this._removeDirectChild(this.FE9__feature),this.FE9__feature=void 0}_onUpdate(t){var e,{coordinates:i,zIndex:o}=t;const s=d(t,["coordinates","zIndex"]);void 0!==o&&(s.style={zIndex:o,element:this.element}),i&&(s.geometry={type:"Point",coordinates:i}),null===(e=this.FE9__feature)||void 0===e||e.update(s)}}n=l.sq,_.B4B__implName="YMapMarker",_.defaultProps=u,_[n]=(t,{reactify:e,React:i,ReactDOM:o})=>{const n=e.entity(class extends t{constructor(t){var{markerElement:e}=t;super(s(t,["markerElement"]),e)}}),r=i.forwardRef(((t,e)=>{var r,{children:a}=t,h=s(t,["children"]);const[l]=i.useState((()=>document.createElement("ymaps"))),c=null!==(r=h.markerElement)&&void 0!==r?r:l;return i.createElement(i.Fragment,null,i.createElement(n,Object.assign({},h,{ref:e,markerElement:c})),o.createPortal(a,c))}));return r},(0,c.Qk)(_)},33420:(t,e,i)=>{i.d(e,{d:()=>s});var o=i(25739);class s extends o.h{}},79293:(t,e,i)=>{i.d(e,{d:()=>j});var o=i(72466);const s=6371e3;var n=i(38038),r=i(21131),a=i(42542),h=i(80437),l=i(53013),c=i(78062);function d(t){if(t<1)return function(t){const e=Math.floor(t),i=t-e,o=i.toString().length-2,s=d(Number(i*Math.pow(10,o)));return e+s/Math.pow(10,o)}(t);const e=Math.floor(t).toString().length-1;return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)}var u=i(93379),_=i.n(u),p=i(7795),m=i.n(p),g=i(90569),y=i.n(g),f=i(3565),C=i.n(f),E=i(19216),A=i.n(E),v=i(44589),M=i.n(v),D=i(9194),x={};x.styleTagTransform=M(),x.setAttributes=C(),x.insert=y().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=A();_()(D.Z,x);D.Z&&D.Z.locals&&D.Z.locals;var S=i(51872),b={};b.styleTagTransform=M(),b.setAttributes=C(),b.insert=y().bind(null,"head"),b.domAPI=m(),b.insertStyleElement=A();_()(S.Z,b);S.Z&&S.Z.locals&&S.Z.locals;const w=Object.freeze({maxWidth:74,unit:"metric"});class j extends l._p{constructor(t){super(t,{container:!0}),this.A15_onMapUpdate=()=>{this.A75_updateDistance()}}_onAttach(){this.B45_createDom(),this.EAE_listener=new c.t({onUpdate:this.A15_onMapUpdate}),this.addChild(this.EAE_listener),this.AC9_unwatchThemeContext=this._watchContext(a.N,(()=>this.C53_updateTheme()),{immediate:!0}),this.A75_updateDistance()}_onDetach(){var t,e;null===(t=this.FF0_detachDom)||void 0===t||t.call(this),this.FF0_detachDom=void 0,null===(e=this.AC9_unwatchThemeContext)||void 0===e||e.call(this),this.AC9_unwatchThemeContext=void 0,this.EBC_element=void 0,this.C56_labelElement=void 0}B45_createDom(){this.EBC_element=document.createElement("ymaps"),this.EBC_element.classList.add("ymaps3x0--map-scale");const t=document.createElement("ymaps");t.classList.add("ymaps3x0--map-scale_line"),this.C56_labelElement=document.createElement("ymaps"),this.C56_labelElement.classList.add("ymaps3x0--map-scale_label"),t.appendChild(this.C56_labelElement),this.EBC_element.appendChild(t),this.FF0_detachDom=(0,r.sT)(this,this.EBC_element,null)}FE2_updateDom(t,e){this.EBC_element&&this.C56_labelElement&&(this.EBC_element.style.width=`${e}px`,this.C56_labelElement.textContent=this.C66_formatDistance(t))}C53_updateTheme(){const t=this._consumeContext(a.N);if(!t||!this.EBC_element)return;const{theme:e}=t,i="ymaps3x0--map-scale__dark";"dark"===e?this.EBC_element.classList.add(i):"light"===e&&this.EBC_element.classList.remove(i)}A75_updateDistance(){const t=this._consumeContext(h.X);if(!t)return;const{zoom:e,center:i,projection:r}=t.map,{maxWidth:a}=this._props,l=r.toWorldCoordinates(i),c=n.B.worldToPixels(l,e),u=n.B.pixelsToWorld({x:c.x-a/2,y:c.y},e),_=n.B.pixelsToWorld({x:c.x+a/2,y:c.y},e),p=function(t,e){const i=o.Z*(e[1]-t[1]),n=o.Z*(e[0]-t[0]),r=o.Z*t[1],a=o.Z*e[1],h=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(n/2),2)*Math.cos(r)*Math.cos(a);return s*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}(r.fromWorldCoordinates(u),r.fromWorldCoordinates(_)),m=(g=p,"imperial"===(y=this._props.unit)?g/1609.34:"nautical"===y?g/1852.2:g);var g,y;const f=d(m),C=a*f/m;this.FE2_updateDom(f,C)}C66_formatDistance(t){const e=this._consumeContext(h.X);if(e){const{ruler:i}=e.meta,{unit:o}=this._props;switch(o){case"metric":return t<1e3?`${t} ${i.mText}`:`${t/1e3} ${i.kmText}`;case"imperial":return`${t} ${i.mileText}`;case"nautical":return`${t} nmi`}}return t.toString()}}j.defaultProps=w},4303:(t,e,i)=>{i.d(e,{b:()=>l});var o=i(80437),s=i(53013),n=i(19529),r=i(93439),a=i(90858),h=i(89061);class l extends s.Fh{constructor(){super(...arguments),this.B44_onVectorContextUpdate=()=>{const{map:t}=this._consumeContext(o.X);if(t.getDataSource(this.A24_id)){const e=t.getDataSource(this.A24_id);if("tile"===(null==e?void 0:e.type)){const i=this.B37_getDataSourceDescription(this._props);t.updateTileDataSource(this.A24_id,Object.assign(Object.assign({},e),{vector:i.vector}))}}}}_onAttach(){const{map:t}=this._consumeContext(o.X);this.A24_id=this._props.id,t.addDataSource(this.A24_id,this.B37_getDataSourceDescription(this._props),h.kg),this._watchContext(r.$,this.B44_onVectorContextUpdate)}_onDetach(){const{map:t}=this._consumeContext(o.X);t.removeDataSource(this._props.id)}_onUpdate(t){const{map:e}=this._consumeContext(o.X);t.id&&(e.removeDataSource(this.A24_id),this.A24_id=t.id);const i=Object.assign(Object.assign({},e.getDataSource(this.A24_id)),this.B37_getDataSourceDescription(this._props));e.getDataSource(this._props.id)?e.updateTileDataSource(this._props.id,i):e.addDataSource(this._props.id,i)}B37_getDataSourceDescription(t){return Object.assign({},(0,n.o)({type:"tile",zoomRange:t.zoomRange,clampMapZoom:t.clampMapZoom,raster:t.raster,vector:this.B30_prepareVectorSource(t.vector),copyrights:t.copyrights,copyrightsOptions:t.copyrightsOptions}))}B30_prepareVectorSource(t){const e=this._consumeContext(o.X),i=this._consumeContext(r.$);if(t){if((t.richModelEnabled||t.richPointEnabled)&&!e.meta.allowedFeatures.tile3d&&!(0,a.Nw)(this))throw new Error("Rich models are not allowed");return(t.richModelEnabled||t.richPointEnabled)&&!t.richModelDecoderWorkerUrl&&i.vector&&(t=Object.assign(Object.assign({},t),{richModelDecoderWorkerUrl:i.richModelDecoderUrl})),t}}}l.B4B__implName="YMapTileDataSource"},76474:(t,e,i)=>{function o(t){return Object.getOwnPropertyNames(t).forEach((e=>{const i=t[e];"object"==typeof i&&null!==i&&o(i)})),Object.freeze(t)}i.d(e,{_:()=>o})},90858:(t,e,i)=>{i.d(e,{BC:()=>r,Nw:()=>a,Qk:()=>n});var o=i(67245);const s=new WeakSet;function n(t){if(t instanceof o.ru)throw new Error("Do not mark RootEntity as domestic.");s.add(t)}function r(t){return s.has(t)}function a(t){for(;t;t=t.parent)if(s.has(t.constructor))return t;return null}},76795:(t,e,i)=>{i.d(e,{T:()=>s});const o=new Map([["EPSG:3857","web_mercator"]]);function s(t){if(!t)return"";const e=o.get(t);return e?"&projection="+e:""}},79609:(t,e,i)=>{i.d(e,{R6:()=>a,xq:()=>n,zM:()=>r});var o=i(81703),s=i(19529);function n(t){if(void 0!==t)return Number(t)}function r(t,e){const i=(0,s.o)(e);return t+"?"+new URLSearchParams(i)}function a({url:t,callbackName:e},i){if(!e)throw new Error("jsonp: pseudo-unique callbackName required.");return new Promise(((s,n)=>{Object.defineProperty(window,e,{enumerable:!1,writable:!1,configurable:!0,value:t=>{delete window[e],document.head.removeChild(r),s(t)}});const r=document.createElement("script");r.src=t,document.head.appendChild(r),null==i||i.addEventListener("abort",(()=>n((0,o.o)())),{once:!0}),r.onerror=()=>{n(new Error("fetching failed.")),document.head.removeChild(r)}}))}},26486:(t,e,i)=>{function o(t){let e,i=!1;return(...o)=>{e=o,i||(i=!0,queueMicrotask((()=>{i=!1,t(...e)})))}}i.d(e,{U:()=>o})},19529:(t,e,i)=>{function o(t,e=!0){return Object.keys(t).forEach((i=>{void 0===t[i]?delete t[i]:e&&t[i]===Object(t[i])&&o(t[i])})),t}i.d(e,{o:()=>o})},67916:(t,e,i)=>{i.d(e,{Kj:()=>n,sq:()=>o,wt:()=>s});const o=Symbol.for("The symbol key is only for overriding the reactify result."),s=Symbol.for("The symbol key is only for overriding the vuefy result."),n=Symbol.for("The symbol key is only for overriding the vuefy options.")},3127:(t,e,i)=>{i.d(e,{W:()=>o});const o={getLink:s,open:function(t){window.open(s(t),"_blank")}};function s({center:t,zoom:e}){return`https://yandex.ru/maps/?from=api-maps&ll=${encodeURIComponent(t.join(","))}&origin=jsapi_3&z=${e}&l=map`}},12498:(t,e,i)=>{i.r(e),i.d(e,{B28__implReactifyOverride:()=>se,Config:()=>T.De,ControlContext:()=>D.l,EC1__implReactify:()=>o,ThemeContext:()=>l.N,TypeContext:()=>c.e,YMap:()=>h.O,YMapCollection:()=>b,YMapComplexEntity:()=>u._p,YMapContainer:()=>w.h,YMapContext:()=>u.MY,YMapContextProvider:()=>d.i,YMapControl:()=>x.d,YMapControlButton:()=>S.A,YMapControlCommonButton:()=>S.J,YMapControls:()=>D.f,YMapDefaultFeaturesLayer:()=>_.h,YMapDefaultSatelliteLayer:()=>m.V,YMapDefaultSchemeLayer:()=>p.f,YMapEntity:()=>u.Fh,YMapFeature:()=>g.W,YMapFeatureDataSource:()=>y.v,YMapGroupEntity:()=>u.SY,YMapHotspot:()=>E.E,YMapLayer:()=>f.F,YMapListener:()=>C.t,YMapMarker:()=>v.K,YMapScaleControl:()=>j.d,YMapTileDataSource:()=>M.b,fetchConfig:()=>Qt.Q,geolocation:()=>Wt,getDefaultConfig:()=>T._K,optionsKeyVuefy:()=>A.Kj,overrideKeyReactify:()=>A.sq,overrideKeyVuefy:()=>A.wt,projections:()=>Ht,route:()=>Ut,search:()=>Q,strictMode:()=>Vt,suggest:()=>it,useDomContext:()=>Gt.sT,yandexMaps:()=>B.W});var o={};i.r(o),i.d(o,{reactify:()=>oe});var s=i(33420),n=i(87459),r=i(72466);class a{constructor(){this.B35_maxLatitudeRad=Math.atan(Math.sinh(Math.PI)),this.type="EPSG:3857"}toWorldCoordinates(t){return{x:this.B3B_longitudeToWorldX(t[0]),y:this.D86_latitudeToWorldY(t[1])}}fromWorldCoordinates(t){return[this.C71_worldXToLongitude(t.x),this.C72_worldYToLatitude(t.y)]}C71_worldXToLongitude(t){return(0,n.d)(t*Math.PI*r.j,-180,180)}B3B_longitudeToWorldX(t){return(0,n.d)(t*r.Z/Math.PI,-1,1)}D86_latitudeToWorldY(t){const e=(0,n.q)(t*r.Z,-this.B35_maxLatitudeRad,this.B35_maxLatitudeRad),i=Math.tan(Math.PI/4+e/2);return Math.log(i)/Math.PI}C72_worldYToLatitude(t){const e=-t*Math.PI,i=Math.PI/2-2*Math.atan(Math.exp(e));return(0,n.q)(i*r.j,-90,90)}}var h=i(9190),l=i(42542),c=i(76393),d=i(51804),u=i(53013),_=i(46874),p=i(69207),m=i(89363),g=i(82399),y=i(82795),f=i(32340),C=i(78062),E=i(8155),A=i(67916),v=i(17783),M=i(4303),D=i(15646),x=i(49378),S=i(98348);class b extends u.SY{}b.B4B__implName="YMapCollection";var w=i(25739),j=i(79293),B=i(3127),L=i(19529),z=i(79609),T=i(89123),I=i(3488),N=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};const F={businesses:"biz",toponyms:"geo"};function O(t){return t=t.map((([t,e])=>[(0,n.d)(t,0,180),e])),[Math.abs(t[0][0]-t[1][0]),Math.abs(t[1][0]-t[1][1])]}let R=0;const P=()=>"jsonp_ymaps3_search_"+R++;function k(t,e){var i;return N(this,void 0,void 0,(function*(){const{lang:o,token:s,apikey:n,hosts:r}=e.meta,a={lang:o,token:s,apikey:n,text:t.text,uri:t.uri,callback:P(),rspn:(0,z.xq)(t.strictBounds),results:t.limit,skip:t.offset,origin:"jsapi3Geocoder",geocoder_sco:"longlat",z:t.zoom};if(a.type=null===(i=t.type)||void 0===i?void 0:i.map((t=>F[t])).filter(Boolean).join(","),Array.isArray(t.bounds)){const{ll:e,spn:i}=function(t){const e=t.map((t=>I.L.toWorldCoordinates(t)));return{ll:I.L.fromWorldCoordinates({x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}),spn:O(t)}}(t.bounds);a.ll=e.join(","),a.spn=i.join(",")}else t.center&&t.span?(a.ll=t.center.join(","),a.spn=t.span.join(",")):(delete a.ll,delete a.spn);const h=(0,z.zM)(r.apiSearchService,a);return function({data:t}){return t.features.map((({properties:t,geometry:e})=>(0,L.o)({geometry:e,properties:{name:t.name,description:t.description}})))}(yield(0,z.R6)({url:h,callbackName:a.callback}))}))}var Y=i(89061),Z=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};const U={businesses:"biz",toponyms:"geo"};function W(t){return t=t.map((([t,e])=>[(0,n.d)(t,0,180),e])),[Math.abs(t[0][0]-t[1][0]),Math.abs(t[1][0]-t[1][1])]}const G=h.O.defaultProps.projection||I.L;function Q(t,e=(0,T._K)()){var i,o;return Z(this,void 0,void 0,(function*(){Y.kg.info({group:"call",payload:{name:"search"}});const s=(0,T.yY)(e);if(!s)throw new Error("Config not specified");if(!s.meta.apikey)throw new Error("Apikey must be specified in order to use search");const{lang:n,apikey:r,hosts:a}=s.meta,h=null===(i=s.apikeys)||void 0===i?void 0:i.search;if(!h&&s.meta.allowedFeatures.deprecatedSearch)return t.text&&""!==t.text?k(t,s):[];if(!(t.text&&""!==t.text||t.uri&&""!==t.uri))return[];const l={lang:n,apikey:h||r,text:t.text,uri:t.uri,rspn:(0,z.xq)(t.strictBounds),results:t.limit,skip:t.offset,sco:"longlat"};if(l.type=null===(o=t.type)||void 0===o?void 0:o.map((t=>U[t])).filter(Boolean).join(","),Array.isArray(t.bounds)){const{ll:e,spn:i}=function(t){const e=t.map((t=>G.toWorldCoordinates(t)));return{ll:G.fromWorldCoordinates({x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}),spn:W(t)}}(t.bounds);l.ll=e.join(","),l.spn=i.join(",")}else t.center&&t.span?(l.ll=t.center.join(","),l.spn=t.span.join(",")):(delete l.ll,delete l.spn);const c=(0,z.zM)(a.searchApi+"v1/",l);return fetch(c).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${t.url} Status: ${t.status}`);return t.json()})).then((t=>(t.features||[]).map((({properties:t,geometry:e})=>(0,L.o)({geometry:e,properties:{name:t.name,description:t.description}})))))}))}var H=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};const V={all:"all",toponyms:"tp",addresses:"addr",organizations:"org"};let $=0;const X=()=>"jsonp_ymaps3_suggest_"+$++;function q(t,e){return H(this,void 0,void 0,(function*(){const i={lang:e.meta.lang,apikey:e.meta.apikey,text:t.text,highlight:(0,z.xq)(t.highlight),n:t.limit,local_only:t.localOnly,type:t.type?V[t.type]:void 0,v:9,callback:X()};Array.isArray(t.bounds)?i.bbox=t.bounds.join(","):Array.isArray(t.center)&&Array.isArray(t.span)&&(i.ll=t.center.join(","),i.spn=t.span.join(","));const o=(0,z.zM)(e.meta.hosts.suggestApi,i),s=yield(0,z.R6)({url:o,callbackName:i.callback});return s.results.map((t=>(0,L.o)({type:t.type,title:t.title,subtitle:t.subtitle,value:t.text,uri:t.uri})))}))}var K=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};const J={all:["biz","geo"],toponyms:["geo"],addresses:["house"],organizations:["biz"]};function tt(t){return{text:t.text,hl:(t.hl||[]).map((t=>[t.begin,t.end]))}}function et(t){if(t)return{formattedAddress:t.formatted_address,component:t.component}}function it(t,e=(0,T._K)()){var i;return K(this,void 0,void 0,(function*(){Y.kg.info({group:"call",payload:{name:"suggest"}});const o=(0,T.yY)(e);if(!o)throw new Error("Config not specified");if(!o.meta.apikey)throw new Error("Apikey must be specified in order to use suggest");if(!t.text)return[];const s=null===(i=o.apikeys)||void 0===i?void 0:i.suggest;if(!s&&o.meta.allowedFeatures.deprecatedSuggest)return q(t,o);const n={lang:o.meta.lang,apikey:s||o.meta.apikey,text:t.text,highlight:(0,z.xq)(t.highlight),print_address:1,attrs:"uri",results:t.limit,strict_bounds:t.localOnly};Array.isArray(t.bounds)?n.bbox=t.bounds.join(","):Array.isArray(t.center)&&Array.isArray(t.span)&&(n.ll=t.center.join(","),n.spn=t.span.join(","));const r=t.types||t.type&&J[t.type];r&&(n.types=r.join(","));const a=(0,z.zM)(o.meta.hosts.suggestApi.replace("/suggest-geo","/v1/suggest"),n),h=yield fetch(a);if(!h.ok)throw new Error(`Failed to fetch ${h.url} Status: ${h.status}`);const l=yield h.json();return(l.results||[]).map((t=>{var e,i;const o=(null===(e=t.tags)||void 0===e?void 0:e.includes("business"))?"business":"toponym";return(0,L.o)({value:"business"===o?t.title.text:(null===(i=t.address)||void 0===i?void 0:i.formatted_address)||t.title.text,type:o,title:tt(t.title),subtitle:t.subtitle?tt(t.subtitle):void 0,tags:t.tags,distance:t.distance,uri:t.uri,address:et(t.address)})}))}))}function ot(t){return t.map((([t,e])=>[e,t]))}function st(t){return Object.assign(Object.assign({},t),{route:Object.assign(Object.assign({},t.route),{legs:t.route.legs.map((t=>Object.assign(Object.assign({},t),{steps:t.steps.map((t=>Object.assign(Object.assign({},t),{polyline:Object.assign(Object.assign({},t.polyline),{points:ot(t.polyline.points)})})))})))})})}function nt(t){return t.every((t=>t.every(isFinite)))}function rt(t,e,i){const o={type:"Feature",id:e,geometry:{type:"LineString",coordinates:[]},properties:{}};let s=[[1/0,1/0],[-1/0,-1/0]];const{route:n}=t;return n.legs.forEach((t=>{t.steps.forEach((t=>{t.polyline.points.forEach((t=>{o.geometry.coordinates.push(t),(null==i?void 0:i.bounds)&&(s[0][0]=Math.min(s[0][0],t[0]),s[0][1]=Math.min(s[0][1],t[1]),s[1][0]=Math.max(s[1][0],t[0]),s[1][1]=Math.max(s[1][1],t[1]))}))}))})),n.flags&&(o.properties.flags=n.flags),nt(s)&&(o.properties.bounds=s),o}function at(t,e,i,o){const s={type:"Feature",id:e,geometry:{type:"LineString",coordinates:t.polyline.points},properties:{length:t.length,duration:t.duration,mode:t.mode}};if(null==o?void 0:o.bounds){const e=function(t){const e=[[1/0,1/0],[-1/0,-1/0]];return t.forEach((t=>{e[0][0]=Math.min(e[0][0],t[0]),e[0][1]=Math.min(e[0][1],t[1]),e[1][0]=Math.max(e[1][0],t[0]),e[1][1]=Math.max(e[1][1],t[1])})),e}(t.polyline.points);s.properties.bounds=nt(e)?e:void 0}return i.flags&&(s.properties.flags=i.flags),s}var ht,lt=function(t,e,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:e.set(t,i),i},ct=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};let dt=0;const ut=()=>"ymaps3x0-route-feature-"+dt++;ht=new WeakMap;const _t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",pt=new Uint8Array(128);for(let t=0;t<65;t++)pt[_t.charCodeAt(t)]=t;function mt(t){t=t.replace(/[^A-Za-z0-9\-\+_\=]/g,"");const e=[];let i=0,o=0,s=0,n=0,r=[0,0],a=[0,0];function h(t){o|=t<<8*n,n++,n%4==0&&(a[s]=o/1e6+r[s],s++,n=0,o=0,s%2==0&&(r=a,e.push(a),a=[0,0],s=0))}for(;i<t.length;){const e=pt[t.charCodeAt(i++)],o=pt[t.charCodeAt(i++)],s=pt[t.charCodeAt(i++)],n=pt[t.charCodeAt(i++)],r=(15&o)<<4|s>>2,a=(3&s)<<6|n;h(e<<2|o>>4),64!==s&&h(r),64!==n&&h(a)}return e}function gt({data:t}){if(0===t.features.length)return[];const e=t.features[0];return 0===e.features.length?[]:[e]}var yt,ft=function(t,e,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:e.set(t,i),i},Ct=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};let Et=0;yt=new WeakMap;var At,vt=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};!function(t){t[t.UNKNOWN=1]="UNKNOWN",t[t.CLOSED=2]="CLOSED",t[t.FREE=3]="FREE",t[t.LIGHT=4]="LIGHT",t[t.HARD=5]="HARD",t[t.VERY_HARD=6]="VERY_HARD"}(At||(At={}));let Mt=0;const Dt=()=>"jsonp_ymaps3_route_"+Mt++,xt={driving:class{constructor(t,e){yt.set(this,void 0),this.B2B_options=e,ft(this,yt,t,"f")}toRoute(){var t;const{features:e,properties:i}=Ct(this,yt,"f"),o={type:"Feature",id:"ymaps3x0-route-feature-"+Et++,geometry:{type:"LineString",coordinates:[]},properties:{}};let s=[],n=[[1/0,1/0],[-1/0,-1/0]];for(const i of e){if(mt(i.properties.encodedCoordinates).forEach((t=>{var e;o.geometry.coordinates.push(t),(null===(e=this.B2B_options)||void 0===e?void 0:e.bounds)&&(n[0][0]=Math.min(n[0][0],t[0]),n[0][1]=Math.min(n[0][1],t[1]),n[1][0]=Math.max(n[1][0],t[0]),n[1][1]=Math.max(n[1][1],t[1]))})),null===(t=this.B2B_options)||void 0===t?void 0:t.jams){const t=i.properties.jams;t?void 0!==s&&t.forEach((t=>null==s?void 0:s.push(t))):s=void 0}}const r=null==i?void 0:i.RouteMetaData;return r&&"object"==typeof r&&"hasTolls"in r&&(o.properties.flags={hasTolls:Boolean(r.hasTolls)}),s&&(o.properties.jams=s),function(t){return t.every((t=>t.every(isFinite)))}(n)&&(o.properties.bounds=n),o}}};var St,bt=function(t,e,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:e.set(t,i),i},wt=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};let jt=0;const Bt=()=>"ymaps3x0-route-transit-feature-"+jt++;St=new WeakMap;var Lt,zt=function(t,e,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:e.set(t,i),i},Tt=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};let It=0;const Nt=()=>"ymaps3x0-route-truck-feature-"+It++;Lt=new WeakMap;var Ft,Ot=function(t,e,i,o,s){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?s.call(t,i):s?s.value=i:e.set(t,i),i},Rt=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};let Pt=0;const kt=()=>"ymaps3x0-route-walking-feature-"+Pt++;Ft=new WeakMap;var Yt=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function a(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((o=o.apply(t,e||[])).next())}))};const Zt={driving:class{constructor(t,e){ht.set(this,void 0),this.B2B_options=e,lt(this,ht,st(t),"f")}toRoute(){return rt(ct(this,ht,"f"),ut(),this.B2B_options)}toSteps(){const{route:t}=ct(this,ht,"f"),e=[];return t.legs.forEach((i=>{i.steps.forEach((i=>{e.push(at(i,ut(),t,this.B2B_options))}))})),e}},truck:class{constructor(t,e){Lt.set(this,void 0),this.B2B_options=e,zt(this,Lt,st(t),"f")}toRoute(){return rt(Tt(this,Lt,"f"),Nt(),this.B2B_options)}toSteps(){const{route:t}=Tt(this,Lt,"f"),e=[];return t.legs.forEach((i=>{i.steps.forEach((i=>{e.push(at(i,Nt(),t,this.B2B_options))}))})),e}},walking:class{constructor(t,e){Ft.set(this,void 0),this.B2B_options=e,Ot(this,Ft,st(t),"f")}toRoute(){return rt(Rt(this,Ft,"f"),kt(),this.B2B_options)}toSteps(){const{route:t}=Rt(this,Ft,"f");return t.legs.map((e=>at(e.steps[0],kt(),t,this.B2B_options)))}},transit:class{constructor(t,e){St.set(this,void 0),this.B2B_options=e,bt(this,St,st(t),"f")}toRoute(){return rt(wt(this,St,"f"),Bt(),this.B2B_options)}toSteps(){const{route:t}=wt(this,St,"f"),e=[];return t.legs.forEach((i=>{i.steps.forEach((i=>{const o=at(i,Bt(),t,this.B2B_options);o.properties.featureClass=i.feature_class,e.push(o)}))})),e}}};function Ut(t,e=(0,T._K)()){var i;return Yt(this,void 0,void 0,(function*(){Y.kg.info({group:"call",payload:{name:"route"}});const o=(0,T.yY)(e);if(!o)throw new Error("Config not specified");if(!o.meta.apikey)throw new Error("Apikey must be specified in order to request routes");const s=null===(i=o.apikeys)||void 0===i?void 0:i.router;if(!s&&o.meta.allowedFeatures.deprecatedRouter)return function(t,e){return vt(this,void 0,void 0,(function*(){if(!e.meta.allowedFeatures.router)throw new Error("Route requests is not allowed");if(!(t.type in xt))throw new TypeError("Only 'driving' type must be specified at this moment.");if(t.results&&1!==t.results)throw new TypeError("Only one result must be specified");const i=t.points.map((t=>"type"in t?t:{type:"way",coordinates:t})),o=i.map(((t,e)=>"via"===t.type?e:null)).filter((t=>null!==t));if(i.length-o.length<2)throw new RangeError("We need at least 2 waypoints to build a route");const{lang:s,token:n,apikey:r,hosts:a}=e.meta,h=i.map((({coordinates:t})=>t.join(","))).join("~"),l={rtm:"dtr",results:(t.results||1).toString(),token:n,rll:h,lang:s,apikey:r,callback:Dt()};o.length&&(l.via=o.join(",")),t.jams&&(l.jams="1"),t.avoidTolls&&(l.avoid_tolls="1");const c=(0,z.zM)(`${a.apiRouteService}2.0/`,l);return(0,z.R6)({url:c,callbackName:l.callback}).then(gt).then((e=>e.map((e=>new xt[t.type](e,t)))))}))}(t,o);if(!(t.type in Zt))throw new TypeError("Only 'driving', 'truck', 'walking', or 'transit' types can be specified at this moment.");const n={waypoints:ot(t.points).map((t=>t.join(","))).join("|"),apikey:s||o.meta.apikey,mode:t.type};n.avoid_tolls=!0===t.avoidTolls?"1":void 0;const r=t.truck;n.weight=null==r?void 0:r.weight,n.axle_weight=null==r?void 0:r.axleWeight,n.max_weight=null==r?void 0:r.maxWeight,n.payload=null==r?void 0:r.payload,n.height=null==r?void 0:r.height,n.width=null==r?void 0:r.width,n.length=null==r?void 0:r.length,n.eco_class=null==r?void 0:r.ecoClass,n.has_trailer=!0===(null==r?void 0:r.hasTrailer)?"1":void 0;const a=(0,z.zM)(o.meta.hosts.routerApi,n);return fetch(a).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${t.url} Status: ${t.status}`);return t.json()})).then((e=>[new Zt[t.type](e,t)]))}))}const Wt={getPosition:function(t,e=(0,T._K)()){return new Promise(((i,o)=>window.navigator.geolocation.getCurrentPosition(i,(()=>{const t=(0,T.yY)(e);if(!t)return void o(new Error("Config not specified"));const s=t.meta.geolocation;s?i({coords:{longitude:s.long,latitude:s.lat}}):o(new Error("Geolocation could not be determined"))}),t))).then((({coords:t})=>({coords:[t.longitude,t.latitude],accuracy:t.accuracy})))}};var Gt=i(21131),Qt=i(66810);const Ht={sphericalMercator:new a};let Vt=!1;var $t=i(67245),Xt=i(38178),qt=i(26486);let Kt;class Jt{constructor(t,e){this.A17__implValue=t,this.EB2__implDeps=e}}function te(t,e){return new Jt(t,null!=e?e:[])}function ee(t,e){const i=new WeakMap,o=new WeakSet;null!=Kt||(Kt=t.createContext(void 0)),Kt.displayName="YMaps3Parent";const s=(t,e)=>{if(!(t.current&&t.current instanceof $t.MX&&Array.isArray(e.current)))return;const i=t.current.children,o=e.current.filter((t=>t.current));for(let e=0;e<o.length&&e<i.length;e++){const{current:s}=o[e];s&&s!==i[e]&&t.current.addChild(s,e)}for(let e=i.length-1;e>=o.length;e--)t.current.removeChild(i[e]);for(let e=i.length;e<o.length;e++){const{current:i}=o[e];i&&t.current.addChild(i)}};const n=new $t._y("NopContext"),r=new Map;const a={entity:function(n,r=n.name){if(i.has(n))return i.get(n);const h=A.sq in n?n[A.sq]:null;if(h&&!o.has(h))try{return o.add(h),i.set(n,h(n,{reactify:a,ReactParent:Kt,React:t,ReactDOM:e})),i.get(n)}finally{o.delete(h)}return i.set(n,function(e,i=e.name){const o=function(e){if(t.version.startsWith("19")){return t=>{var i;return e(t,null!==(i=t.ref)&&void 0!==i?i:null)}}return t.forwardRef(e)}(((i,o)=>{const n=t.useRef(),[r,a]=function(t){var e,i;const o=t.useRef(),s=t.useRef();return null!==(e=o.current)&&void 0!==e||(o.current={}),null!==(i=s.current)&&void 0!==i||(s.current=t=>{const e=o.current,i={};for(const o of Object.keys(t)){const s=t[o];if(s instanceof Jt){const t=e[o];t&&(0,Xt.R)(s.EB2__implDeps,t.EB2__implDeps)?i[o]=$t.Ip:(i[o]=s.A17__implValue,e[o]=s)}else i[o]=s,delete e[o]}for(const i of Object.keys(e))i in t||delete e[i];return i}),[s.current,()=>{o.current={}}]}(t);t.useEffect((()=>{const t=new e(r(i));return n.current=t,function(t,e){if(!t)return;"function"==typeof t?t(e):t.current=e}(o,t),()=>{t instanceof $t.ru&&t.destroy(),n.current=void 0,a()}}),[n]),function(e,i){const o=t.useContext(Kt),s=null==o?void 0:o[0];if(!(s||i.prototype instanceof $t.ru))throw new Error(`${i.name} is not attached to a parent`);const n=s?s.positionChild(e):-1;t.useEffect((()=>{null==s||s.requestReposition()}),[e,s,n]),t.useEffect((()=>()=>{null==s||s.requestReposition()}),[s])}(n,e),t.useEffect((()=>{var t;null===(t=n.current)||void 0===t||t.FCD__implUpdateProps(r(i))}),[n,i]);const h=function(e){const i=t.useRef([]),o=t.useRef({entityRef:e,requestReposition:(0,qt.U)((()=>{s(o.current.entityRef,i)})),positionChild:t=>{const e=i.current.indexOf(t);return-1!==e?e:i.current.push(t)-1}});return t.useEffect((()=>{s(e,i)}),[o,e,i]),i.current.length=0,[o.current]}(n);return t.createElement(Kt.Provider,{value:h},i.children)}));return o.displayName=i,o.Entity=e,o}(n,r)),i.get(n)},module:function(t){const e={};for(const i of Object.keys(t)){const o=t[i];if(o&&"function"==typeof o&&$t.L0.isPrototypeOf(o)){const t=o;e[i]=a.entity(t)}else o instanceof $t._y?e[i]=a.context(o):e[i]=o}return"function"==typeof t.B28__implReactifyOverride&&(delete e.B28__implReactifyOverride,Object.assign(e,t.B28__implReactifyOverride(a))),e},context:function(e){const i=null!=e?e:n;let o=r.get(i);return o||(o=t.createContext(void 0),o.displayName=i.name,r.set(i,o)),o},useDefault:te};return a}const ie=/^1[6789]\./,oe=Object.freeze({overrideKey:A.sq,bindTo(t,e){if(!ie.test(t.version))throw new Error(`Unsupported React version: ${t.version}`);return ee(t,e)}}),se=t=>({reactify:t,YMapReactContainer:t.entity(s.d)})},72841:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTM0LjM0OSA1LjY4Yy44MTQgMCAxLjY0OS4xNjUgMi4zNzUuNjEuMjc1LS4yOTEuNjYtLjQ2MiAxLjA3Mi0uNDYyaDEuOTczYy41MDYgMCAuOTc2LjI1OSAxLjI0Ni42ODZsLjA5OS4xNTcuMDU0LS4wOTZhMS40NzMgMS40NzMgMCAwIDEgMS4yODItLjc0N2gxLjc1M2ExLjQ3MyAxLjQ3MyAwIDAgMSAxLjI3MyAyLjIxM2wtMS42NDIgMi44MiAxLjkzNyAzLjA2YTEuNDczIDEuNDczIDAgMCAxLTEuMjQ0IDIuMjZoLTEuOTc0Yy0uNTA2IDAtLjk3Ny0uMjYtMS4yNDYtLjY4OGwtLjI5My0uNDY2LS4yNTguNDMzYy0uMjY1LjQ0Ny0uNzQ3LjcyLTEuMjY2LjcyaC0xLjc4M2ExLjQ3IDEuNDcgMCAwIDEtLjc3NS0uMjIgNi41MzQgNi41MzQgMCAwIDEtMi4yMy4zNjhjLTEuMjA2IDAtMi4zNi0uMjk3LTMuMjctMS4wNDJhMS40NzMgMS40NzMgMCAwIDEtMS4zNTQuODk1aC0xLjYyYTEuNDcgMS40NyAwIDAgMS0uNjEzLS4xMzNjLS40NDMuMTgzLS45My4yOC0xLjQ1LjI4LTEuMDAzIDAtMS45MjMtLjMzOC0yLjY1LS45ODFhMS40NzMgMS40NzMgMCAwIDEtMS4zMjcuODM0aC0xLjc1M2ExLjQ3IDEuNDcgMCAwIDEtMS4xODUtLjU5OWMtLjI2OS4zNjMtLjcuNTk5LTEuMTg2LjU5OUgxNi41NGMtLjI0MSAwLS40Ny0uMDU4LS42Ny0uMTYxYTEuNDcyIDEuNDcyIDAgMCAxLS42Ny4xNmgtMS43MDljLS4xOTkgMC0uMzkxLS4wNC0uNTY4LS4xMTNhNC40ODQgNC40ODQgMCAwIDEtMS40NS4yMTdjLS45NzUgMC0xLjkzOS0uMzAxLTIuNjY2LTEuMDA1YTMuMzc1IDMuMzc1IDAgMCAxLS43MjItMS4wMnYuNDVjMCAuODEzLS42NTkgMS40NzItMS40NzIgMS40NzJINC44M2MtLjgxMyAwLTEuNDczLS42Ni0xLjQ3My0xLjQ3M1YxMi4xTC4xMzUgNS4wODhBMS40NzMgMS40NzMgMCAwIDEgMS40NzMgM2gxLjg1NmMuNTc2IDAgMS4wOTkuMzM1IDEuMzM5Ljg1OWwxLjA5IDIuMzc4IDEuMDQtMi4zNThBMS40NyAxLjQ3IDAgMCAxIDguMTQ0IDNoMS44MTJhMS40NzMgMS40NzMgMCAwIDEgMS4zNDggMi4wNjZsLS4zNjEuODIxYTUuNjUxIDUuNjUxIDAgMCAxIDEuNC0uMTc3YzEuMDEgMCAyLjA5LjE2NyAyLjkzNC44MzJhMS40NzIgMS40NzIgMCAwIDEgMS4yNjMtLjcxNGgxLjcwOWMuMjEgMCAuNDEyLjA0NC41OTQuMTI1YTQuODE3IDQuODE3IDAgMCAxIDEuNTU2LS4yNDNjLjkwNCAwIDEuODkzLjIwMiAyLjYxNy45NzEuMTMxLjEzOS4yNDMuMjg2LjM0LjQ0Ljc4LS45MyAxLjg3OC0xLjQ0IDMuMTEyLTEuNDQuMTMgMCAuMjU3LjAwNi4zODMuMDE4VjQuNDczYzAtLjgxNC42Ni0xLjQ3MyAxLjQ3My0xLjQ3M2gxLjc1MmMuODE0IDAgMS40NzMuNjYgMS40NzMgMS40NzN2Mi4xMTljLjc1Ni0uNTk0IDEuNzEtLjkxMiAyLjc5OS0uOTEyeiIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIuOCIvPjxnIGZpbGw9IiMwMDAiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI4LjM5NiAxMy43NjNjLS40NzIuNzIyLTEuMTUgMS4xMDYtMS45NzUgMS4xMDYtMS42NTIgMC0yLjgwMi0xLjM1Ny0yLjgwMi0zLjgwNCAwLTIuNDc3IDEuMTgtMy45MDcgMi44NzUtMy45MDcuNzY3IDAgMS40MTYuMzU0IDEuODU4IDEuMDE3di0zLjdoMS43NTRWMTQuNzJoLTEuNjIxem0tLjA0NC0yLjc1N2MwLTEuNzEtLjQ3Mi0yLjQ2Mi0xLjQxNS0yLjQ2Mi0xLjAwMyAwLTEuNTA0Ljc2Ni0xLjUwNCAyLjUyIDAgMS42ODIuNDcyIDIuNDE5IDEuNDMgMi40MTkuOTg4IDAgMS40ODktLjc1MiAxLjQ4OS0yLjQ3N3ptOC44NDYgMS43ODR2MS40M2MtLjUxNi4zNTQtMS4zNDIuNjQ5LTIuNDYyLjY0OS0yLjI0MSAwLTMuNTA5LTEuMjU0LTMuNTA5LTMuODM0IDAtMi4yNCAxLjAxNy0zLjg3NyAzLjE1NS0zLjg3NyAxLjc1NSAwIDIuODkuOTczIDIuODkgMy41NTN2LjkyOUgzMy4wNGMuMDc0IDEuMjM4LjU2IDEuODQzIDEuODQzIDEuODQzLjg1NiAwIDEuNzctLjMyNSAyLjMxNS0uNjkzem0tMS43MS0yLjU5NWMwLS45MjktLjI2NS0xLjY1MS0xLjEzNS0xLjY1MS0uODQgMC0xLjI2OC42MTktMS4zMTIgMS43OThoMi40NDd6TTEyLjM1NSA3LjE4N2MxLjg1OCAwIDIuNzcyLjY3OCAyLjc3MiAyLjQ3N3YzLjI0NGMwIC42MDQuMDMgMS4yMDkuMDg4IDEuODEzaC0xLjcxYTIuMzE2IDIuMzE2IDAgMCAxLS4xMzMtLjU5SDEzLjNjLS4zNC4zNTQtLjc4Mi42OTMtMS44MTQuNjkzLTEuMzU2IDAtMi4yNy0uODI1LTIuMjctMi4yNTUgMC0xLjU0OSAxLjE5NC0yLjQxOCAzLjg3Ny0yLjQxOGguMjh2LS40NzJjMC0uNzk2LS4zODMtMS4wOTEtMS4yMjMtMS4wOTEtLjk4OCAwLTEuODQzLjUzLTIuNDAzLjk4OFY4LjA1N2MuNTMtLjM4MyAxLjQ2LS44NyAyLjYxLS44N3ptLS4yMzYgNi4zNTVjLjYyIDAgMS4wMzItLjI2NiAxLjI1My0uNTl2LTEuNjM3aC0uMjVjLTEuNTA0IDAtMi4xMDguMjk1LTIuMTA4IDEuMTUgMCAuNjUuMzY4IDEuMDc3IDEuMTA1IDEuMDc3eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggZD0iTTE5Ljc4NiA4LjY2MmMtLjYzNCAwLTEuMTUuMzM5LTEuNDc0LjczN3Y1LjMyMmgtMS43NTVWNy4zMDVoMS43MWwuMDQ1LjYyaC4wODhjLjM1NC0uMzU0Ljk3My0uNzM4IDIuMDItLjczOCAxLjQzIDAgMi4wMi42NDkgMi4wMiAyLjEyM3Y1LjQxMWgtMS43NTVWOS40ODdjMC0uNTYtLjI4LS44MjUtLjg5OS0uODI1em0yNC43ODQgNi4wNTloLTEuOTc2bC0xLjU3Ny0yLjUwNi0xLjQ5IDIuNTA2aC0xLjc4M2wyLjMzLTMuODYzLTIuMjQyLTMuNTUzaDEuOTc2bDEuNDE1IDIuMjQxIDEuMjY4LTIuMjRoMS43NTVsLTIuMDk0IDMuNTk3eiIvPjwvZz48cGF0aCBkPSJNNi42MiAxNC43MjF2LTEuNzRjMC0xLjMxMi0uMTYzLTEuNjk1LS42NjQtMi43ODZsLTIuNjI0LTUuNzJIMS40NzRsMy4zNjIgNy4zMTJ2Mi45MzR6bTEuMTY0LTUuMjkzIDIuMTgyLTQuOTU0SDguMTUzTDUuOTcxIDkuNDI4eiIgZmlsbD0icmVkIi8+PC9zdmc+Cg=="},84026:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTM0LjM0OSA1LjY4Yy44MTQgMCAxLjY0OS4xNjUgMi4zNzUuNjEuMjc1LS4yOTEuNjYtLjQ2MiAxLjA3Mi0uNDYyaDEuOTczYy41MDYgMCAuOTc2LjI1OSAxLjI0Ni42ODZsLjA5OS4xNTcuMDU0LS4wOTZhMS40NzMgMS40NzMgMCAwIDEgMS4yODItLjc0N2gxLjc1M2ExLjQ3MyAxLjQ3MyAwIDAgMSAxLjI3MyAyLjIxM2wtMS42NDIgMi44MiAxLjkzNyAzLjA2YTEuNDczIDEuNDczIDAgMCAxLTEuMjQ0IDIuMjZoLTEuOTc0Yy0uNTA2IDAtLjk3Ny0uMjYtMS4yNDYtLjY4OGwtLjI5My0uNDY2LS4yNTguNDMzYy0uMjY1LjQ0Ny0uNzQ3LjcyLTEuMjY2LjcyaC0xLjc4M2ExLjQ3IDEuNDcgMCAwIDEtLjc3NS0uMjIgNi41MzQgNi41MzQgMCAwIDEtMi4yMy4zNjhjLTEuMjA2IDAtMi4zNi0uMjk3LTMuMjctMS4wNDJhMS40NzMgMS40NzMgMCAwIDEtMS4zNTQuODk1aC0xLjYyYTEuNDcgMS40NyAwIDAgMS0uNjEzLS4xMzNjLS40NDMuMTgzLS45My4yOC0xLjQ1LjI4LTEuMDAzIDAtMS45MjMtLjMzOC0yLjY1LS45ODFhMS40NzMgMS40NzMgMCAwIDEtMS4zMjcuODM0aC0xLjc1M2ExLjQ3IDEuNDcgMCAwIDEtMS4xODUtLjU5OWMtLjI2OS4zNjMtLjcuNTk5LTEuMTg2LjU5OUgxNi41NGMtLjI0MSAwLS40Ny0uMDU4LS42Ny0uMTYxYTEuNDcyIDEuNDcyIDAgMCAxLS42Ny4xNmgtMS43MDljLS4xOTkgMC0uMzkxLS4wNC0uNTY4LS4xMTNhNC40ODQgNC40ODQgMCAwIDEtMS40NS4yMTdjLS45NzUgMC0xLjkzOS0uMzAxLTIuNjY2LTEuMDA1YTMuMzc1IDMuMzc1IDAgMCAxLS43MjItMS4wMnYuNDVjMCAuODEzLS42NTkgMS40NzItMS40NzIgMS40NzJINC44M2MtLjgxMyAwLTEuNDczLS42Ni0xLjQ3My0xLjQ3M1YxMi4xTC4xMzUgNS4wODhBMS40NzMgMS40NzMgMCAwIDEgMS40NzMgM2gxLjg1NmMuNTc2IDAgMS4wOTkuMzM1IDEuMzM5Ljg1OWwxLjA5IDIuMzc4IDEuMDQtMi4zNThBMS40NyAxLjQ3IDAgMCAxIDguMTQ0IDNoMS44MTJhMS40NzMgMS40NzMgMCAwIDEgMS4zNDggMi4wNjZsLS4zNjEuODIxYTUuNjUxIDUuNjUxIDAgMCAxIDEuNC0uMTc3YzEuMDEgMCAyLjA5LjE2NyAyLjkzNC44MzJhMS40NzIgMS40NzIgMCAwIDEgMS4yNjMtLjcxNGgxLjcwOWMuMjEgMCAuNDEyLjA0NC41OTQuMTI1YTQuODE3IDQuODE3IDAgMCAxIDEuNTU2LS4yNDNjLjkwNCAwIDEuODkzLjIwMiAyLjYxNy45NzEuMTMxLjEzOS4yNDMuMjg2LjM0LjQ0Ljc4LS45MyAxLjg3OC0xLjQ0IDMuMTEyLTEuNDQuMTMgMCAuMjU3LjAwNi4zODMuMDE4VjQuNDczYzAtLjgxNC42Ni0xLjQ3MyAxLjQ3My0xLjQ3M2gxLjc1MmMuODE0IDAgMS40NzMuNjYgMS40NzMgMS40NzN2Mi4xMTljLjc1Ni0uNTk0IDEuNzEtLjkxMiAyLjc5OS0uOTEyeiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNCIvPjxnIGZpbGw9IiNmZmYiPjxwYXRoIGQ9Ik02LjYyIDEyLjk4MXYxLjc0SDQuODM2di0yLjkzNEwxLjQ3NCA0LjQ3NGgxLjg1OGwyLjYyNCA1LjcyYy41MDEgMS4wOTIuNjY0IDEuNDc1LjY2NCAyLjc4N3ptMy4zNDYtOC41MDdMNy43ODQgOS40MjhINS45NzFsMi4xODItNC45NTR6Ii8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjguMzk2IDEzLjc2M2MtLjQ3Mi43MjItMS4xNSAxLjEwNi0xLjk3NSAxLjEwNi0xLjY1MiAwLTIuODAyLTEuMzU3LTIuODAyLTMuODA0IDAtMi40NzcgMS4xOC0zLjkwNyAyLjg3NS0zLjkwNy43NjcgMCAxLjQxNi4zNTQgMS44NTggMS4wMTd2LTMuN2gxLjc1NFYxNC43MmgtMS42MjF6bS0uMDQ0LTIuNzU3YzAtMS43MS0uNDcyLTIuNDYyLTEuNDE1LTIuNDYyLTEuMDAzIDAtMS41MDQuNzY2LTEuNTA0IDIuNTIgMCAxLjY4Mi40NzIgMi40MTkgMS40MyAyLjQxOS45ODggMCAxLjQ4OS0uNzUyIDEuNDg5LTIuNDc3em04Ljg0NiAxLjc4NHYxLjQzYy0uNTE2LjM1NC0xLjM0Mi42NDktMi40NjIuNjQ5LTIuMjQxIDAtMy41MDktMS4yNTQtMy41MDktMy44MzQgMC0yLjI0IDEuMDE3LTMuODc3IDMuMTU1LTMuODc3IDEuNzU1IDAgMi44OS45NzMgMi44OSAzLjU1M3YuOTI5SDMzLjA0Yy4wNzQgMS4yMzguNTYgMS44NDMgMS44NDMgMS44NDMuODU2IDAgMS43Ny0uMzI1IDIuMzE1LS42OTN6bS0xLjcxLTIuNTk1YzAtLjkyOS0uMjY1LTEuNjUxLTEuMTM1LTEuNjUxLS44NCAwLTEuMjY4LjYxOS0xLjMxMiAxLjc5OGgyLjQ0N3ptLTIwLjM2MS0uNTMxYzAtMS43OTktLjkxNC0yLjQ3Ny0yLjc3Mi0yLjQ3Ny0xLjE1IDAtMi4wNzkuNDg3LTIuNjEuODd2MS41MTljLjU2LS40NTcgMS40MTYtLjk4OCAyLjQwNC0uOTg4Ljg0IDAgMS4yMjQuMjk1IDEuMjI0IDEuMDl2LjQ3M2gtLjI4Yy0yLjY4NCAwLTMuODc4Ljg3LTMuODc4IDIuNDE4IDAgMS40My45MTQgMi4yNTUgMi4yNyAyLjI1NSAxLjAzMiAwIDEuNDc1LS4zMzkgMS44MTQtLjY5M2guMDczYy4wMTUuMTkyLjA3NC40NDMuMTMzLjU5aDEuNzFhMTguNjU4IDE4LjY1OCAwIDAgMS0uMDg4LTEuODEzem0tMS43NTQgMy4yODhjLS4yMjIuMzI0LS42MzQuNTktMS4yNTQuNTktLjczNyAwLTEuMTA1LS40MjgtMS4xMDUtMS4wNzcgMC0uODU1LjYwNC0xLjE1IDIuMTA4LTEuMTVoLjI1eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggZD0iTTE5Ljc4NiA4LjY2MmMtLjYzNCAwLTEuMTUuMzM5LTEuNDc0LjczN3Y1LjMyMmgtMS43NTVWNy4zMDVoMS43MWwuMDQ1LjYyaC4wODhjLjM1NC0uMzU0Ljk3My0uNzM4IDIuMDItLjczOCAxLjQzIDAgMi4wMi42NDkgMi4wMiAyLjEyM3Y1LjQxMWgtMS43NTVWOS40ODdjMC0uNTYtLjI4LS44MjUtLjg5OS0uODI1em0yMi44MDggNi4wNTloMS45NzZsLTIuNDE4LTMuODE4IDIuMDk0LTMuNTk4SDQyLjQ5bC0xLjI2OCAyLjI0MS0xLjQxNS0yLjI0aC0xLjk3NmwyLjI0MSAzLjU1Mi0yLjMzIDMuODYzaDEuNzg1bDEuNDg5LTIuNTA2eiIvPjwvZz48L3N2Zz4K"},36728:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBkPSJNMCAwaDQ2djIwSDB6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik05LjQyNCAxNS4zODRjLS4yMjYuMTMtLjQ4OC4yMDMtLjc2Ny4yMDNINi44YTEuNTMgMS41MyAwIDAgMS0xLjUyLTEuMzA1bC0uNDI4LjYzMmExLjU0IDEuNTQgMCAwIDEtMS4yNzYuNjczaC0yLjAxYTEuNTM4IDEuNTM4IDAgMCAxLTEuMzU1LS44MDQgMS41MDQgMS41MDQgMCAwIDEgLjA4LTEuNTZsMS42NS0yLjQyNmE1LjkwNSA1LjkwNSAwIDAgMS0uODUyLTEuMDE1Qy41NDQgOC45NS4yNzYgOC4wMTIuMjc2IDYuOTM0YzAtMS4zODcuNS0yLjY4NSAxLjU4LTMuNjE2QzIuOTEzIDIuNDEgNC4zNDkgMiA1Ljk1NyAyaDIuN2MuODQ4IDAgMS41MzYuNjggMS41MzYgMS41MTh2MS4zOTdoMS44MjZjLjQ5OCAwIC45NC4yMzQgMS4yMi41OTcuMjgtLjM2My43MjMtLjU5NyAxLjIyLS41OTdoMS44MjdjLjQwNyAwIC43NzcuMTU2IDEuMDUxLjQxMmExLjUzOSAxLjUzOSAwIDAgMSAxLjA1Mi0uNDEyaDUuMzI2Yy42NDYgMCAxLjIuMzk1IDEuNDI1Ljk1NC44MTctLjcyIDEuODg1LTEuMTA2IDMuMTE4LTEuMTA2IDEuMDExIDAgMi4wNTMuMjQgMi44OTguOTI2YTEuNTM3IDEuNTM3IDAgMCAxIDEuMzM4LS43NzRoMS44MjdjLjU0IDAgMS4wMTQuMjc1IDEuMjg4LjY5MmwuMDQ3LS4wNjRhMS41NCAxLjU0IDAgMCAxIDEuMjQzLS42MjhoMS44NDJjLjQ0NyAwIC44NjUuMTkyIDEuMTUyLjUxNS43NTgtLjQ0IDEuNjU0LS42NjcgMi42NC0uNjY3IDEuMDI2IDAgMi4wMDMuMTY0IDIuNzE0LjU1OC40ODUuMjY4Ljc4NS43NzUuNzg1IDEuMzI1djEuNTMzYzAgLjU1Mi0uMzAzIDEuMDYtLjc5MSAxLjMyOGExLjU1IDEuNTUgMCAwIDEtMS41NTgtLjA0IDEuNjkgMS42OSAwIDAgMC0uMzc1LS4xNTIgMi4xMjMgMi4xMjMgMCAwIDAtLjU3Ni0uMDg5LjUuNSAwIDAgMC0uMTQzLjAxNmwtLjAwMi4wMDNjLS4wMzkuMDUxLS4xNzcuMzAzLS4xNzcuOTY4cy4xMi45NjEuMTggMS4wNXYuMDAyYy4wMjEuMDA1LjA2LjAxLjEyNi4wMS40NjUgMCAuNzA4LS4xMDcuOS0uMjQuNDctLjMyNiAxLjA4Mi0uMzY1IDEuNTktLjEwNHMuODI2Ljc4LjgyNiAxLjM0N3YxLjQ3MmMwIC40ODctLjIzNi45NDUtLjYzNSAxLjIzLS44MS41OC0xLjc3Ni43Ni0yLjc4OC43Ni0uOTA3IDAtMS43NjQtLjE2LTIuNTE0LS41MmExLjU0NSAxLjU0NSAwIDAgMS0xIC4zNjdIMzcuMDJhMS41NCAxLjU0IDAgMCAxLTEuMjUtLjYzN2wtLjEwNy0uMTQ4YTEuNTM3IDEuNTM3IDAgMCAxLTEuMzQ0Ljc4NWgtMS44MjdjLS40MTQgMC0uNzktLjE2Mi0xLjA2NS0uNDI1LS43NTYuMzU3LTEuNzAzLjU3Ny0yLjgwMy41NzctLjkwOCAwLTEuNzg3LS4xNi0yLjU2My0uNTM4di42MTRjMCAuODM5LS42ODcgMS41MTgtMS41MzUgMS41MThIMjIuODRjLS44NDggMC0xLjUzNS0uNjgtMS41MzUtMS41MTh2LS4yMjhoLTEuMDI4di4yMjhjMCAuODM5LS42ODggMS41MTgtMS41MzUgMS41MThoLTEuNjg5Yy0uODQ3IDAtMS41MzQtLjY4LTEuNTM0LTEuNTE4di0uMjI4aC0xLjA2Yy0uNDk3IDAtLjk0LS4yMzQtMS4yMi0uNTk3LS4yOC4zNjMtLjcyMi41OTctMS4yMi41OTdoLTEuODI2Yy0uMjggMC0uNTQyLS4wNzQtLjc2OC0uMjAzeiIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIuOCIvPjxnIGZpbGw9IiMwMDAiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMxLjE1NyAxMi4xNXYxLjQ4OGMtLjUzNy4zNjgtMS4zOTUuNjc1LTIuNTYuNjc1LTIuMzMxIDAtMy42NS0xLjMwNC0zLjY1LTMuOTg3IDAtMi4zMyAxLjA1OC00LjAzMyAzLjI4MS00LjAzMyAxLjgyNSAwIDMuMDA2IDEuMDEyIDMuMDA2IDMuNjk2di45NjZoLTQuNGMuMDc2IDEuMjg4LjU4MiAxLjkxNiAxLjkxNiAxLjkxNi44OSAwIDEuODQtLjMzNyAyLjQwNy0uNzJ6bS0xLjc3OS0yLjY5OGMwLS45NjYtLjI3Ni0xLjcxNy0xLjE4LTEuNzE3LS44NzQgMC0xLjMxOS42NDQtMS4zNjUgMS44N2gyLjU0NXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik00NC40NTEgMTMuODM3Yy0uNDQ1LjMyMi0xLjA0My40NzYtMS44ODYuNDc2LTIuNDM4IDAtMy42MTktMS40MjYtMy42MTktNC4wMDIgMC0yLjM0NiAxLjIxMi00LjAxOCAzLjU0My00LjAxOC45MDQgMCAxLjU3OS4xNTQgMS45NjIuMzY4VjguMjFjLS4zNjgtLjIzLTEuMDU4LS40NzUtMS43NjMtLjQ3NS0xLjE5NiAwLTEuODU1Ljg1OC0xLjg1NSAyLjUzIDAgMS41OTQuNTM2IDIuNjA2IDEuODQgMi42MDYuNzY2IDAgMS4zMTgtLjE5OSAxLjc3OC0uNTIxek0xNC40NDQgOS40OThWNi40NDdoMS44MjR2Ny43MTJoLTEuODI0di0zLjIyaC0yLjQzOHYzLjIySDEwLjE4VjYuNDQ3aDEuODI1djMuMDUxeiIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjY5IDEyLjcxOGguODEzdjMuMjA1aC0xLjY4N3YtMS43NjRoLTQuMDk0djEuNzY0aC0xLjY4N3YtMy4yMDVoLjU2OGMuNjQ0LTEuMjg4Ljc2Ni0zLjcyNi43NjYtNS42MTJ2LS42Nmg1LjMyem0tNC40IDBoMi41NzV2LTQuODNoLTEuOTMydi4yM2MwIDEuMzM0LS4xMzggMy40MzUtLjY0NCA0LjZ6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBkPSJNMzkuMDU0IDE0LjE2aC0yLjA3bC0yLjY5OS0zLjc4OHYzLjc4N2gtMS44MjRWNi40NDdoMS44MjR2My41NTdsMi41NzYtMy41NTdoMS44NGwtMi41NzYgMy41NTd6Ii8+PC9nPjxwYXRoIGQ9Ik02Ljc5MyAxNC4xNmgxLjg1NVYzLjUwMkg1Ljk0OWMtMi43MTQgMC00LjE0IDEuMzk1LTQuMTQgMy40NSAwIDEuNjQuNzgyIDIuNjA2IDIuMTc4IDMuNjAzbC0yLjQyMyAzLjYwM2gyLjAwOWwyLjY5OC00LjAzMi0uOTM1LS42MjlDNC4yMDEgOC43MyAzLjY0OSA4LjEzMiAzLjY0OSA2Ljg0NGMwLTEuMTM0Ljc5OC0xLjkwMSAyLjMxNi0xLjkwMWguODI4eiIgZmlsbD0icmVkIi8+PC9nPjwvc3ZnPgo="},7717:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIwIiB3aWR0aD0iNDYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBkPSJNMCAwaDQ2djIwSDB6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik05LjQyNCAxNS4zODRjLS4yMjYuMTMtLjQ4OC4yMDMtLjc2Ny4yMDNINi44YTEuNTMgMS41MyAwIDAgMS0xLjUyLTEuMzA1bC0uNDI4LjYzMmExLjU0IDEuNTQgMCAwIDEtMS4yNzYuNjczaC0yLjAxYTEuNTM4IDEuNTM4IDAgMCAxLTEuMzU1LS44MDQgMS41MDQgMS41MDQgMCAwIDEgLjA4LTEuNTZsMS42NS0yLjQyNmE1LjkwNSA1LjkwNSAwIDAgMS0uODUyLTEuMDE1Qy41NDQgOC45NS4yNzYgOC4wMTIuMjc2IDYuOTM0YzAtMS4zODcuNS0yLjY4NSAxLjU4LTMuNjE2QzIuOTEzIDIuNDEgNC4zNDkgMiA1Ljk1NyAyaDIuN2MuODQ4IDAgMS41MzYuNjggMS41MzYgMS41MTh2MS4zOTdoMS44MjZjLjQ5OCAwIC45NC4yMzQgMS4yMi41OTcuMjgtLjM2My43MjMtLjU5NyAxLjIyLS41OTdoMS44MjdjLjQwNyAwIC43NzcuMTU2IDEuMDUxLjQxMmExLjUzOSAxLjUzOSAwIDAgMSAxLjA1Mi0uNDEyaDUuMzI2Yy42NDYgMCAxLjIuMzk1IDEuNDI1Ljk1NC44MTctLjcyIDEuODg1LTEuMTA2IDMuMTE4LTEuMTA2IDEuMDExIDAgMi4wNTMuMjQgMi44OTguOTI2YTEuNTM3IDEuNTM3IDAgMCAxIDEuMzM4LS43NzRoMS44MjdjLjU0IDAgMS4wMTQuMjc1IDEuMjg4LjY5MmwuMDQ3LS4wNjRhMS41NCAxLjU0IDAgMCAxIDEuMjQzLS42MjhoMS44NDJjLjQ0NyAwIC44NjUuMTkyIDEuMTUyLjUxNS43NTgtLjQ0IDEuNjU0LS42NjcgMi42NC0uNjY3IDEuMDI2IDAgMi4wMDMuMTY0IDIuNzE0LjU1OC40ODUuMjY4Ljc4NS43NzUuNzg1IDEuMzI1djEuNTMzYzAgLjU1Mi0uMzAzIDEuMDYtLjc5MSAxLjMyOGExLjU1IDEuNTUgMCAwIDEtMS41NTgtLjA0IDEuNjkgMS42OSAwIDAgMC0uMzc1LS4xNTIgMi4xMjMgMi4xMjMgMCAwIDAtLjU3Ni0uMDg5LjUuNSAwIDAgMC0uMTQzLjAxNmwtLjAwMi4wMDNjLS4wMzkuMDUxLS4xNzcuMzAzLS4xNzcuOTY4cy4xMi45NjEuMTggMS4wNXYuMDAyYy4wMjEuMDA1LjA2LjAxLjEyNi4wMS40NjUgMCAuNzA4LS4xMDcuOS0uMjQuNDctLjMyNiAxLjA4Mi0uMzY1IDEuNTktLjEwNHMuODI2Ljc4LjgyNiAxLjM0N3YxLjQ3MmMwIC40ODctLjIzNi45NDUtLjYzNSAxLjIzLS44MS41OC0xLjc3Ni43Ni0yLjc4OC43Ni0uOTA3IDAtMS43NjQtLjE2LTIuNTE0LS41MmExLjU0NSAxLjU0NSAwIDAgMS0xIC4zNjdIMzcuMDJhMS41NCAxLjU0IDAgMCAxLTEuMjUtLjYzN2wtLjEwNy0uMTQ4YTEuNTM3IDEuNTM3IDAgMCAxLTEuMzQ0Ljc4NWgtMS44MjdjLS40MTQgMC0uNzktLjE2Mi0xLjA2NS0uNDI1LS43NTYuMzU3LTEuNzAzLjU3Ny0yLjgwMy41NzctLjkwOCAwLTEuNzg3LS4xNi0yLjU2My0uNTM4di42MTRjMCAuODM5LS42ODcgMS41MTgtMS41MzUgMS41MThIMjIuODRjLS44NDggMC0xLjUzNS0uNjgtMS41MzUtMS41MTh2LS4yMjhoLTEuMDI4di4yMjhjMCAuODM5LS42ODggMS41MTgtMS41MzUgMS41MThoLTEuNjg5Yy0uODQ3IDAtMS41MzQtLjY4LTEuNTM0LTEuNTE4di0uMjI4aC0xLjA2Yy0uNDk3IDAtLjk0LS4yMzQtMS4yMi0uNTk3LS4yOC4zNjMtLjcyMi41OTctMS4yMi41OTdoLTEuODI2Yy0uMjggMC0uNTQyLS4wNzQtLjc2OC0uMjAzeiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNCIvPjxnIGZpbGw9IiNmZmYiPjxwYXRoIGQ9Ik04LjY0OCAxNC4xNkg2Ljc5M1Y0Ljk0M2gtLjgyOGMtMS41MTggMC0yLjMxNi43NjctMi4zMTYgMS45MDEgMCAxLjI4OC41NTIgMS44ODYgMS42ODcgMi42NTNsLjkzNS42MjktMi42OTggNC4wMzJIMS41NjRsMi40MjMtMy42MDNDMi41OSA5LjU1OSAxLjgwOSA4LjU5MyAxLjgwOSA2Ljk1M2MwLTIuMDU1IDEuNDI2LTMuNDUgNC4xNC0zLjQ1aDIuNjk5eiIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMxLjE1NyAxMi4xNXYxLjQ4OGMtLjUzNy4zNjgtMS4zOTUuNjc1LTIuNTYuNjc1LTIuMzMxIDAtMy42NS0xLjMwNC0zLjY1LTMuOTg3IDAtMi4zMyAxLjA1OC00LjAzMyAzLjI4MS00LjAzMyAxLjgyNSAwIDMuMDA2IDEuMDEyIDMuMDA2IDMuNjk2di45NjZoLTQuNGMuMDc2IDEuMjg4LjU4MiAxLjkxNiAxLjkxNiAxLjkxNi44OSAwIDEuODQtLjMzNyAyLjQwNy0uNzJ6bS0xLjc3OS0yLjY5OGMwLS45NjYtLjI3Ni0xLjcxNy0xLjE4LTEuNzE3LS44NzQgMC0xLjMxOS42NDQtMS4zNjUgMS44N2gyLjU0NXoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik00NC40NTEgMTMuODM3Yy0uNDQ1LjMyMi0xLjA0My40NzYtMS44ODYuNDc2LTIuNDM4IDAtMy42MTktMS40MjYtMy42MTktNC4wMDIgMC0yLjM0NiAxLjIxMi00LjAxOCAzLjU0My00LjAxOC45MDQgMCAxLjU3OS4xNTQgMS45NjIuMzY4VjguMjFjLS4zNjgtLjIzLTEuMDU4LS40NzUtMS43NjMtLjQ3NS0xLjE5NiAwLTEuODU1Ljg1OC0xLjg1NSAyLjUzIDAgMS41OTQuNTM2IDIuNjA2IDEuODQgMi42MDYuNzY2IDAgMS4zMTgtLjE5OSAxLjc3OC0uNTIxem0tMzAuMDA3LTcuMzl2My4wNTFoLTIuNDM4VjYuNDQ3SDEwLjE4djcuNzEyaDEuODI1di0zLjIyaDIuNDM4djMuMjJoMS44MjRWNi40NDd6Ii8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjMuNjkgMTIuNzE4aC44MTN2My4yMDVoLTEuNjg3di0xLjc2NGgtNC4wOTR2MS43NjRoLTEuNjg3di0zLjIwNWguNTY4Yy42NDQtMS4yODguNzY2LTMuNzI2Ljc2Ni01LjYxMnYtLjY2aDUuMzJ6bS00LjQgMGgyLjU3NXYtNC44M2gtMS45MzJ2LjIzYzAgMS4zMzQtLjEzOCAzLjQzNS0uNjQ0IDQuNnoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik0zNi45ODQgMTQuMTZoMi4wN2wtMi45MjktNC4xNTYgMi41NzYtMy41NTdoLTEuODRsLTIuNTc2IDMuNTU3VjYuNDQ3SDMyLjQ2djcuNzEyaDEuODI1di0zLjc4N3oiLz48L2c+PC9nPjwvc3ZnPgo="}},t=>{var e,i=(e=12498,t(t.s=e));self["@yandex/ymaps3-main"]=i}]);